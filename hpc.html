<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Isaac T. Petersen">
<meta name="dcterms.date" content="today">
<title>High-Performance Computing (Argon Supercomputer) – Data Analysis Guides for the Developmental Psychopathology Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-b754b9fd3853d7e56faef54c29c5d52b.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9278de052701f0b3f1191ef96b26c196.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-TYR0QMREEW"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TYR0QMREEW', { 'anonymize_ip': true});
</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="includes/custom.css">
<link rel="stylesheet" href="font/css/roboto.css">
</head>
<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/labLogo.png" alt="" class="navbar-logo light-content"><img src="./images/labLogo.png" alt="" class="navbar-logo dark-content"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Data Analysis Guides for the Developmental Psychopathology Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-datasets" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Datasets</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-datasets">
<li>
    <a class="dropdown-item" href="./abcdData.html">
 <span class="dropdown-text">ABCD Study Data</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analysis-techniques" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Analysis Techniques</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analysis-techniques">
<li>
    <a class="dropdown-item" href="./bayesian.html">
 <span class="dropdown-text">Bayesian Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./dataManagement.html">
 <span class="dropdown-text">Data Management</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./dags.html">
 <span class="dropdown-text">Directed Acyclic Graphs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./eegERP.html">
 <span class="dropdown-text">Electroencephalography/Event-Related Potentials</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./eda.html">
 <span class="dropdown-text">Exploratory Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./factorAnalysis.html">
 <span class="dropdown-text">Factor Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./figures.html">
 <span class="dropdown-text">Figures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hlm.html">
 <span class="dropdown-text">Hierarchical Linear Modeling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./irt.html">
 <span class="dropdown-text">Item Response Theory</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lda.html">
 <span class="dropdown-text">Longitudinal Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sem.html#mediation">
 <span class="dropdown-text">Mediation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./regression.html#moderation">
 <span class="dropdown-text">Moderation/Interaction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./multipleImputation.html">
 <span class="dropdown-text">Multiple Imputation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./pca.html">
 <span class="dropdown-text">Principal Component Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./regression.html">
 <span class="dropdown-text">Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./statistics.html">
 <span class="dropdown-text">Statistics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sem.html">
 <span class="dropdown-text">Structural Equation Modeling</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-softwareframeworks" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Software/Frameworks</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-softwareframeworks">
<li>
    <a class="dropdown-item" href="./git.html">
 <span class="dropdown-text">Git, GitLab, and GitHub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hpc.html">
 <span class="dropdown-text">High-Performance Computing Cluster</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./jamovi.html">
 <span class="dropdown-text">jamovi</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./jatos.html">
 <span class="dropdown-text">JATOS (Just Another Tool for Online Studies)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./jsPsych.html">
 <span class="dropdown-text">jsPsych</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lamp.html">
 <span class="dropdown-text">LAMP (Linux, Apache, MySQL, PHP) Server</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./markdown.html">
 <span class="dropdown-text">Markdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mplus.html">
 <span class="dropdown-text">Mplus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./osf.html">
 <span class="dropdown-text">Open Science Framework</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://devpsylab.github.io/pythonDataAnalysisGuides">
 <span class="dropdown-text">Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./R.html">
 <span class="dropdown-text">R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./SPSS.html">
 <span class="dropdown-text">SPSS</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="https://devpsylab.github.io/LabWiki"> 
<span class="menu-text">Lab Wiki</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://developmental-psychopathology.lab.uiowa.edu"> 
<span class="menu-text">Lab Website</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/DevPsyLab/DataAnalysis">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/DevPsyLab/DataAnalysis/issues/new">
            Report a Bug
            </a>
          </li>
      </ul>
</div>
    <a href="https://twitter.com/devpsylab" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.facebook.com/DevPsyLab" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-facebook"></i></a>
    <a href="https://www.instagram.com/devpsylab" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-instagram"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./hpc.html">High-Performance Computing</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./abcdData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ABCD Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayesian.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataManagement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Management</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dags.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Directed Acyclic Graphs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eegERP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Electroencephalography/Event-Related Potentials</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploratory Data Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factorAnalysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Factor Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./figures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Figures</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Git, GitLab, and GitHub</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hlm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hierarchical Linear Modeling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hpc.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">High-Performance Computing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./irt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Item Response Theory</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./jamovi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">jamovi</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./jatos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JATOS (Just Another Tool for Online Studies)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./jsPsych.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">jsPsych</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lamp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LAMP (Linux, Apache, MySQL, PHP) Server</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Longitudinal Data Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Markdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sem.html#mediation" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mediation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regression.html#moderation" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Moderation/Interaction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mplus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mplus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./multipleImputation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Imputation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./osf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Open Science Framework</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principal Component Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://devpsylab.github.io/pythonDataAnalysisGuides" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./SPSS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SPSS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structural Equation Modeling</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li>
<a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">1</span> Overview</a>
  <ul>
<li><a href="#links-to-documentation" id="toc-links-to-documentation" class="nav-link" data-scroll-target="#links-to-documentation"><span class="header-section-number">1.1</span> Links to Documentation</a></li>
  <li><a href="#data-storage" id="toc-data-storage" class="nav-link" data-scroll-target="#data-storage"><span class="header-section-number">1.2</span> Data Storage</a></li>
  <li><a href="#sensitive-data" id="toc-sensitive-data" class="nav-link" data-scroll-target="#sensitive-data"><span class="header-section-number">1.3</span> Sensitive Data</a></li>
  <li><a href="#fees" id="toc-fees" class="nav-link" data-scroll-target="#fees"><span class="header-section-number">1.4</span> Fees</a></li>
  </ul>
</li>
  <li><a href="#accessing-lab-drive" id="toc-accessing-lab-drive" class="nav-link" data-scroll-target="#accessing-lab-drive"><span class="header-section-number">2</span> Accessing Lab Drive</a></li>
  <li>
<a href="#map-argon-drive-to-local-computer" id="toc-map-argon-drive-to-local-computer" class="nav-link" data-scroll-target="#map-argon-drive-to-local-computer"><span class="header-section-number">3</span> Map Argon Drive to Local Computer</a>
  <ul>
<li><a href="#windows" id="toc-windows" class="nav-link" data-scroll-target="#windows"><span class="header-section-number">3.1</span> Windows</a></li>
  </ul>
</li>
  <li>
<a href="#accessing-argon" id="toc-accessing-argon" class="nav-link" data-scroll-target="#accessing-argon"><span class="header-section-number">4</span> Accessing Argon</a>
  <ul>
<li><a href="#ssh" id="toc-ssh" class="nav-link" data-scroll-target="#ssh"><span class="header-section-number">4.1</span> SSH</a></li>
  <li><a href="#windows-1" id="toc-windows-1" class="nav-link" data-scroll-target="#windows-1"><span class="header-section-number">4.2</span> Windows</a></li>
  <li><a href="#mac" id="toc-mac" class="nav-link" data-scroll-target="#mac"><span class="header-section-number">4.3</span> Mac</a></li>
  </ul>
</li>
  <li><a href="#general-commands" id="toc-general-commands" class="nav-link" data-scroll-target="#general-commands"><span class="header-section-number">5</span> General Commands</a></li>
  <li><a href="#access-project-directories" id="toc-access-project-directories" class="nav-link" data-scroll-target="#access-project-directories"><span class="header-section-number">6</span> Access Project Directories</a></li>
  <li><a href="#sec-container" id="toc-sec-container" class="nav-link" data-scroll-target="#sec-container"><span class="header-section-number">7</span> Using a Container</a></li>
  <li>
<a href="#linux" id="toc-linux" class="nav-link" data-scroll-target="#linux"><span class="header-section-number">8</span> Linux</a>
  <ul>
<li>
<a href="#initial-run" id="toc-initial-run" class="nav-link" data-scroll-target="#initial-run"><span class="header-section-number">8.1</span> Initial run</a>
  <ul>
<li><a href="#installing-linux-packages-to-install-r-packages" id="toc-installing-linux-packages-to-install-r-packages" class="nav-link" data-scroll-target="#installing-linux-packages-to-install-r-packages"><span class="header-section-number">8.1.1</span> Installing Linux Packages to Install <code>R</code> Packages</a></li>
  <li><a href="#load-the-latest-stack" id="toc-load-the-latest-stack" class="nav-link" data-scroll-target="#load-the-latest-stack"><span class="header-section-number">8.1.2</span> Load the Latest Stack</a></li>
  <li><a href="#stack-2022.2" id="toc-stack-2022.2" class="nav-link" data-scroll-target="#stack-2022.2"><span class="header-section-number">8.1.3</span> Stack 2022.2</a></li>
  </ul>
</li>
  <li><a href="#load-software-stacks" id="toc-load-software-stacks" class="nav-link" data-scroll-target="#load-software-stacks"><span class="header-section-number">8.2</span> Load Software Stacks</a></li>
  <li>
<a href="#sec-jobScript" id="toc-sec-jobScript" class="nav-link" data-scroll-target="#sec-jobScript"><span class="header-section-number">8.3</span> Job Script</a>
  <ul>
<li><a href="#qsub-options" id="toc-qsub-options" class="nav-link" data-scroll-target="#qsub-options"><span class="header-section-number">8.3.1</span> qsub options</a></li>
  </ul>
</li>
  <li>
<a href="#submit-job" id="toc-submit-job" class="nav-link" data-scroll-target="#submit-job"><span class="header-section-number">8.4</span> Submit Job</a>
  <ul>
<li><a href="#bayesian-irt" id="toc-bayesian-irt" class="nav-link" data-scroll-target="#bayesian-irt"><span class="header-section-number">8.4.1</span> Bayesian IRT</a></li>
  <li><a href="#multiple-imputation" id="toc-multiple-imputation" class="nav-link" data-scroll-target="#multiple-imputation"><span class="header-section-number">8.4.2</span> Multiple Imputation</a></li>
  </ul>
</li>
  <li><a href="#queues" id="toc-queues" class="nav-link" data-scroll-target="#queues"><span class="header-section-number">8.5</span> Queues</a></li>
  <li><a href="#queue-status" id="toc-queue-status" class="nav-link" data-scroll-target="#queue-status"><span class="header-section-number">8.6</span> Queue Status</a></li>
  <li><a href="#job-status" id="toc-job-status" class="nav-link" data-scroll-target="#job-status"><span class="header-section-number">8.7</span> Job Status</a></li>
  <li><a href="#job-time-and-memory" id="toc-job-time-and-memory" class="nav-link" data-scroll-target="#job-time-and-memory"><span class="header-section-number">8.8</span> Job Time and Memory</a></li>
  <li><a href="#cancel-job" id="toc-cancel-job" class="nav-link" data-scroll-target="#cancel-job"><span class="header-section-number">8.9</span> Cancel Job</a></li>
  <li><a href="#run-r-script" id="toc-run-r-script" class="nav-link" data-scroll-target="#run-r-script"><span class="header-section-number">8.10</span> Run <code>R</code> Script</a></li>
  </ul>
</li>
  <li>
<a href="#r" id="toc-r" class="nav-link" data-scroll-target="#r"><span class="header-section-number">9</span> R</a>
  <ul>
<li><a href="#find-which-versions-of-r-are-installed" id="toc-find-which-versions-of-r-are-installed" class="nav-link" data-scroll-target="#find-which-versions-of-r-are-installed"><span class="header-section-number">9.1</span> Find which versions of <code>R</code> are installed</a></li>
  <li><a href="#compile-r" id="toc-compile-r" class="nav-link" data-scroll-target="#compile-r"><span class="header-section-number">9.2</span> Compile <code>R</code></a></li>
  <li>
<a href="#install-r-packages" id="toc-install-r-packages" class="nav-link" data-scroll-target="#install-r-packages"><span class="header-section-number">9.3</span> Install <code>R</code> packages</a>
  <ul>
<li><a href="#install-r-package-locally-from-source" id="toc-install-r-package-locally-from-source" class="nav-link" data-scroll-target="#install-r-package-locally-from-source"><span class="header-section-number">9.3.1</span> Install <code>R</code> package locally from source</a></li>
  <li>
<a href="#sec-renv" id="toc-sec-renv" class="nav-link" data-scroll-target="#sec-renv"><span class="header-section-number">9.3.2</span> Managing packages for a project using <code>renv</code></a>
  <ul class="collapse">
<li><a href="#to-control-which-packages-to-install-with-renv-using-a-description-file" id="toc-to-control-which-packages-to-install-with-renv-using-a-description-file" class="nav-link" data-scroll-target="#to-control-which-packages-to-install-with-renv-using-a-description-file"><span class="header-section-number">9.3.2.1</span> To control which packages to install with <code>renv</code> using a <code>DESCRIPTION</code> file</a></li>
  </ul>
</li>
  <li><a href="#to-install-a-new-package-for-a-project-after-renv-has-been-initialized" id="toc-to-install-a-new-package-for-a-project-after-renv-has-been-initialized" class="nav-link" data-scroll-target="#to-install-a-new-package-for-a-project-after-renv-has-been-initialized"><span class="header-section-number">9.3.3</span> To install a new package for a project after <code>renv</code> has been initialized</a></li>
  </ul>
</li>
  <li><a href="#update-packages" id="toc-update-packages" class="nav-link" data-scroll-target="#update-packages"><span class="header-section-number">9.4</span> Update Packages</a></li>
  <li><a href="#sec-runRscript" id="toc-sec-runRscript" class="nav-link" data-scroll-target="#sec-runRscript"><span class="header-section-number">9.5</span> Run <code>R</code> Script</a></li>
  <li><a href="#quit-r" id="toc-quit-r" class="nav-link" data-scroll-target="#quit-r"><span class="header-section-number">9.6</span> Quit R</a></li>
  </ul>
</li>
  <li><a href="#stan" id="toc-stan" class="nav-link" data-scroll-target="#stan"><span class="header-section-number">10</span> Stan</a></li>
  <li>
<a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting"><span class="header-section-number">11</span> Troubleshooting</a>
  <ul>
<li><a href="#having-trouble-installing-packages" id="toc-having-trouble-installing-packages" class="nav-link" data-scroll-target="#having-trouble-installing-packages"><span class="header-section-number">11.1</span> Having trouble installing packages?</a></li>
  <li>
<a href="#error-when-installing-packages-from-source" id="toc-error-when-installing-packages-from-source" class="nav-link" data-scroll-target="#error-when-installing-packages-from-source"><span class="header-section-number">11.2</span> Error When Installing Packages from Source</a>
  <ul>
<li><a href="#nloptr" id="toc-nloptr" class="nav-link" data-scroll-target="#nloptr"><span class="header-section-number">11.2.1</span> <code>nloptr</code></a></li>
  <li><a href="#tkrplot" id="toc-tkrplot" class="nav-link" data-scroll-target="#tkrplot"><span class="header-section-number">11.2.2</span> <code>tkrplot</code></a></li>
  </ul>
</li>
  <li><a href="#error-reading-from-connection" id="toc-error-reading-from-connection" class="nav-link" data-scroll-target="#error-reading-from-connection"><span class="header-section-number">11.3</span> Error Reading from Connection</a></li>
  </ul>
</li>
  <li>
<a href="#sec-appendix" id="toc-sec-appendix" class="nav-link" data-scroll-target="#sec-appendix"><span class="header-section-number">12</span> Appendix</a>
  <ul>
<li>
<a href="#old-stacks" id="toc-old-stacks" class="nav-link" data-scroll-target="#old-stacks"><span class="header-section-number">12.1</span> Old Stacks</a>
  <ul>
<li><a href="#stack-2022.1" id="toc-stack-2022.1" class="nav-link" data-scroll-target="#stack-2022.1"><span class="header-section-number">12.1.1</span> Stack 2022.1</a></li>
  <li><a href="#stack-2021.1" id="toc-stack-2021.1" class="nav-link" data-scroll-target="#stack-2021.1"><span class="header-section-number">12.1.2</span> Stack 2021.1</a></li>
  <li><a href="#stack-2020.2" id="toc-stack-2020.2" class="nav-link" data-scroll-target="#stack-2020.2"><span class="header-section-number">12.1.3</span> Stack 2020.2</a></li>
  <li><a href="#stack-2020.1" id="toc-stack-2020.1" class="nav-link" data-scroll-target="#stack-2020.1"><span class="header-section-number">12.1.4</span> Stack 2020.1</a></li>
  </ul>
</li>
  <li>
<a href="#managing-packages-for-a-project-using-packrat" id="toc-managing-packages-for-a-project-using-packrat" class="nav-link" data-scroll-target="#managing-packages-for-a-project-using-packrat"><span class="header-section-number">12.2</span> Managing packages for a project using <code>packrat</code></a>
  <ul>
<li><a href="#to-install-a-new-package-for-a-project-after-packrat-has-been-initialized" id="toc-to-install-a-new-package-for-a-project-after-packrat-has-been-initialized" class="nav-link" data-scroll-target="#to-install-a-new-package-for-a-project-after-packrat-has-been-initialized"><span class="header-section-number">12.2.1</span> To install a new package for a project after <code>packrat</code> has been initialized</a></li>
  <li><a href="#build-packrat-environment-on-a-compute-node-only-if-necessary-if-package-load-fails-due-to-issues-building-packages" id="toc-build-packrat-environment-on-a-compute-node-only-if-necessary-if-package-load-fails-due-to-issues-building-packages" class="nav-link" data-scroll-target="#build-packrat-environment-on-a-compute-node-only-if-necessary-if-package-load-fails-due-to-issues-building-packages"><span class="header-section-number">12.2.2</span> Build <code>packrat</code> environment on a compute node (only if necessary if package load fails due to issues building packages)</a></li>
  </ul>
</li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/DevPsyLab/DataAnalysis/edit/main/hpc.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/DevPsyLab/DataAnalysis/blob/main/hpc.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/DevPsyLab/DataAnalysis/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">High-Performance Computing (Argon Supercomputer)</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="overview" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Overview</h1>
<p>Analysis scripts for High Performance Computing (HPC) at the University of Iowa. Currently uses Argon.</p>
<section id="links-to-documentation" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="links-to-documentation">
<span class="header-section-number">1.1</span> Links to Documentation</h2>
<p>Workflow: <a href="https://workflow.uiowa.edu/entry/new/3282/11927336" class="uri">https://workflow.uiowa.edu/entry/new/3282/11927336</a></p>
<p>Cluster Systems Documentation: <a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513411/Cluster+Systems+Documentation" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513411/Cluster+Systems+Documentation</a> (archived at <a href="https://perma.cc/EKB8-ZKR7" class="uri">https://perma.cc/EKB8-ZKR7</a>)</p>
<p>Argon Cluster Documentation: <a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513466/Argon+Cluster" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513466/Argon+Cluster</a> (archived at <a href="https://perma.cc/6HST-VV6Y" class="uri">https://perma.cc/6HST-VV6Y</a>)</p>
</section><section id="data-storage" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="data-storage">
<span class="header-section-number">1.2</span> Data Storage</h2>
<p>Significant amounts of data storage are provided on Argon, but data are not backed up in any way unless special arrangements are made. It is the responsibility of the user to back up important information.</p>
</section><section id="sensitive-data" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="sensitive-data">
<span class="header-section-number">1.3</span> Sensitive Data</h2>
<p>User agrees to refrain from storing Restricted data on HPC resources. Data is classified as Restricted when the unauthorized disclosure, alteration or destruction of that data could cause a significant level of risk to the University or its affiliates. Examples of Restricted data include data protected by state or federal privacy regulations and data pertaining to identified human subjects that has not been deidentified.</p>
</section><section id="fees" class="level2" data-number="1.4"><h2 data-number="1.4" class="anchored" data-anchor-id="fees">
<span class="header-section-number">1.4</span> Fees</h2>
<p>At present there are no fees for the use of the Argon cluster for low-priority usage. For large users, or those who want access to dedicated resources, the option of purchasing or renting supplemental system hardware may be available. If you are interested in dedicated hardware, contact <a href="mailto:research-computing@uiowa.edu">research-computing@uiowa.edu</a>.</p>
</section></section><section id="accessing-lab-drive" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Accessing Lab Drive</h1>
<p><code>/Shared/lss_itpetersen</code></p>
</section><section id="map-argon-drive-to-local-computer" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Map Argon Drive to Local Computer</h1>
<section id="windows" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="windows">
<span class="header-section-number">3.1</span> Windows</h2>
<ol type="1">
<li>Right click on <code>This PC</code> and select <code>Map Network Drive</code>
</li>
<li>Select <code>Y</code> and type <code>\\data.hpc.uiowa.edu\argon_home\Documents</code>
</li>
</ol></section></section><section id="accessing-argon" class="level1" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> Accessing Argon</h1>
<section id="ssh" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="ssh">
<span class="header-section-number">4.1</span> SSH</h2>
<p><code>argon.hpc.uiowa.edu</code></p>
</section><section id="windows-1" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="windows-1">
<span class="header-section-number">4.2</span> Windows</h2>
<p>Windows Explorer:</p>
<p><code>\\data.hpc.uiowa.edu\argon_home</code> (username: itpetersen@uiowa.edu or hawkid@uiowa.edu)</p>
<p>Using SecureCRT for an SSH connection: 1. Download SecureCRT from UIowa Informational Technology Services: <a href="https://its.uiowa.edu/securecrt" class="uri">https://its.uiowa.edu/securecrt</a> 2. In Hostname type <code>argon.hpc.uiowa.edu</code> and in username type HawkID 3. Click connect</p>
</section><section id="mac" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="mac">
<span class="header-section-number">4.3</span> Mac</h2>
<p>Mac OS Terminal:</p>
<p><code>ssh itpetersen@argon.hpc.uiowa.edu</code> (on campus)</p>
<p><code>ssh -p 40 itpetersen@argon.hpc.uiowa.edu</code> (off campus without VPN)</p>
</section></section><section id="general-commands" class="level1" data-number="5"><h1 data-number="5">
<span class="header-section-number">5</span> General Commands</h1>
<ul>
<li>
<code>pwd</code> print current working directory</li>
<li>
<code>cd path/to/directory</code> sets working directory</li>
<li>
<code>ls</code> print files in directory</li>
<li>
<code>module load moduleName</code> loads modules required for analyses; necessary to complete prior to submitting jobs involving R</li>
<li>
<code>module list</code> lists downloaded modules</li>
<li>
<code>qsub</code> submit a job script to Argon processing</li>
<li>
<code>R CMD BATCH</code> submit a single R script to Argon processing Argon requires Linux-compatible file endings, which is problematic for files created outside Argon (using DOS or CRLF file endings). Use the following commands to check if your files are Argon compatible (i.e., Unix LF) and resolve incompatible file endings:</li>
<li>
<code>file myfile.job | grep CRLF</code> checks if a file ending uses the incompatible CRLF format. Remember to check the ending of your file; this script assumes it is .job</li>
<li>
<code>dos2unix myfile.job</code> converts CRLF file endings to Argon-compatible LF endings</li>
<li>
<code>find ~/DirectoryName -name '*job' -exec dos2unix "{}" \;</code> converts all files in a directory that end with .job to LF format; change ’*job’ to change other file types</li>
</ul></section><section id="access-project-directories" class="level1" data-number="6"><h1 data-number="6">
<span class="header-section-number">6</span> Access Project Directories</h1>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Bayesian_IRT/</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/EXT_pilot/</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Multiple_Imputation/</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/SelfRegulation_IRT/</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Test/</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section><section id="sec-container" class="level1" data-number="7"><h1 data-number="7">
<span class="header-section-number">7</span> Using a Container</h1>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513442/Singularity+Containers" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513442/Singularity+Containers</a></p>
<p>Steps:</p>
<ol type="1">
<li>If you are Windows, install Windows Subsystem for Linux (WSL)
<ul>
<li>In PowerShell (Admin):</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">wsl</span> <span class="at">--install</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
Restart the computer. It will install Ubuntu by default.</li>
<li>Update Ubuntu
<ul>
<li>Open Ubuntu</li>
<li>Inside the Ubuntu terminal, run:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt upgrade <span class="at">-y</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>Install Apptainer inside WSL
<ul>
<li>Inside the Ubuntu terminal, first install dependencies:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>build-essential <span class="dt">\</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>libseccomp-dev <span class="dt">\</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>pkg-config <span class="dt">\</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>squashfs-tools <span class="dt">\</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>cryptsetup <span class="dt">\</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>curl <span class="dt">\</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>wget <span class="dt">\</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>git <span class="dt">\</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>uidmap <span class="dt">\</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>golang-go</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Now, install Apptainer:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> apptainer</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Verify installation:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> <span class="at">--version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code> - If not available via apt (`E: Unable to locate package apptainer`), install from source (specify the version number for the latest release version available; see release versions [here](https://github.com/apptainer/apptainer/releases)):
 ```bash
 export VERSION=1.4.5
 wget https://github.com/apptainer/apptainer/releases/download/v${VERSION}/apptainer-${VERSION}.tar.gz
 tar -xzf apptainer-${VERSION}.tar.gz
 cd apptainer-${VERSION}
 ```
 - If you installed from source, build Apptainer:
 ```bash
 ./mconfig
 make -C builddir
 sudo make -C builddir install
 ```
 - Verify installation:
 ```bash
 apptainer --version
 ```</code></pre>
</li>
<li>Create your <code>R</code> Container Definition File
<ul>
<li>Inside the Ubuntu terminal, run:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> r_argon.def</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Paste this:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Bootstrap:</span> docker</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">From:</span> rocker/r-ver:latest</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="ex">%post</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Install system dependencies</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        libcurl4-openssl-dev <span class="dt">\</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        libssl-dev <span class="dt">\</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        libxml2-dev <span class="dt">\</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        libgit2-dev <span class="dt">\</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        libfontconfig1-dev <span class="dt">\</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        libfreetype6-dev <span class="dt">\</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        libharfbuzz-dev <span class="dt">\</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        libfribidi-dev <span class="dt">\</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        libpng-dev <span class="dt">\</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        libtiff5-dev <span class="dt">\</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        libjpeg-dev <span class="dt">\</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        libglpk-dev <span class="dt">\</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        libgmp3-dev <span class="dt">\</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        libmpfr-dev <span class="dt">\</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        make <span class="dt">\</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        g++ <span class="dt">\</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        cmake <span class="dt">\</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        git <span class="dt">\</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        sudo</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Install core CRAN packages (specify the packages to install here)</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="ex">R</span> <span class="at">-e</span> <span class="st">"install.packages(c(</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="st">        'tidyverse',</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="st">        'data.table',</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="st">        'rstan',</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="st">        'brms',</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="st">        'mirt',</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="st">        'lavaan',</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="st">        'semTools',</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="st">        'renv',</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="st">        'remotes'</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="st">    ), repos='https://cloud.r-project.org')"</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Install cmdstanr</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    <span class="ex">R</span> <span class="at">-e</span> <span class="st">"install.packages('cmdstanr', repos = c('https://stan-dev.r-universe.dev','https://cloud.r-project.org'))"</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Install latest CmdStan into /opt/cmdstan</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mkdir</span> <span class="at">-p</span> /opt/cmdstan</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="ex">R</span> <span class="at">-e</span> <span class="st">"cmdstanr::install_cmdstan(cores = 2, dir='/opt/cmdstan')"</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a symlink 'latest' to the installed CmdStan version</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cd</span> /opt/cmdstan</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ln</span> <span class="at">-s</span> cmdstan-<span class="pp">*</span> latest</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Enable threading for within-chain parallelization</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mkdir</span> <span class="at">-p</span> /root/.R</span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">'CXXFLAGS += -DSTAN_THREADS'</span> <span class="op">&gt;&gt;</span> /root/.R/Makevars</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Install latest version of petersenlab package from GitHub</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>    <span class="ex">R</span> <span class="at">-e</span> <span class="st">"remotes::install_github('DevPsyLab/petersenlab')"</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a><span class="ex">%environment</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/usr/local/lib/R/site-library</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">CMDSTAN</span><span class="op">=</span>/opt/cmdstan/latest</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a><span class="ex">%runscript</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>    <span class="bu">exec</span> R <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Press <code>Ctrl+O</code> to Save (i.e., “Write Out”)</li>
<li>Press Enter</li>
<li>Press <code>Ctrl+X</code> to Exit</li>
</ul>
</li>
<li>Build the Container
<ul>
<li>Inside the Ubuntu terminal, run:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apptainer build r_argon.sif r_argon.def</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>Test the Container Locally
<ul>
<li>Inside the Ubuntu terminal, run:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> exec r_argon.sif R</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Check <code>R</code> version:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Check <code>R</code> packages:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/paul-buerkner/brms">"brms"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"cmdstanr"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/DevPsyLab/petersenlab">"petersenlab"</a></span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Exit <code>R</code>
</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/quit.html">q</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>Copy the Container to Your Computer
<ul>
<li>Inside the Ubuntu terminal, run (updating your path; this is equivalent to: <code>E:/Documents/OneDrive - University of Iowa/Research/Containers/</code>):</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ~/apptainer-1.4.5/r_argon.sif <span class="st">"/mnt/e/Documents/OneDrive - University of Iowa/Research/Containers/"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>Copy the Container to Argon
<ul>
<li>Use WinSCP to transfer the <code>.sif</code> file to Argon (updating your path): <code>/old_Users/itpetersen/Documents/Containers/</code>
</li>
</ul>
</li>
<li>Test Container on Argon
<ul>
<li>Inside the Ubuntu terminal, run:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Containers</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> exec r_argon.sif R</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Check <code>R</code> version:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Check <code>R</code> packages:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/paul-buerkner/brms">"brms"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"cmdstanr"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/DevPsyLab/petersenlab">"petersenlab"</a></span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Exit <code>R</code>
</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/quit.html">q</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>Submit a Job Using the Container on Argon
<ul>
<li>e.g.:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run R inside your container</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/apptainer</span> exec /Users/itpetersen/Documents/Containers/r_argon.sif <span class="dt">\</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    Rscript my_script.R</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
For an example job script using a container, see <a href="#sec-jobScript" class="quarto-xref">Section&nbsp;8.3</a>.</li>
</ol></section><section id="linux" class="level1" data-number="8"><h1 data-number="8">
<span class="header-section-number">8</span> Linux</h1>
<section id="initial-run" class="level2" data-number="8.1"><h2 data-number="8.1" class="anchored" data-anchor-id="initial-run">
<span class="header-section-number">8.1</span> Initial run</h2>
<section id="installing-linux-packages-to-install-r-packages" class="level3" data-number="8.1.1"><h3 data-number="8.1.1" class="anchored" data-anchor-id="installing-linux-packages-to-install-r-packages">
<span class="header-section-number">8.1.1</span> Installing Linux Packages to Install <code>R</code> Packages</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.2</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.2.2_gcc-9.5.0</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load geos/3.9.1_gcc-9.5.0</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load gdal/2.4.4_gcc-9.5.0</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load proj/5.2.0_gcc-9.5.0</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load gsl/2.7.1_gcc-9.5.0</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load nlopt/2.7.0_gcc-9.5.0</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load jags/4.3.0_gcc-9.5.0-dev</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load zlib/1.2.13_gcc-9.5.0-dev</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load cmake/3.25.0_gcc-9.5.0</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load glpk/4.65_gcc-9.5.0-dev</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load libxml2/2.10.3_gcc-9.5.0</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-nloptr</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-zlibbioc/1.44.0_gcc-9.5.0</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-data-table/1.14.4_gcc-9.5.0</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-stringi/1.7.8_gcc-9.5.0</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-selectr/0.4-2_gcc-9.5.0</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-generics/0.1.3_gcc-9.5.0</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-fansi/1.0.3_gcc-9.5.0</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-utf8/1.2.2_gcc-9.5.0</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-pkgconfig/2.0.3_gcc-9.5.0</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-gtable/0.3.1_gcc-9.5.0</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-scales/1.2.1_gcc-9.5.0</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-tzdb/0.3.0_gcc-9.5.0</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-timechange/0.1.1_gcc-9.5.0</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-dbi/1.1.3_gcc-9.5.0</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section><section id="load-the-latest-stack" class="level3" data-number="8.1.2"><h3 data-number="8.1.2" class="anchored" data-anchor-id="load-the-latest-stack">
<span class="header-section-number">8.1.2</span> Load the Latest Stack</h3>
<p><code>module load stack</code></p>
</section><section id="stack-2022.2" class="level3" data-number="8.1.3"><h3 data-number="8.1.3" class="anchored" data-anchor-id="stack-2022.2">
<span class="header-section-number">8.1.3</span> Stack 2022.2</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.2</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.2.2_gcc-9.5.0</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section><section id="load-software-stacks" class="level2" data-number="8.2"><h2 data-number="8.2" class="anchored" data-anchor-id="load-software-stacks">
<span class="header-section-number">8.2</span> Load Software Stacks</h2>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513440/Argon+Software+List" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513440/Argon+Software+List</a> (archived at <a href="https://perma.cc/WJ4Q-GDUS" class="uri">https://perma.cc/WJ4Q-GDUS</a>)</p>
<p><code>module load stack/2022.2</code></p>
</section><section id="sec-jobScript" class="level2" data-number="8.3"><h2 data-number="8.3" class="anchored" data-anchor-id="sec-jobScript">
<span class="header-section-number">8.3</span> Job Script</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Bayesian_IRT/</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify qsub options</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -pe smp 4</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -M isaac-t-petersen@uiowa.edu</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -m eas</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l mf=512G</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l h_vmem=512G</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -q UI-HM</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -e /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -o /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the environment modules</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> purge</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.2</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.2.2_gcc-9.5.0</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the R script</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> ./Analyses/factorScores.R</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Using a container:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Bayesian_IRT/</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify qsub options</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -pe smp 4</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -M isaac-t-petersen@uiowa.edu</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -m eas</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l mf=512G</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l h_vmem=512G</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -q UI-HM</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -e /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -o /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the environment modules</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> purge</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the R script inside container</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> exec /Users/itpetersen/Documents/Containers/r_argon.sif <span class="dt">\</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    Rscript ./Analyses/factorScores.R</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="qsub-options" class="level3" data-number="8.3.1"><h3 data-number="8.3.1" class="anchored" data-anchor-id="qsub-options">
<span class="header-section-number">8.3.1</span> qsub options</h3>
<p><code>-pe smp 4</code>: specify a parallel environment and number of cores to be used (<code>smp</code> = shared memory parallel environment)</p>
<ul>
<li>The <code>OMP_NUM_THREADS</code> variable is set to ‘1’ by default. If your code can take advantage of the threading then specify <code>OMP_NUM_THREADS</code> to be equal to the number of job cores per node requested.</li>
</ul>
<p><code>-M isaac-t-petersen@uiowa.edu</code>: Set the email address to receive email about jobs. This must be your University of Iowa email address.</p>
<p><code>-m eas</code>: Specify when to send an email message (; ; ; ; )</p>
<ul>
<li>
<code>b</code> = beginning of job</li>
<li>
<code>e</code> = end of job</li>
<li>
<code>a</code> = when job is aborted</li>
<li>
<code>s</code> = when job is suspended</li>
<li>
<code>n</code> = no mail is sent</li>
</ul>
<p><code>-l mf=512G</code>: request a particular quantity of memory you expect to use (to be available for your computation to start; the request is only applicable at scheduling time. It is not a limit.)</p>
<p><code>-l h_vmem=512G</code>: request a particular quantity of virtual memory you expect to use (to be available for your computation to start; the request is only applicable at scheduling time. It is not a limit.)</p>
<p><code>-cwd</code>: Determines whether the job will be executed from the current working directory. If not specified, the job will be run from your home directory.</p>
<p><code>-q UI-HM</code>: specify queue</p>
<p><code>-e /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</code>: Name of a file or directory for standard error.</p>
<p><code>-o /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</code>: Name of a file or directory for standard output.</p>
</section></section><section id="submit-job" class="level2" data-number="8.4"><h2 data-number="8.4" class="anchored" data-anchor-id="submit-job">
<span class="header-section-number">8.4</span> Submit Job</h2>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513450/Basic+Job+Submission" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513450/Basic+Job+Submission</a> (archived at <a href="https://perma.cc/2SS2-LEJR" class="uri">https://perma.cc/2SS2-LEJR</a>)</p>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513452/Advanced+Job+Submission" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513452/Advanced+Job+Submission</a> (archived at <a href="https://perma.cc/8H6G-2M2F" class="uri">https://perma.cc/8H6G-2M2F</a>)</p>
<p><code>cd path/to/dataSet123</code></p>
<p>[cd /Users/itpetersen/Documents/Projects/Test/Jobs]</p>
<p><code>qsub myscript.job</code></p>
<p>Job dependency (run <code>Job B</code> when <code>Job A</code> is finished):</p>
<p><code>qsub -hold_jid JOB_ID test_B.job</code></p>
<section id="bayesian-irt" class="level3" data-number="8.4.1"><h3 data-number="8.4.1" class="anchored" data-anchor-id="bayesian-irt">
<span class="header-section-number">8.4.1</span> Bayesian IRT</h3>
<p><code>cd /Users/itpetersen/Documents/Projects/Bayesian_IRT/Jobs</code></p>
<p><code>qsub bayesianIRT.job</code></p>
<p><code>qsub -hold_jid JOB_ID factorScores.job</code></p>
</section><section id="multiple-imputation" class="level3" data-number="8.4.2"><h3 data-number="8.4.2" class="anchored" data-anchor-id="multiple-imputation">
<span class="header-section-number">8.4.2</span> Multiple Imputation</h3>
<p><code>cd /Users/itpetersen/Documents/Projects/Multiple_Imputation/Jobs</code></p>
<p><code>qsub srs_selfRegulation.R</code></p>
</section></section><section id="queues" class="level2" data-number="8.5"><h2 data-number="8.5" class="anchored" data-anchor-id="queues">
<span class="header-section-number">8.5</span> Queues</h2>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513468/Queues+and+Policies" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513468/Queues+and+Policies</a> (archived at <a href="https://perma.cc/UUR7-XLBZ" class="uri">https://perma.cc/UUR7-XLBZ</a>)</p>
<p><code>UI</code></p>
<p><code>UI-HM</code></p>
<p><code>UI-GPU-HM</code></p>
<p><code>UI-DEVELOP</code></p>
<p><code>all.q</code></p>
</section><section id="queue-status" class="level2" data-number="8.6"><h2 data-number="8.6" class="anchored" data-anchor-id="queue-status">
<span class="header-section-number">8.6</span> Queue Status</h2>
<p><code>qstat -g c -q QUEUE_NAME</code></p>
<p><code>qstat -g c -q UI</code></p>
</section><section id="job-status" class="level2" data-number="8.7"><h2 data-number="8.7" class="anchored" data-anchor-id="job-status">
<span class="header-section-number">8.7</span> Job Status</h2>
<p><code>qstat -u itpetersen</code></p>
<p><code>qstat -j JOB_ID</code></p>
</section><section id="job-time-and-memory" class="level2" data-number="8.8"><h2 data-number="8.8" class="anchored" data-anchor-id="job-time-and-memory">
<span class="header-section-number">8.8</span> Job Time and Memory</h2>
<ul>
<li>Terminated jobs: <code>qacct -j JOB_ID</code>
</li>
<li>Jobs in progress: <code>qstat -j JOB_ID | grep usage</code>
</li>
</ul></section><section id="cancel-job" class="level2" data-number="8.9"><h2 data-number="8.9" class="anchored" data-anchor-id="cancel-job">
<span class="header-section-number">8.9</span> Cancel Job</h2>
<p><code>qdel JOB_ID</code></p>
</section><section id="run-r-script" class="level2" data-number="8.10"><h2 data-number="8.10" class="anchored" data-anchor-id="run-r-script">
<span class="header-section-number">8.10</span> Run <code>R</code> Script</h2>
<p>See <a href="#sec-runRscript">here</a></p>
</section></section><section id="r" class="level1" data-number="9"><h1 data-number="9">
<span class="header-section-number">9</span> R</h1>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514707/R+Programs+in+Batch+mode+for+HPC" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514707/R+Programs+in+Batch+mode+for+HPC</a> (archived at <a href="https://perma.cc/99JQ-43ZG" class="uri">https://perma.cc/99JQ-43ZG</a>)</p>
<section id="find-which-versions-of-r-are-installed" class="level2" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="find-which-versions-of-r-are-installed">
<span class="header-section-number">9.1</span> Find which versions of <code>R</code> are installed</h2>
<p><code>module spider R</code></p>
<p>But, there may be more recent version of <code>R</code> installed in the “Additional Software Stacks” (<a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513440/Argon+Software+List" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513440/Argon+Software+List</a>; archived at <a href="https://perma.cc/WJ4Q-GDUS" class="uri">https://perma.cc/WJ4Q-GDUS</a>)</p>
</section><section id="compile-r" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="compile-r">
<span class="header-section-number">9.2</span> Compile <code>R</code>
</h2>
<p>If you want to compile a more recent version of <code>R</code> than is available in the software stacks, see <a href="https://brandonlebeau.org/2022/06/02/compile-hpc-iowa/">here</a> (archived at <a href="https://perma.cc/C6EX-EZL4" class="uri">https://perma.cc/C6EX-EZL4</a>).</p>
</section><section id="install-r-packages" class="level2" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="install-r-packages">
<span class="header-section-number">9.3</span> Install <code>R</code> packages</h2>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514803/Adding+R+programs+to+a+personal+library" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514803/Adding+R+programs+to+a+personal+library</a> (archived at <a href="https://perma.cc/3SRR-2JE7" class="uri">https://perma.cc/3SRR-2JE7</a>)</p>
<ol type="1">
<li>first load the <code>R</code> environment module
<ul>
<li><code>module load r/4.2.2_gcc-9.5.0</code></li>
</ul>
</li>
<li>launch R
<ul>
<li><code>R</code></li>
</ul>
</li>
<li>then install the package, (the code below uses a generic <code>package_name</code>):
<ul>
<li><code>install.packages("package_name", repos = "http://cran.r-project.org", dependencies = TRUE, type = "source", Ncpus = 40)</code></li>
<li>If using <code>packrat</code>, it is preferable to install packages by source, if possible, but you can remove <code>type = source</code> if you want to install binaries</li>
<li>Assuming that you do not have a personal library directory you will see</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>Warning <span class="cf">in</span> <span class="fu">install.packages</span>(<span class="st">"package_name"</span>, <span class="at">repos =</span> <span class="st">"http://cran.r-project.org"</span>) <span class="sc">:</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>lib <span class="ot">=</span> <span class="st">"/opt/R/3.0.2/lib64/R/library"' is not writable</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="st">Would you like to use a personal library instead?  (y/n)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>Select <code>y</code>
</li>
<li>Select <code>y</code> again when prompted to create the directory; your package should download and install into your personal library directory</li>
</ol>
<p>Example:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"renv"</span>,<span class="st">"psych"</span>,<span class="st">"tidyverse"</span>,<span class="st">"data.table"</span>,<span class="st">"nlme"</span>,<span class="st">"lme4"</span>,<span class="st">"mirt"</span>,<span class="st">"TeachingDemos"</span>,<span class="st">"Amelia"</span>,<span class="st">"mice"</span>,<span class="st">"miceadds"</span>,<span class="st">"abind"</span>,<span class="st">"future"</span>,<span class="st">"lavaan"</span>,<span class="st">"blavaan"</span>,<span class="st">"Rcpp"</span>,<span class="st">"igraph"</span>,<span class="st">"shinystan"</span>,<span class="st">"StanHeaders"</span>,<span class="st">"brms"</span>,<span class="st">"rstan"</span>,<span class="st">"rjags"</span><span class="op">)</span>,</span>
<span>    repos <span class="op">=</span> <span class="st">"http://cran.r-project.org"</span>,</span>
<span>    dependencies <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    Ncpus <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="install-r-package-locally-from-source" class="level3" data-number="9.3.1"><h3 data-number="9.3.1" class="anchored" data-anchor-id="install-r-package-locally-from-source">
<span class="header-section-number">9.3.1</span> Install <code>R</code> package locally from source</h3>
<p><code>install.packages(path_to_file, repos = NULL, type = "source", Ncpus = 40)</code></p>
<p>Example:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"renv"</span>,<span class="st">"psych"</span>,<span class="st">"tidyverse"</span>,<span class="st">"data.table"</span>,<span class="st">"nlme"</span>,<span class="st">"lme4"</span>,<span class="st">"mirt"</span>,<span class="st">"TeachingDemos"</span>,<span class="st">"Amelia"</span>,<span class="st">"mice"</span>,<span class="st">"miceadds"</span>,<span class="st">"abind"</span>,<span class="st">"future"</span>,<span class="st">"lavaan"</span>,<span class="st">"blavaan"</span>,<span class="st">"Rcpp"</span>,<span class="st">"igraph"</span>,<span class="st">"shinystan"</span>,<span class="st">"StanHeaders"</span>,<span class="st">"brms"</span>,<span class="st">"rstan"</span>,<span class="st">"rjags"</span><span class="op">)</span>,</span>
<span>    repos <span class="op">=</span> <span class="st">"http://cran.r-project.org"</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"source"</span>,</span>
<span>    dependencies <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    Ncpus <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section><section id="sec-renv" class="level3" data-number="9.3.2"><h3 data-number="9.3.2" class="anchored" data-anchor-id="sec-renv">
<span class="header-section-number">9.3.2</span> Managing packages for a project using <code>renv</code>
</h3>
<ol type="1">
<li>Create a directory where you want you want to store the project.</li>
<li>
<code>cd</code> to the above directory</li>
<li>Start R</li>
<li>Load the <code>renv</code> package: <code><a href="https://rstudio.github.io/renv/">library("renv")</a></code>
</li>
<li>At the <code>R</code> prompt, initialize the <code>renv</code> project on the local repository of <code>R</code> packages with:
<ul>
<li><code>renv::init(project = "/Users/itpetersen/Documents/Projects/SelfRegulation_IRT/")</code></li>
<li>or <code>renv::init()</code> if you are in the intended working directory</li>
</ul>
</li>
<li>You must restart your <code>R</code> session in the given project directory after running init in order for the changes to take effect!</li>
<li>From this point on you are working in a <code>renv</code> project. Installed packages will go into a library within this project. After initializing the <code>renv</code> project on the local repository of <code>R</code> packages, packages from the local repository can be installed with <code>renv::install()</code>:
<ul>
<li><code>renv::install("package_name")</code></li>
</ul>
</li>
<li>To restart a <code>renv</code> project, simply start <code>R</code> from the directory created in step (1). The project will initialize automatically.</li>
</ol>
<p>To update version of <code>renv</code>: <code>renv::upgrade()</code></p>
<p>To install packages: <code>renv::install("package_name")</code></p>
<p>To update packages: <code>renv::update()</code></p>
<p>To save the current state of your library: <code>renv::snapshot()</code></p>
<p>To restore the state of your library from the lock file: <code>renv::restore()</code></p>
<p>To disable <code>renv</code> on a project: <code>renv::deactivate()</code></p>
<section id="to-control-which-packages-to-install-with-renv-using-a-description-file" class="level4" data-number="9.3.2.1"><h4 data-number="9.3.2.1" class="anchored" data-anchor-id="to-control-which-packages-to-install-with-renv-using-a-description-file">
<span class="header-section-number">9.3.2.1</span> To control which packages to install with <code>renv</code> using a <code>DESCRIPTION</code> file</h4>
<p>If you want to control which packages are installed in a <code>renv</code> project, you can use a <code>DESCRIPTION</code> file to specify the packages that should be installed:</p>
<ol type="1">
<li>
<p>Create a <code>DESCRIPTION</code> file in the project directory with the following format:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Type</span><span class="kw">:</span><span class="at"> project</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> My project.</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Depends</span><span class="kw">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">    packageName1,</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="at">    packageName2,</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">    packageName3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li><p>Run <code>renv::settings$snapshot.type("explicit")</code> to suppress dependency discover and to enable “explicit” mode: <a href="https://rstudio.github.io/renv/reference/dependencies.html#explicit-dependencies" class="uri">https://rstudio.github.io/renv/reference/dependencies.html#explicit-dependencies</a></p></li>
<li><p>Run <code>renv::init(bare=TRUE)</code> to initialize the project without attempting to discover and install <code>R</code> package dependencies</p></li>
</ol></section></section><section id="to-install-a-new-package-for-a-project-after-renv-has-been-initialized" class="level3" data-number="9.3.3"><h3 data-number="9.3.3" class="anchored" data-anchor-id="to-install-a-new-package-for-a-project-after-renv-has-been-initialized">
<span class="header-section-number">9.3.3</span> To install a new package for a project after <code>renv</code> has been initialized</h3>
<ol type="1">
<li>First, load the <code>R</code> environment module (see <code>Install R packages</code> section above)</li>
<li>cd to the directory of the <code>R</code> project</li>
<li>launch R
<ul>
<li><code>R</code></li>
</ul>
</li>
<li>then install the package, (the code below uses a generic <code>package_name</code>):
<ul>
<li><code>install.packages("package_name", repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)</code></li>
<li><code>install.packages(c("renv","psych","tidyverse","data.table","nlme","lme4","mirt","TeachingDemos","Amelia","mice","miceadds","abind","future","lavaan","blavaan","Rcpp","igraph","shinystan","StanHeaders","brms","rstan","rjags","renv"), repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)</code></li>
</ul>
</li>
<li><code>renv::snapshot()</code></li>
</ol></section></section><section id="update-packages" class="level2" data-number="9.4"><h2 data-number="9.4" class="anchored" data-anchor-id="update-packages">
<span class="header-section-number">9.4</span> Update Packages</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html">update.packages</a></span><span class="op">(</span>ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section><section id="sec-runRscript" class="level2" data-number="9.5"><h2 data-number="9.5" class="anchored" data-anchor-id="sec-runRscript">
<span class="header-section-number">9.5</span> Run <code>R</code> Script</h2>
<p><code>module load r/4.0.5_gcc-9.3.0</code></p>
<p><code>cd path/to/dataSet123</code></p>
<p>[cd /Users/itpetersen/Documents/Projects/Test/Analyses]</p>
<p><code>Rscript path/to/program.R</code></p>
<p>[Rscript test.R]</p>
</section><section id="quit-r" class="level2" data-number="9.6"><h2 data-number="9.6" class="anchored" data-anchor-id="quit-r">
<span class="header-section-number">9.6</span> Quit R</h2>
<p><code><a href="https://rdrr.io/r/base/quit.html">q()</a></code></p>
</section></section><section id="stan" class="level1" data-number="10"><h1 data-number="10">
<span class="header-section-number">10</span> Stan</h1>
<p><a href="https://github.com/stan-dev/rstan/wiki/Installing-RStan-on-Linux" class="uri">https://github.com/stan-dev/rstan/wiki/Installing-RStan-on-Linux</a> (archived at <a href="https://perma.cc/89H9-L8S6" class="uri">https://perma.cc/89H9-L8S6</a>)</p>
<p>Makevars:</p>
<p><code>\\data.hpc.uiowa.edu\argon_home\.R\Makevars</code></p>
</section><section id="troubleshooting" class="level1" data-number="11"><h1 data-number="11">
<span class="header-section-number">11</span> Troubleshooting</h1>
<section id="having-trouble-installing-packages" class="level2" data-number="11.1"><h2 data-number="11.1" class="anchored" data-anchor-id="having-trouble-installing-packages">
<span class="header-section-number">11.1</span> Having trouble installing packages?</h2>
<p>Sometimes Argon will fail to install packages in an R workspace. We advise the following steps:</p>
<ol type="1">
<li><p>Sometimes R provides an error stating something like “fatal error: modulename: No such file or directory”. In this instance, you may wish to exist R with q() and load all the modules that begin with the listed module name, as listed above in “Installing Linux Packages to Install R Packages”. Then reopen R and try to install the package again.</p></li>
<li>
<p>You can also try installing the package from binary using the RStudio Package Manager (RSPM):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"cran4linux/rspm"</span><span class="op">)</span></span>
<span><span class="fu">rspm</span><span class="fu">::</span><span class="fu">enable</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"PACKAGE_NAME"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>
<p>If that does not work, you can try downloading the .tar file directly from the CRAN repository. Then copy the file into your Argon folder and type ‘install.packages(“/Users/path/to/directory/package_name”, repos = NULL, type = “source”)’. Note that you may need to download an older version of the package (e.g., from the <a href="https://cran.r-project.org/src/contrib/Archive/">CRAN Archive</a>), such that it is compatible with the version of R you are running on Argon (which it typically not the most recent R version):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"http://cran.r-project.org/src/contrib/Archive/MASS/MASS_7.3-60.0.1.tar.gz"</span>, repos <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>
<p>Check if you are installing the necessary modules within your job script:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>module load stack<span class="sc">/</span><span class="fl">2022.2</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>module load r<span class="sc">/</span><span class="dv">4</span>.<span class="fl">2.2</span>_gcc<span class="dv">-9</span>.<span class="fl">5.0</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li>
<p>Add a line to your R script to make sure it is accessing the same repository where you installed the packages manually:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html">.libPaths</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"/old_Users/HAWKID/Rlibs"</span>, </span>
<span>        <span class="st">"/cvmfs/argon.hpc.uiowa.edu/2022.2/apps/linux-centos7-broadwell/gcc-9.5.0/r-4.2.2-lv7yirk/rlib/R/library"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</li>
<li><p>If the prior steps fail, email research-computing@uiowa.edu with the error, asking for help to figure out how to install the packages.</p></li>
</ol></section><section id="error-when-installing-packages-from-source" class="level2" data-number="11.2"><h2 data-number="11.2" class="anchored" data-anchor-id="error-when-installing-packages-from-source">
<span class="header-section-number">11.2</span> Error When Installing Packages from Source</h2>
<p>You may have to set environment variables in each module file to help the compiler find headers and libraries. Note that if you run into any C++ code, you will need to set the <code>CPLUS_INCLUDE_PATH</code> variable.</p>
<section id="nloptr" class="level3" data-number="11.2.1"><h3 data-number="11.2.1" class="anchored" data-anchor-id="nloptr">
<span class="header-section-number">11.2.1</span> <code>nloptr</code>
</h3>
<ol type="1">
<li>Run the following commands</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.1</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.1.3_gcc-9.4.0</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load nlopt</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ol start="2" type="1">
<li>Set <code>LIBRARY_PATH</code> so linker can find library while launching <code>R</code> session (single line below):</li>
</ol>
<pre><code>LIBRARY_PATH=$ROOT_NLOPT/lib64:$LIBRARY_PATH R</code></pre>
<ol start="3" type="1">
<li>In <code>R</code> console, install <code>nloptr</code> (two lines below)</li>
</ol>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="fl">1</span>, <span class="st">"nloptr"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section><section id="tkrplot" class="level3" data-number="11.2.2"><h3 data-number="11.2.2" class="anchored" data-anchor-id="tkrplot">
<span class="header-section-number">11.2.2</span> <code>tkrplot</code>
</h3>
<ol type="1">
<li>Run the following commands</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.1</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.1.3_gcc-9.4.0</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ol start="2" type="1">
<li>Set LIBRARY_PATH so linker can find library while launching <code>R</code> session (single line below):</li>
</ol>
<pre><code>C_INCLUDE_PATH=$ROOT_XPROTO/include LIBRARY_PATH=$ROOT_LIBXEXT/lib:$ROOT_LIBXSCRNSAVER/lib R</code></pre>
<ol start="3" type="1">
<li>In <code>R</code> console, install <code>tkrplot</code> (two lines below)</li>
</ol>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="fl">1</span>, <span class="st">"tkrplot"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section></section><section id="error-reading-from-connection" class="level2" data-number="11.3"><h2 data-number="11.3" class="anchored" data-anchor-id="error-reading-from-connection">
<span class="header-section-number">11.3</span> Error Reading from Connection</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">unserialize</span>(node<span class="sc">$</span>con) <span class="sc">:</span> error reading from connection</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>Calls<span class="sc">:</span> parlmice ... FUN <span class="ot">-&gt;</span> recvData <span class="ot">-&gt;</span> recvData.SOCK0node <span class="ot">-&gt;</span> unserialize</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>There likely wasn’t sufficient memory for a given core. Try increasing the max memory available and decreasing the number of cores and/or slots, so there is more memory available per core:</p>
<p><a href="https://stackoverflow.com/questions/46186375/r-parallel-error-in-unserializenodecon-in-hpc" class="uri">https://stackoverflow.com/questions/46186375/r-parallel-error-in-unserializenodecon-in-hpc</a> (archived at <a href="https://perma.cc/MF6V-NAVS" class="uri">https://perma.cc/MF6V-NAVS</a>)</p>
<p><a href="https://stackoverflow.com/questions/17015598/error-calling-serialize-r-function" class="uri">https://stackoverflow.com/questions/17015598/error-calling-serialize-r-function</a> (archived at <a href="https://perma.cc/3Q75-DA2D" class="uri">https://perma.cc/3Q75-DA2D</a>)</p>
<p><a href="https://gforge.se/2015/02/how-to-go-parallel-in-r-basics-tips/#Memory_load" class="uri">https://gforge.se/2015/02/how-to-go-parallel-in-r-basics-tips/#Memory_load</a> (archived at <a href="https://perma.cc/2JRF-8Y5F" class="uri">https://perma.cc/2JRF-8Y5F</a>)</p>
</section></section><section id="sec-appendix" class="level1" data-number="12"><h1 data-number="12">
<span class="header-section-number">12</span> Appendix</h1>
<section id="old-stacks" class="level2" data-number="12.1"><h2 data-number="12.1" class="anchored" data-anchor-id="old-stacks">
<span class="header-section-number">12.1</span> Old Stacks</h2>
<section id="stack-2022.1" class="level3" data-number="12.1.1"><h3 data-number="12.1.1" class="anchored" data-anchor-id="stack-2022.1">
<span class="header-section-number">12.1.1</span> Stack 2022.1</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.1</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.1.3_gcc-9.4.0</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section><section id="stack-2021.1" class="level3" data-number="12.1.2"><h3 data-number="12.1.2" class="anchored" data-anchor-id="stack-2021.1">
<span class="header-section-number">12.1.2</span> Stack 2021.1</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2021.1</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.0.5_gcc-9.3.0</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section><section id="stack-2020.2" class="level3" data-number="12.1.3"><h3 data-number="12.1.3" class="anchored" data-anchor-id="stack-2020.2">
<span class="header-section-number">12.1.3</span> Stack 2020.2</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2020.2</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.0.2_gcc-8.4.0</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section><section id="stack-2020.1" class="level3" data-number="12.1.4"><h3 data-number="12.1.4" class="anchored" data-anchor-id="stack-2020.1">
<span class="header-section-number">12.1.4</span> Stack 2020.1</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2020.1</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/3.6.2_gcc-9.2.0</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section><section id="managing-packages-for-a-project-using-packrat" class="level2" data-number="12.2"><h2 data-number="12.2" class="anchored" data-anchor-id="managing-packages-for-a-project-using-packrat">
<span class="header-section-number">12.2</span> Managing packages for a project using <code>packrat</code>
</h2>
<p>Please note: we now use <a href="#sec-renv"><code>renv</code></a> rather than <code>packrat</code> for package management</p>
<p><a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514803/Adding+R+programs+to+a+personal+library" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514803/Adding+R+programs+to+a+personal+library</a> (archived at <a href="https://perma.cc/3SRR-2JE7" class="uri">https://perma.cc/3SRR-2JE7</a>)</p>
<ol type="1">
<li>Create a directory where you want you want to store the project.</li>
<li>
<code>cd</code> to the above directory</li>
<li>Start R</li>
<li>Load the <code>packrat</code> package: <code><a href="https://github.com/rstudio/packrat">library("packrat")</a></code>
</li>
<li>At the <code>R</code> prompt, initialize the <code>packrat</code> project on the local repository of <code>R</code> packages with: <code>packrat::init(project = "/Users/itpetersen/Documents/Projects/INSERT_PROJECT_NAME/", options = list(local.repos = "/Users/itpetersen/R/x86_64-pc-linux-gnu-library/4.0"))</code>
</li>
<li>You must restart your <code>R</code> session in the given project directory after running init in order for the changes to take effect!</li>
<li>From this point on you are working in a <code>packrat</code> project. Installed packages will go into a library within this project. After initializing the <code>packrat</code> project on the local repository of <code>R</code> packages, packages from the local repository can be installed with <code>packrat::install_local()</code>:
<ul>
<li><code>packrat::install_local("package_name")</code></li>
</ul>
</li>
<li>To restart a packrat project simply start <code>R</code> from the directory created in step (1). The project will initialize automatically.</li>
</ol>
<p>To save the current state of your library: <code>packrat::snapshot()</code>; if that command fails due to an error when fetching sources, try <code>packrat::snapshot(snapshot.sources = FALSE)</code></p>
<p>To disable <code>packrat</code> on a project: <code>disable(restart = FALSE)</code></p>
<section id="to-install-a-new-package-for-a-project-after-packrat-has-been-initialized" class="level3" data-number="12.2.1"><h3 data-number="12.2.1" class="anchored" data-anchor-id="to-install-a-new-package-for-a-project-after-packrat-has-been-initialized">
<span class="header-section-number">12.2.1</span> To install a new package for a project after <code>packrat</code> has been initialized</h3>
<ol type="1">
<li>First, load the <code>R</code> environment module (see <code>Install R packages</code> section above)</li>
<li>cd to the directory of the <code>R</code> project</li>
<li>launch R
<ul>
<li><code>R</code></li>
</ul>
</li>
<li>then install the package, (the code below uses a generic <code>package_name</code>):
<ul>
<li><code>install.packages("package_name", repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)</code></li>
<li><code>install.packages(c("packrat","psych","tidyverse","data.table","nlme","lme4","mirt","TeachingDemos","Amelia","mice","miceadds","abind","future","lavaan","blavaan","Rcpp","igraph","shinystan","StanHeaders","brms","rstan","rjags","renv"), repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)</code></li>
</ul>
</li>
<li>
<code>packrat::snapshot()</code>; if that command fails due to an error when fetching sources, try <code>packrat::snapshot(snapshot.sources = FALSE)</code>
</li>
</ol></section><section id="build-packrat-environment-on-a-compute-node-only-if-necessary-if-package-load-fails-due-to-issues-building-packages" class="level3" data-number="12.2.2"><h3 data-number="12.2.2" class="anchored" data-anchor-id="build-packrat-environment-on-a-compute-node-only-if-necessary-if-package-load-fails-due-to-issues-building-packages">
<span class="header-section-number">12.2.2</span> Build <code>packrat</code> environment on a compute node (only if necessary if package load fails due to issues building packages)</h3>
<ol type="1">
<li>
<code>qlogin</code> – for more info, see here: <a href="https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513454/Qlogin+for+Interactive+Sessions" class="uri">https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513454/Qlogin+for+Interactive+Sessions</a> (archived at <a href="https://perma.cc/Y3A9-WQ3W" class="uri">https://perma.cc/Y3A9-WQ3W</a>)</li>
<li>
<code>module load stack/2020.2-base_arch</code> – this will ensure that the modules point to the lowest common multiarchitecture on Argon and will run on all nodes</li>
<li><code>module load r</code></li>
<li>cd to the directory of the <code>R</code> project</li>
<li><code>R</code></li>
<li>Create <code>packrat</code> project (see above)</li>
<li>Install packages</li>
<li>Take a package snapshot using <code>packrat</code>
</li>
<li>
<code>exit</code> – to exit the qlogin session</li>
</ol>
<p>Note: Your <code>packrat</code> environment will then be linked to the proper <code>glpk</code> library and will run on any Argon node. You do not need to use the <code>2020.2-base_arch</code> module at run time, only build time.</p>


<!-- -->

</section></section></section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div></main><!-- /main --><!-- Add lab logo --><p style="text-align: center;">
    <a href="https://developmental-psychopathology.lab.uiowa.edu" target="_blank">
        <img alt="Developmental Psychopathology Lab" src="images/formalLogo.png" width="60%"></a>
</p>

<br><hr>
<br><!-- Add icon library --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Add font awesome icons --><p style="text-align: center;">
    <a href="https://github.com/DevPsyLab" target="_blank" class="fa fa-github fa-fw fa-3x"></a>
    <a href="https://twitter.com/devpsylab" target="_blank" class="fa fa-twitter fa-fw fa-3x"></a>
    <a href="https://www.facebook.com/DevPsyLab" target="_blank" class="fa fa-facebook fa-fw fa-3x"></a>
	<a href="https://www.instagram.com/devpsylab" target="_blank" class="fa fa-instagram fa-fw fa-3x"></a>
</p>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/DevPsyLab\.github\.io\/DataAnalysis\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "High-Performance Computing (Argon Supercomputer)"</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># Overview</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>Analysis scripts for High Performance Computing (HPC) at the University of Iowa.</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>Currently uses Argon.</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">## Links to Documentation</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>Workflow: <span class="ot">&lt;https://workflow.uiowa.edu/entry/new/3282/11927336&gt;</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>Cluster Systems Documentation:</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513411/Cluster+Systems+Documentation&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/EKB8-ZKR7&gt;</span>)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>Argon Cluster Documentation:</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513466/Argon+Cluster&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/6HST-VV6Y&gt;</span>)</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Storage</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>Significant amounts of data storage are provided on Argon, but data are not backed up in any way unless special arrangements are made.</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>It is the responsibility of the user to back up important information.</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sensitive Data</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>User agrees to refrain from storing Restricted data on HPC resources.</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>Data is classified as Restricted when the unauthorized disclosure, alteration or destruction of that data could cause a significant level of risk to the University or its affiliates.</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>Examples of Restricted data include data protected by state or federal privacy regulations and data pertaining to identified human subjects that has not been deidentified.</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fees</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>At present there are no fees for the use of the Argon cluster for low-priority usage.</span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>For large users, or those who want access to dedicated resources, the option of purchasing or renting supplemental system hardware may be available.</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>If you are interested in dedicated hardware, contact <span class="co">[</span><span class="ot">research-computing@uiowa.edu</span><span class="co">](mailto:research-computing@uiowa.edu)</span>.</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a><span class="fu"># Accessing Lab Drive</span></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a><span class="in">`/Shared/lss_itpetersen`</span></span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a><span class="fu"># Map Argon Drive to Local Computer</span></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a><span class="fu">## Windows</span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Right click on <span class="in">`This PC`</span> and select <span class="in">`Map Network Drive`</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Select <span class="in">`Y`</span> and type <span class="in">`\\data.hpc.uiowa.edu\argon_home\Documents`</span></span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a><span class="fu"># Accessing Argon</span></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## SSH</span></span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a><span class="in">`argon.hpc.uiowa.edu`</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a><span class="fu">## Windows</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>Windows Explorer:</span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a><span class="in">`\\data.hpc.uiowa.edu\argon_home`</span> (username: itpetersen@uiowa.edu or hawkid@uiowa.edu)</span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>Using SecureCRT for an SSH connection:</span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Download SecureCRT from UIowa Informational Technology Services: <span class="ot">&lt;https://its.uiowa.edu/securecrt&gt;</span></span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>In Hostname type <span class="in">`argon.hpc.uiowa.edu`</span> and in username type HawkID</span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Click connect</span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a><span class="fu">## Mac</span></span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a>Mac OS Terminal:</span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a><span class="in">`ssh itpetersen@argon.hpc.uiowa.edu`</span> (on campus)</span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a><span class="in">`ssh -p 40 itpetersen@argon.hpc.uiowa.edu`</span> (off campus without VPN)</span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a><span class="fu"># General Commands</span></span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`pwd`</span> print current working directory</span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`cd path/to/directory`</span> sets working directory</span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`ls`</span> print files in directory</span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`module load moduleName`</span> loads modules required for analyses; necessary to complete prior to submitting jobs involving R</span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`module list`</span> lists downloaded modules</span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`qsub`</span> submit a job script to Argon processing</span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`R CMD BATCH`</span> submit a single R script to Argon processing</span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a>Argon requires Linux-compatible file endings, which is problematic for files created outside Argon (using DOS or CRLF file endings). Use the following commands to check if your files are Argon compatible (i.e., Unix LF) and resolve incompatible file endings:</span>
<span id="cb45-83"><a href="#cb45-83" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`file myfile.job | grep CRLF`</span> checks if a file ending uses the incompatible CRLF format. Remember to check the ending of your file; this script assumes it is .job</span>
<span id="cb45-84"><a href="#cb45-84" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`dos2unix myfile.job`</span> converts CRLF file endings to Argon-compatible LF endings</span>
<span id="cb45-85"><a href="#cb45-85" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`find ~/DirectoryName -name '*job' -exec dos2unix "{}" \;`</span> converts all files in a directory that end with .job to LF format; change '*job' to change other file types</span>
<span id="cb45-86"><a href="#cb45-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-87"><a href="#cb45-87" aria-hidden="true" tabindex="-1"></a><span class="fu"># Access Project Directories</span></span>
<span id="cb45-88"><a href="#cb45-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-89"><a href="#cb45-89" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb45-90"><a href="#cb45-90" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Bayesian_IRT/</span>
<span id="cb45-91"><a href="#cb45-91" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/EXT_pilot/</span>
<span id="cb45-92"><a href="#cb45-92" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Multiple_Imputation/</span>
<span id="cb45-93"><a href="#cb45-93" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/SelfRegulation_IRT/</span>
<span id="cb45-94"><a href="#cb45-94" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Test/</span>
<span id="cb45-95"><a href="#cb45-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-96"><a href="#cb45-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-97"><a href="#cb45-97" aria-hidden="true" tabindex="-1"></a><span class="fu"># Using a Container {#sec-container}</span></span>
<span id="cb45-98"><a href="#cb45-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-99"><a href="#cb45-99" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513442/Singularity+Containers&gt;</span></span>
<span id="cb45-100"><a href="#cb45-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-101"><a href="#cb45-101" aria-hidden="true" tabindex="-1"></a>Steps:</span>
<span id="cb45-102"><a href="#cb45-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-103"><a href="#cb45-103" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>If you are Windows, install Windows Subsystem for Linux (WSL)</span>
<span id="cb45-104"><a href="#cb45-104" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>In PowerShell (Admin):</span>
<span id="cb45-105"><a href="#cb45-105" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-106"><a href="#cb45-106" aria-hidden="true" tabindex="-1"></a>    <span class="ex">wsl</span> <span class="at">--install</span></span>
<span id="cb45-107"><a href="#cb45-107" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-108"><a href="#cb45-108" aria-hidden="true" tabindex="-1"></a>    Restart the computer.</span>
<span id="cb45-109"><a href="#cb45-109" aria-hidden="true" tabindex="-1"></a>    It will install Ubuntu by default.</span>
<span id="cb45-110"><a href="#cb45-110" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Update Ubuntu</span>
<span id="cb45-111"><a href="#cb45-111" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Open Ubuntu</span>
<span id="cb45-112"><a href="#cb45-112" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, run:</span>
<span id="cb45-113"><a href="#cb45-113" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-114"><a href="#cb45-114" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> apt update</span>
<span id="cb45-115"><a href="#cb45-115" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> apt upgrade <span class="at">-y</span></span>
<span id="cb45-116"><a href="#cb45-116" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-117"><a href="#cb45-117" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Install Apptainer inside WSL</span>
<span id="cb45-118"><a href="#cb45-118" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, first install dependencies:</span>
<span id="cb45-119"><a href="#cb45-119" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-120"><a href="#cb45-120" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> apt update</span>
<span id="cb45-121"><a href="#cb45-121" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> apt install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb45-122"><a href="#cb45-122" aria-hidden="true" tabindex="-1"></a>    build-essential <span class="dt">\</span></span>
<span id="cb45-123"><a href="#cb45-123" aria-hidden="true" tabindex="-1"></a>    libseccomp-dev <span class="dt">\</span></span>
<span id="cb45-124"><a href="#cb45-124" aria-hidden="true" tabindex="-1"></a>    pkg-config <span class="dt">\</span></span>
<span id="cb45-125"><a href="#cb45-125" aria-hidden="true" tabindex="-1"></a>    squashfs-tools <span class="dt">\</span></span>
<span id="cb45-126"><a href="#cb45-126" aria-hidden="true" tabindex="-1"></a>    cryptsetup <span class="dt">\</span></span>
<span id="cb45-127"><a href="#cb45-127" aria-hidden="true" tabindex="-1"></a>    curl <span class="dt">\</span></span>
<span id="cb45-128"><a href="#cb45-128" aria-hidden="true" tabindex="-1"></a>    wget <span class="dt">\</span></span>
<span id="cb45-129"><a href="#cb45-129" aria-hidden="true" tabindex="-1"></a>    git <span class="dt">\</span></span>
<span id="cb45-130"><a href="#cb45-130" aria-hidden="true" tabindex="-1"></a>    uidmap <span class="dt">\</span></span>
<span id="cb45-131"><a href="#cb45-131" aria-hidden="true" tabindex="-1"></a>    golang-go</span>
<span id="cb45-132"><a href="#cb45-132" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-133"><a href="#cb45-133" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Now, install Apptainer:</span>
<span id="cb45-134"><a href="#cb45-134" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-135"><a href="#cb45-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> apt install <span class="at">-y</span> apptainer</span>
<span id="cb45-136"><a href="#cb45-136" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-137"><a href="#cb45-137" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Verify installation:</span>
<span id="cb45-138"><a href="#cb45-138" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-139"><a href="#cb45-139" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apptainer</span> <span class="at">--version</span></span>
<span id="cb45-140"><a href="#cb45-140" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-141"><a href="#cb45-141" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>If not available via apt (<span class="in">`E: Unable to locate package apptainer`</span>), install from source (specify the version number for the latest release version available; see release versions <span class="co">[</span><span class="ot">here</span><span class="co">](https://github.com/apptainer/apptainer/releases)</span>):</span>
<span id="cb45-142"><a href="#cb45-142" aria-hidden="true" tabindex="-1"></a>        <span class="in">```bash</span></span>
<span id="cb45-143"><a href="#cb45-143" aria-hidden="true" tabindex="-1"></a>        <span class="bu">export</span> <span class="va">VERSION</span><span class="op">=</span>1.4.5</span>
<span id="cb45-144"><a href="#cb45-144" aria-hidden="true" tabindex="-1"></a>        <span class="fu">wget</span> https://github.com/apptainer/apptainer/releases/download/v<span class="va">${VERSION}</span>/apptainer-<span class="va">${VERSION}</span>.tar.gz</span>
<span id="cb45-145"><a href="#cb45-145" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tar</span> <span class="at">-xzf</span> apptainer-<span class="va">${VERSION}</span>.tar.gz</span>
<span id="cb45-146"><a href="#cb45-146" aria-hidden="true" tabindex="-1"></a>        <span class="bu">cd</span> apptainer-<span class="va">${VERSION}</span></span>
<span id="cb45-147"><a href="#cb45-147" aria-hidden="true" tabindex="-1"></a>        <span class="in">```</span></span>
<span id="cb45-148"><a href="#cb45-148" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>If you installed from source, build Apptainer:</span>
<span id="cb45-149"><a href="#cb45-149" aria-hidden="true" tabindex="-1"></a>        <span class="in">```bash</span></span>
<span id="cb45-150"><a href="#cb45-150" aria-hidden="true" tabindex="-1"></a>        <span class="ex">./mconfig</span></span>
<span id="cb45-151"><a href="#cb45-151" aria-hidden="true" tabindex="-1"></a>        <span class="fu">make</span> <span class="at">-C</span> builddir</span>
<span id="cb45-152"><a href="#cb45-152" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sudo</span> make <span class="at">-C</span> builddir install</span>
<span id="cb45-153"><a href="#cb45-153" aria-hidden="true" tabindex="-1"></a>        <span class="in">```</span></span>
<span id="cb45-154"><a href="#cb45-154" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Verify installation:</span>
<span id="cb45-155"><a href="#cb45-155" aria-hidden="true" tabindex="-1"></a>        <span class="in">```bash</span></span>
<span id="cb45-156"><a href="#cb45-156" aria-hidden="true" tabindex="-1"></a>        <span class="ex">apptainer</span> <span class="at">--version</span></span>
<span id="cb45-157"><a href="#cb45-157" aria-hidden="true" tabindex="-1"></a>        <span class="in">```</span></span>
<span id="cb45-158"><a href="#cb45-158" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Create your <span class="in">`R`</span> Container Definition File</span>
<span id="cb45-159"><a href="#cb45-159" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, run:</span>
<span id="cb45-160"><a href="#cb45-160" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-161"><a href="#cb45-161" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nano</span> r_argon.def</span>
<span id="cb45-162"><a href="#cb45-162" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-163"><a href="#cb45-163" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Paste this:</span>
<span id="cb45-164"><a href="#cb45-164" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-165"><a href="#cb45-165" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Bootstrap:</span> docker</span>
<span id="cb45-166"><a href="#cb45-166" aria-hidden="true" tabindex="-1"></a>    <span class="ex">From:</span> rocker/r-ver:latest</span>
<span id="cb45-167"><a href="#cb45-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-168"><a href="#cb45-168" aria-hidden="true" tabindex="-1"></a>    <span class="ex">%post</span></span>
<span id="cb45-169"><a href="#cb45-169" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Install system dependencies</span></span>
<span id="cb45-170"><a href="#cb45-170" aria-hidden="true" tabindex="-1"></a>        <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb45-171"><a href="#cb45-171" aria-hidden="true" tabindex="-1"></a>            libcurl4-openssl-dev <span class="dt">\</span></span>
<span id="cb45-172"><a href="#cb45-172" aria-hidden="true" tabindex="-1"></a>            libssl-dev <span class="dt">\</span></span>
<span id="cb45-173"><a href="#cb45-173" aria-hidden="true" tabindex="-1"></a>            libxml2-dev <span class="dt">\</span></span>
<span id="cb45-174"><a href="#cb45-174" aria-hidden="true" tabindex="-1"></a>            libgit2-dev <span class="dt">\</span></span>
<span id="cb45-175"><a href="#cb45-175" aria-hidden="true" tabindex="-1"></a>            libfontconfig1-dev <span class="dt">\</span></span>
<span id="cb45-176"><a href="#cb45-176" aria-hidden="true" tabindex="-1"></a>            libfreetype6-dev <span class="dt">\</span></span>
<span id="cb45-177"><a href="#cb45-177" aria-hidden="true" tabindex="-1"></a>            libharfbuzz-dev <span class="dt">\</span></span>
<span id="cb45-178"><a href="#cb45-178" aria-hidden="true" tabindex="-1"></a>            libfribidi-dev <span class="dt">\</span></span>
<span id="cb45-179"><a href="#cb45-179" aria-hidden="true" tabindex="-1"></a>            libpng-dev <span class="dt">\</span></span>
<span id="cb45-180"><a href="#cb45-180" aria-hidden="true" tabindex="-1"></a>            libtiff5-dev <span class="dt">\</span></span>
<span id="cb45-181"><a href="#cb45-181" aria-hidden="true" tabindex="-1"></a>            libjpeg-dev <span class="dt">\</span></span>
<span id="cb45-182"><a href="#cb45-182" aria-hidden="true" tabindex="-1"></a>            libglpk-dev <span class="dt">\</span></span>
<span id="cb45-183"><a href="#cb45-183" aria-hidden="true" tabindex="-1"></a>            libgmp3-dev <span class="dt">\</span></span>
<span id="cb45-184"><a href="#cb45-184" aria-hidden="true" tabindex="-1"></a>            libmpfr-dev <span class="dt">\</span></span>
<span id="cb45-185"><a href="#cb45-185" aria-hidden="true" tabindex="-1"></a>            make <span class="dt">\</span></span>
<span id="cb45-186"><a href="#cb45-186" aria-hidden="true" tabindex="-1"></a>            g++ <span class="dt">\</span></span>
<span id="cb45-187"><a href="#cb45-187" aria-hidden="true" tabindex="-1"></a>            cmake <span class="dt">\</span></span>
<span id="cb45-188"><a href="#cb45-188" aria-hidden="true" tabindex="-1"></a>            git <span class="dt">\</span></span>
<span id="cb45-189"><a href="#cb45-189" aria-hidden="true" tabindex="-1"></a>            sudo</span>
<span id="cb45-190"><a href="#cb45-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-191"><a href="#cb45-191" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Install core CRAN packages (specify the packages to install here)</span></span>
<span id="cb45-192"><a href="#cb45-192" aria-hidden="true" tabindex="-1"></a>        <span class="ex">R</span> <span class="at">-e</span> <span class="st">"install.packages(c(</span></span>
<span id="cb45-193"><a href="#cb45-193" aria-hidden="true" tabindex="-1"></a><span class="st">            'tidyverse',</span></span>
<span id="cb45-194"><a href="#cb45-194" aria-hidden="true" tabindex="-1"></a><span class="st">            'data.table',</span></span>
<span id="cb45-195"><a href="#cb45-195" aria-hidden="true" tabindex="-1"></a><span class="st">            'rstan',</span></span>
<span id="cb45-196"><a href="#cb45-196" aria-hidden="true" tabindex="-1"></a><span class="st">            'brms',</span></span>
<span id="cb45-197"><a href="#cb45-197" aria-hidden="true" tabindex="-1"></a><span class="st">            'mirt',</span></span>
<span id="cb45-198"><a href="#cb45-198" aria-hidden="true" tabindex="-1"></a><span class="st">            'lavaan',</span></span>
<span id="cb45-199"><a href="#cb45-199" aria-hidden="true" tabindex="-1"></a><span class="st">            'semTools',</span></span>
<span id="cb45-200"><a href="#cb45-200" aria-hidden="true" tabindex="-1"></a><span class="st">            'renv',</span></span>
<span id="cb45-201"><a href="#cb45-201" aria-hidden="true" tabindex="-1"></a><span class="st">            'remotes'</span></span>
<span id="cb45-202"><a href="#cb45-202" aria-hidden="true" tabindex="-1"></a><span class="st">        ), repos='https://cloud.r-project.org')"</span></span>
<span id="cb45-203"><a href="#cb45-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-204"><a href="#cb45-204" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Install cmdstanr</span></span>
<span id="cb45-205"><a href="#cb45-205" aria-hidden="true" tabindex="-1"></a>        <span class="ex">R</span> <span class="at">-e</span> <span class="st">"install.packages('cmdstanr', repos = c('https://stan-dev.r-universe.dev','https://cloud.r-project.org'))"</span></span>
<span id="cb45-206"><a href="#cb45-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-207"><a href="#cb45-207" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Install latest CmdStan into /opt/cmdstan</span></span>
<span id="cb45-208"><a href="#cb45-208" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mkdir</span> <span class="at">-p</span> /opt/cmdstan</span>
<span id="cb45-209"><a href="#cb45-209" aria-hidden="true" tabindex="-1"></a>        <span class="ex">R</span> <span class="at">-e</span> <span class="st">"cmdstanr::install_cmdstan(cores = 2, dir='/opt/cmdstan')"</span></span>
<span id="cb45-210"><a href="#cb45-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-211"><a href="#cb45-211" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create a symlink 'latest' to the installed CmdStan version</span></span>
<span id="cb45-212"><a href="#cb45-212" aria-hidden="true" tabindex="-1"></a>        <span class="bu">cd</span> /opt/cmdstan</span>
<span id="cb45-213"><a href="#cb45-213" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ln</span> <span class="at">-s</span> cmdstan-<span class="pp">*</span> latest</span>
<span id="cb45-214"><a href="#cb45-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-215"><a href="#cb45-215" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Enable threading for within-chain parallelization</span></span>
<span id="cb45-216"><a href="#cb45-216" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mkdir</span> <span class="at">-p</span> /root/.R</span>
<span id="cb45-217"><a href="#cb45-217" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">'CXXFLAGS += -DSTAN_THREADS'</span> <span class="op">&gt;&gt;</span> /root/.R/Makevars</span>
<span id="cb45-218"><a href="#cb45-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-219"><a href="#cb45-219" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Install latest version of petersenlab package from GitHub</span></span>
<span id="cb45-220"><a href="#cb45-220" aria-hidden="true" tabindex="-1"></a>        <span class="ex">R</span> <span class="at">-e</span> <span class="st">"remotes::install_github('DevPsyLab/petersenlab')"</span></span>
<span id="cb45-221"><a href="#cb45-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-222"><a href="#cb45-222" aria-hidden="true" tabindex="-1"></a>    <span class="ex">%environment</span></span>
<span id="cb45-223"><a href="#cb45-223" aria-hidden="true" tabindex="-1"></a>        <span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/usr/local/lib/R/site-library</span>
<span id="cb45-224"><a href="#cb45-224" aria-hidden="true" tabindex="-1"></a>        <span class="bu">export</span> <span class="va">CMDSTAN</span><span class="op">=</span>/opt/cmdstan/latest</span>
<span id="cb45-225"><a href="#cb45-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-226"><a href="#cb45-226" aria-hidden="true" tabindex="-1"></a>    <span class="ex">%runscript</span></span>
<span id="cb45-227"><a href="#cb45-227" aria-hidden="true" tabindex="-1"></a>        <span class="bu">exec</span> R <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb45-228"><a href="#cb45-228" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-229"><a href="#cb45-229" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Press <span class="in">`Ctrl+O`</span> to Save (i.e., "Write Out")</span>
<span id="cb45-230"><a href="#cb45-230" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Press Enter</span>
<span id="cb45-231"><a href="#cb45-231" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Press <span class="in">`Ctrl+X`</span> to Exit</span>
<span id="cb45-232"><a href="#cb45-232" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Build the Container</span>
<span id="cb45-233"><a href="#cb45-233" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, run:</span>
<span id="cb45-234"><a href="#cb45-234" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-235"><a href="#cb45-235" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> apptainer build r_argon.sif r_argon.def</span>
<span id="cb45-236"><a href="#cb45-236" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-237"><a href="#cb45-237" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Test the Container Locally</span>
<span id="cb45-238"><a href="#cb45-238" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, run:</span>
<span id="cb45-239"><a href="#cb45-239" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-240"><a href="#cb45-240" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apptainer</span> exec r_argon.sif R</span>
<span id="cb45-241"><a href="#cb45-241" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-242"><a href="#cb45-242" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Check <span class="in">`R`</span> version:</span>
<span id="cb45-243"><a href="#cb45-243" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-244"><a href="#cb45-244" aria-hidden="true" tabindex="-1"></a>    version</span>
<span id="cb45-245"><a href="#cb45-245" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-246"><a href="#cb45-246" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Check <span class="in">`R`</span> packages:</span>
<span id="cb45-247"><a href="#cb45-247" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-248"><a href="#cb45-248" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(<span class="st">"brms"</span>)</span>
<span id="cb45-249"><a href="#cb45-249" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(<span class="st">"cmdstanr"</span>)</span>
<span id="cb45-250"><a href="#cb45-250" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(<span class="st">"petersenlab"</span>)</span>
<span id="cb45-251"><a href="#cb45-251" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-252"><a href="#cb45-252" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Exit <span class="in">`R`</span></span>
<span id="cb45-253"><a href="#cb45-253" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-254"><a href="#cb45-254" aria-hidden="true" tabindex="-1"></a>    <span class="fu">q</span>()</span>
<span id="cb45-255"><a href="#cb45-255" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-256"><a href="#cb45-256" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Copy the Container to Your Computer</span>
<span id="cb45-257"><a href="#cb45-257" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, run (updating your path; this is equivalent to: <span class="in">`E:/Documents/OneDrive - University of Iowa/Research/Containers/`</span>):</span>
<span id="cb45-258"><a href="#cb45-258" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-259"><a href="#cb45-259" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cp</span> ~/apptainer-1.4.5/r_argon.sif <span class="st">"/mnt/e/Documents/OneDrive - University of Iowa/Research/Containers/"</span></span>
<span id="cb45-260"><a href="#cb45-260" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-261"><a href="#cb45-261" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Copy the Container to Argon</span>
<span id="cb45-262"><a href="#cb45-262" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Use WinSCP to transfer the <span class="in">`.sif`</span> file to Argon (updating your path): <span class="in">`/old_Users/itpetersen/Documents/Containers/`</span></span>
<span id="cb45-263"><a href="#cb45-263" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Test Container on Argon</span>
<span id="cb45-264"><a href="#cb45-264" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Inside the Ubuntu terminal, run:</span>
<span id="cb45-265"><a href="#cb45-265" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-266"><a href="#cb45-266" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cd</span> /Users/itpetersen/Documents/Containers</span>
<span id="cb45-267"><a href="#cb45-267" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apptainer</span> exec r_argon.sif R</span>
<span id="cb45-268"><a href="#cb45-268" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-269"><a href="#cb45-269" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Check <span class="in">`R`</span> version:</span>
<span id="cb45-270"><a href="#cb45-270" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-271"><a href="#cb45-271" aria-hidden="true" tabindex="-1"></a>    version</span>
<span id="cb45-272"><a href="#cb45-272" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-273"><a href="#cb45-273" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Check <span class="in">`R`</span> packages:</span>
<span id="cb45-274"><a href="#cb45-274" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-275"><a href="#cb45-275" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(<span class="st">"brms"</span>)</span>
<span id="cb45-276"><a href="#cb45-276" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(<span class="st">"cmdstanr"</span>)</span>
<span id="cb45-277"><a href="#cb45-277" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(<span class="st">"petersenlab"</span>)</span>
<span id="cb45-278"><a href="#cb45-278" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-279"><a href="#cb45-279" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Exit <span class="in">`R`</span></span>
<span id="cb45-280"><a href="#cb45-280" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-281"><a href="#cb45-281" aria-hidden="true" tabindex="-1"></a>    <span class="fu">q</span>()</span>
<span id="cb45-282"><a href="#cb45-282" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-283"><a href="#cb45-283" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Submit a Job Using the Container on Argon</span>
<span id="cb45-284"><a href="#cb45-284" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>e.g.:</span>
<span id="cb45-285"><a href="#cb45-285" aria-hidden="true" tabindex="-1"></a>    <span class="in">```bash</span></span>
<span id="cb45-286"><a href="#cb45-286" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Run R inside your container</span></span>
<span id="cb45-287"><a href="#cb45-287" aria-hidden="true" tabindex="-1"></a>    <span class="ex">/usr/bin/apptainer</span> exec /Users/itpetersen/Documents/Containers/r_argon.sif <span class="dt">\</span></span>
<span id="cb45-288"><a href="#cb45-288" aria-hidden="true" tabindex="-1"></a>        Rscript my_script.R</span>
<span id="cb45-289"><a href="#cb45-289" aria-hidden="true" tabindex="-1"></a>    <span class="in">```</span></span>
<span id="cb45-290"><a href="#cb45-290" aria-hidden="true" tabindex="-1"></a>    For an example job script using a container, see @sec-jobScript.</span>
<span id="cb45-291"><a href="#cb45-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-292"><a href="#cb45-292" aria-hidden="true" tabindex="-1"></a><span class="fu"># Linux</span></span>
<span id="cb45-293"><a href="#cb45-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-294"><a href="#cb45-294" aria-hidden="true" tabindex="-1"></a><span class="fu">## Initial run</span></span>
<span id="cb45-295"><a href="#cb45-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-296"><a href="#cb45-296" aria-hidden="true" tabindex="-1"></a><span class="fu">### Installing Linux Packages to Install `R` Packages</span></span>
<span id="cb45-297"><a href="#cb45-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-298"><a href="#cb45-298" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb45-299"><a href="#cb45-299" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.2</span>
<span id="cb45-300"><a href="#cb45-300" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.2.2_gcc-9.5.0</span>
<span id="cb45-301"><a href="#cb45-301" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load geos/3.9.1_gcc-9.5.0</span>
<span id="cb45-302"><a href="#cb45-302" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load gdal/2.4.4_gcc-9.5.0</span>
<span id="cb45-303"><a href="#cb45-303" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load proj/5.2.0_gcc-9.5.0</span>
<span id="cb45-304"><a href="#cb45-304" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load gsl/2.7.1_gcc-9.5.0</span>
<span id="cb45-305"><a href="#cb45-305" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load nlopt/2.7.0_gcc-9.5.0</span>
<span id="cb45-306"><a href="#cb45-306" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load jags/4.3.0_gcc-9.5.0-dev</span>
<span id="cb45-307"><a href="#cb45-307" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load zlib/1.2.13_gcc-9.5.0-dev</span>
<span id="cb45-308"><a href="#cb45-308" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load cmake/3.25.0_gcc-9.5.0</span>
<span id="cb45-309"><a href="#cb45-309" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load glpk/4.65_gcc-9.5.0-dev</span>
<span id="cb45-310"><a href="#cb45-310" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load libxml2/2.10.3_gcc-9.5.0</span>
<span id="cb45-311"><a href="#cb45-311" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-nloptr</span>
<span id="cb45-312"><a href="#cb45-312" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-zlibbioc/1.44.0_gcc-9.5.0</span>
<span id="cb45-313"><a href="#cb45-313" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-data-table/1.14.4_gcc-9.5.0</span>
<span id="cb45-314"><a href="#cb45-314" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-stringi/1.7.8_gcc-9.5.0</span>
<span id="cb45-315"><a href="#cb45-315" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-selectr/0.4-2_gcc-9.5.0</span>
<span id="cb45-316"><a href="#cb45-316" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-generics/0.1.3_gcc-9.5.0</span>
<span id="cb45-317"><a href="#cb45-317" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-fansi/1.0.3_gcc-9.5.0</span>
<span id="cb45-318"><a href="#cb45-318" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-utf8/1.2.2_gcc-9.5.0</span>
<span id="cb45-319"><a href="#cb45-319" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-pkgconfig/2.0.3_gcc-9.5.0</span>
<span id="cb45-320"><a href="#cb45-320" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-gtable/0.3.1_gcc-9.5.0</span>
<span id="cb45-321"><a href="#cb45-321" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-scales/1.2.1_gcc-9.5.0</span>
<span id="cb45-322"><a href="#cb45-322" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-tzdb/0.3.0_gcc-9.5.0</span>
<span id="cb45-323"><a href="#cb45-323" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-timechange/0.1.1_gcc-9.5.0</span>
<span id="cb45-324"><a href="#cb45-324" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r-dbi/1.1.3_gcc-9.5.0</span>
<span id="cb45-325"><a href="#cb45-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-326"><a href="#cb45-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-327"><a href="#cb45-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-328"><a href="#cb45-328" aria-hidden="true" tabindex="-1"></a><span class="fu">### Load the Latest Stack</span></span>
<span id="cb45-329"><a href="#cb45-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-330"><a href="#cb45-330" aria-hidden="true" tabindex="-1"></a><span class="in">`module load stack`</span></span>
<span id="cb45-331"><a href="#cb45-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-332"><a href="#cb45-332" aria-hidden="true" tabindex="-1"></a><span class="fu">### Stack 2022.2</span></span>
<span id="cb45-333"><a href="#cb45-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-334"><a href="#cb45-334" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb45-335"><a href="#cb45-335" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.2</span>
<span id="cb45-336"><a href="#cb45-336" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.2.2_gcc-9.5.0</span>
<span id="cb45-337"><a href="#cb45-337" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> path</span>
<span id="cb45-338"><a href="#cb45-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-339"><a href="#cb45-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-340"><a href="#cb45-340" aria-hidden="true" tabindex="-1"></a><span class="fu">## Load Software Stacks</span></span>
<span id="cb45-341"><a href="#cb45-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-342"><a href="#cb45-342" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513440/Argon+Software+List&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/WJ4Q-GDUS&gt;</span>)</span>
<span id="cb45-343"><a href="#cb45-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-344"><a href="#cb45-344" aria-hidden="true" tabindex="-1"></a><span class="in">`module load stack/2022.2`</span></span>
<span id="cb45-345"><a href="#cb45-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-346"><a href="#cb45-346" aria-hidden="true" tabindex="-1"></a><span class="fu">## Job Script {#sec-jobScript}</span></span>
<span id="cb45-347"><a href="#cb45-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-348"><a href="#cb45-348" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb45-349"><a href="#cb45-349" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb45-350"><a href="#cb45-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-351"><a href="#cb45-351" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb45-352"><a href="#cb45-352" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Bayesian_IRT/</span>
<span id="cb45-353"><a href="#cb45-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-354"><a href="#cb45-354" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify qsub options</span></span>
<span id="cb45-355"><a href="#cb45-355" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -pe smp 4</span></span>
<span id="cb45-356"><a href="#cb45-356" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -M isaac-t-petersen@uiowa.edu</span></span>
<span id="cb45-357"><a href="#cb45-357" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -m eas</span></span>
<span id="cb45-358"><a href="#cb45-358" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l mf=512G</span></span>
<span id="cb45-359"><a href="#cb45-359" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l h_vmem=512G</span></span>
<span id="cb45-360"><a href="#cb45-360" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb45-361"><a href="#cb45-361" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -q UI-HM</span></span>
<span id="cb45-362"><a href="#cb45-362" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -e /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb45-363"><a href="#cb45-363" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -o /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb45-364"><a href="#cb45-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-365"><a href="#cb45-365" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the environment modules</span></span>
<span id="cb45-366"><a href="#cb45-366" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> purge</span>
<span id="cb45-367"><a href="#cb45-367" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load stack/2022.2</span>
<span id="cb45-368"><a href="#cb45-368" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r/4.2.2_gcc-9.5.0</span>
<span id="cb45-369"><a href="#cb45-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-370"><a href="#cb45-370" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the R script</span></span>
<span id="cb45-371"><a href="#cb45-371" aria-hidden="true" tabindex="-1"></a><span class="ex">Rscript</span> ./Analyses/factorScores.R</span>
<span id="cb45-372"><a href="#cb45-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-373"><a href="#cb45-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-374"><a href="#cb45-374" aria-hidden="true" tabindex="-1"></a>Using a container:</span>
<span id="cb45-375"><a href="#cb45-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-376"><a href="#cb45-376" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb45-377"><a href="#cb45-377" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb45-378"><a href="#cb45-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-379"><a href="#cb45-379" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb45-380"><a href="#cb45-380" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/itpetersen/Documents/Projects/Bayesian_IRT/</span>
<span id="cb45-381"><a href="#cb45-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-382"><a href="#cb45-382" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify qsub options</span></span>
<span id="cb45-383"><a href="#cb45-383" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -pe smp 4</span></span>
<span id="cb45-384"><a href="#cb45-384" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -M isaac-t-petersen@uiowa.edu</span></span>
<span id="cb45-385"><a href="#cb45-385" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -m eas</span></span>
<span id="cb45-386"><a href="#cb45-386" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l mf=512G</span></span>
<span id="cb45-387"><a href="#cb45-387" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -l h_vmem=512G</span></span>
<span id="cb45-388"><a href="#cb45-388" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb45-389"><a href="#cb45-389" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -q UI-HM</span></span>
<span id="cb45-390"><a href="#cb45-390" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -e /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb45-391"><a href="#cb45-391" aria-hidden="true" tabindex="-1"></a><span class="co">#$ -o /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/</span></span>
<span id="cb45-392"><a href="#cb45-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-393"><a href="#cb45-393" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the environment modules</span></span>
<span id="cb45-394"><a href="#cb45-394" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> purge</span>
<span id="cb45-395"><a href="#cb45-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-396"><a href="#cb45-396" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the R script inside container</span></span>
<span id="cb45-397"><a href="#cb45-397" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> exec /Users/itpetersen/Documents/Containers/r_argon.sif <span class="dt">\</span></span>
<span id="cb45-398"><a href="#cb45-398" aria-hidden="true" tabindex="-1"></a>    Rscript ./Analyses/factorScores.R</span>
<span id="cb45-399"><a href="#cb45-399" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-400"><a href="#cb45-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-401"><a href="#cb45-401" aria-hidden="true" tabindex="-1"></a><span class="fu">### qsub options</span></span>
<span id="cb45-402"><a href="#cb45-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-403"><a href="#cb45-403" aria-hidden="true" tabindex="-1"></a><span class="in">`-pe smp 4`</span>: specify a parallel environment and number of cores to be used (<span class="in">`smp`</span> = shared memory parallel environment)</span>
<span id="cb45-404"><a href="#cb45-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-405"><a href="#cb45-405" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The <span class="in">`OMP_NUM_THREADS`</span> variable is set to '1' by default.</span>
<span id="cb45-406"><a href="#cb45-406" aria-hidden="true" tabindex="-1"></a>If your code can take advantage of the threading then specify <span class="in">`OMP_NUM_THREADS`</span> to be equal to the number of job cores per node requested.</span>
<span id="cb45-407"><a href="#cb45-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-408"><a href="#cb45-408" aria-hidden="true" tabindex="-1"></a><span class="in">`-M isaac-t-petersen@uiowa.edu`</span>: Set the email address to receive email about jobs. This must be your University of Iowa email address.</span>
<span id="cb45-409"><a href="#cb45-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-410"><a href="#cb45-410" aria-hidden="true" tabindex="-1"></a><span class="in">`-m eas`</span>: Specify when to send an email message (; ; ; ; )</span>
<span id="cb45-411"><a href="#cb45-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-412"><a href="#cb45-412" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`b`</span> = beginning of job</span>
<span id="cb45-413"><a href="#cb45-413" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`e`</span> = end of job</span>
<span id="cb45-414"><a href="#cb45-414" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`a`</span> = when job is aborted</span>
<span id="cb45-415"><a href="#cb45-415" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`s`</span> = when job is suspended</span>
<span id="cb45-416"><a href="#cb45-416" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`n`</span> = no mail is sent</span>
<span id="cb45-417"><a href="#cb45-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-418"><a href="#cb45-418" aria-hidden="true" tabindex="-1"></a><span class="in">`-l mf=512G`</span>: request a particular quantity of memory you expect to use (to be available for your computation to start; the request is only applicable at scheduling time. It is not a limit.)</span>
<span id="cb45-419"><a href="#cb45-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-420"><a href="#cb45-420" aria-hidden="true" tabindex="-1"></a><span class="in">`-l h_vmem=512G`</span>: request a particular quantity of virtual memory you expect to use (to be available for your computation to start; the request is only applicable at scheduling time.</span>
<span id="cb45-421"><a href="#cb45-421" aria-hidden="true" tabindex="-1"></a>It is not a limit.)</span>
<span id="cb45-422"><a href="#cb45-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-423"><a href="#cb45-423" aria-hidden="true" tabindex="-1"></a><span class="in">`-cwd`</span>: Determines whether the job will be executed from the current working directory.</span>
<span id="cb45-424"><a href="#cb45-424" aria-hidden="true" tabindex="-1"></a>If not specified, the job will be run from your home directory.</span>
<span id="cb45-425"><a href="#cb45-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-426"><a href="#cb45-426" aria-hidden="true" tabindex="-1"></a><span class="in">`-q UI-HM`</span>: specify queue</span>
<span id="cb45-427"><a href="#cb45-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-428"><a href="#cb45-428" aria-hidden="true" tabindex="-1"></a><span class="in">`-e /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/`</span>: Name of a file or directory for standard error.</span>
<span id="cb45-429"><a href="#cb45-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-430"><a href="#cb45-430" aria-hidden="true" tabindex="-1"></a><span class="in">`-o /Users/itpetersen/Documents/Projects/Bayesian_IRT/Output/`</span>: Name of a file or directory for standard output.</span>
<span id="cb45-431"><a href="#cb45-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-432"><a href="#cb45-432" aria-hidden="true" tabindex="-1"></a><span class="fu">## Submit Job</span></span>
<span id="cb45-433"><a href="#cb45-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-434"><a href="#cb45-434" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513450/Basic+Job+Submission&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/2SS2-LEJR&gt;</span>)</span>
<span id="cb45-435"><a href="#cb45-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-436"><a href="#cb45-436" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513452/Advanced+Job+Submission&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/8H6G-2M2F&gt;</span>)</span>
<span id="cb45-437"><a href="#cb45-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-438"><a href="#cb45-438" aria-hidden="true" tabindex="-1"></a><span class="in">`cd path/to/dataSet123`</span></span>
<span id="cb45-439"><a href="#cb45-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-440"><a href="#cb45-440" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">cd /Users/itpetersen/Documents/Projects/Test/Jobs</span><span class="co">]</span></span>
<span id="cb45-441"><a href="#cb45-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-442"><a href="#cb45-442" aria-hidden="true" tabindex="-1"></a><span class="in">`qsub myscript.job`</span></span>
<span id="cb45-443"><a href="#cb45-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-444"><a href="#cb45-444" aria-hidden="true" tabindex="-1"></a>Job dependency (run <span class="in">`Job B`</span> when <span class="in">`Job A`</span> is finished):</span>
<span id="cb45-445"><a href="#cb45-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-446"><a href="#cb45-446" aria-hidden="true" tabindex="-1"></a><span class="in">`qsub -hold_jid JOB_ID test_B.job`</span></span>
<span id="cb45-447"><a href="#cb45-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-448"><a href="#cb45-448" aria-hidden="true" tabindex="-1"></a><span class="fu">### Bayesian IRT</span></span>
<span id="cb45-449"><a href="#cb45-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-450"><a href="#cb45-450" aria-hidden="true" tabindex="-1"></a><span class="in">`cd /Users/itpetersen/Documents/Projects/Bayesian_IRT/Jobs`</span></span>
<span id="cb45-451"><a href="#cb45-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-452"><a href="#cb45-452" aria-hidden="true" tabindex="-1"></a><span class="in">`qsub bayesianIRT.job`</span></span>
<span id="cb45-453"><a href="#cb45-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-454"><a href="#cb45-454" aria-hidden="true" tabindex="-1"></a><span class="in">`qsub -hold_jid JOB_ID factorScores.job`</span></span>
<span id="cb45-455"><a href="#cb45-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-456"><a href="#cb45-456" aria-hidden="true" tabindex="-1"></a><span class="fu">### Multiple Imputation</span></span>
<span id="cb45-457"><a href="#cb45-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-458"><a href="#cb45-458" aria-hidden="true" tabindex="-1"></a><span class="in">`cd /Users/itpetersen/Documents/Projects/Multiple_Imputation/Jobs`</span></span>
<span id="cb45-459"><a href="#cb45-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-460"><a href="#cb45-460" aria-hidden="true" tabindex="-1"></a><span class="in">`qsub srs_selfRegulation.R`</span></span>
<span id="cb45-461"><a href="#cb45-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-462"><a href="#cb45-462" aria-hidden="true" tabindex="-1"></a><span class="fu">## Queues</span></span>
<span id="cb45-463"><a href="#cb45-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-464"><a href="#cb45-464" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513468/Queues+and+Policies&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/UUR7-XLBZ&gt;</span>)</span>
<span id="cb45-465"><a href="#cb45-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-466"><a href="#cb45-466" aria-hidden="true" tabindex="-1"></a><span class="in">`UI`</span></span>
<span id="cb45-467"><a href="#cb45-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-468"><a href="#cb45-468" aria-hidden="true" tabindex="-1"></a><span class="in">`UI-HM`</span></span>
<span id="cb45-469"><a href="#cb45-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-470"><a href="#cb45-470" aria-hidden="true" tabindex="-1"></a><span class="in">`UI-GPU-HM`</span></span>
<span id="cb45-471"><a href="#cb45-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-472"><a href="#cb45-472" aria-hidden="true" tabindex="-1"></a><span class="in">`UI-DEVELOP`</span></span>
<span id="cb45-473"><a href="#cb45-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-474"><a href="#cb45-474" aria-hidden="true" tabindex="-1"></a><span class="in">`all.q`</span></span>
<span id="cb45-475"><a href="#cb45-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-476"><a href="#cb45-476" aria-hidden="true" tabindex="-1"></a><span class="fu">## Queue Status</span></span>
<span id="cb45-477"><a href="#cb45-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-478"><a href="#cb45-478" aria-hidden="true" tabindex="-1"></a><span class="in">`qstat -g c -q QUEUE_NAME`</span></span>
<span id="cb45-479"><a href="#cb45-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-480"><a href="#cb45-480" aria-hidden="true" tabindex="-1"></a><span class="in">`qstat -g c -q UI`</span></span>
<span id="cb45-481"><a href="#cb45-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-482"><a href="#cb45-482" aria-hidden="true" tabindex="-1"></a><span class="fu">## Job Status</span></span>
<span id="cb45-483"><a href="#cb45-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-484"><a href="#cb45-484" aria-hidden="true" tabindex="-1"></a><span class="in">`qstat -u itpetersen`</span></span>
<span id="cb45-485"><a href="#cb45-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-486"><a href="#cb45-486" aria-hidden="true" tabindex="-1"></a><span class="in">`qstat -j JOB_ID`</span></span>
<span id="cb45-487"><a href="#cb45-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-488"><a href="#cb45-488" aria-hidden="true" tabindex="-1"></a><span class="fu">## Job Time and Memory</span></span>
<span id="cb45-489"><a href="#cb45-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-490"><a href="#cb45-490" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Terminated jobs: <span class="in">`qacct -j JOB_ID`</span></span>
<span id="cb45-491"><a href="#cb45-491" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jobs in progress: <span class="in">`qstat -j JOB_ID | grep usage`</span></span>
<span id="cb45-492"><a href="#cb45-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-493"><a href="#cb45-493" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cancel Job</span></span>
<span id="cb45-494"><a href="#cb45-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-495"><a href="#cb45-495" aria-hidden="true" tabindex="-1"></a><span class="in">`qdel JOB_ID`</span></span>
<span id="cb45-496"><a href="#cb45-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-497"><a href="#cb45-497" aria-hidden="true" tabindex="-1"></a><span class="fu">## Run `R` Script</span></span>
<span id="cb45-498"><a href="#cb45-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-499"><a href="#cb45-499" aria-hidden="true" tabindex="-1"></a>See <span class="co">[</span><span class="ot">here</span><span class="co">](#sec-runRscript)</span></span>
<span id="cb45-500"><a href="#cb45-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-501"><a href="#cb45-501" aria-hidden="true" tabindex="-1"></a><span class="fu"># R</span></span>
<span id="cb45-502"><a href="#cb45-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-503"><a href="#cb45-503" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514707/R+Programs+in+Batch+mode+for+HPC&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/99JQ-43ZG&gt;</span>)</span>
<span id="cb45-504"><a href="#cb45-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-505"><a href="#cb45-505" aria-hidden="true" tabindex="-1"></a><span class="fu">## Find which versions of `R` are installed</span></span>
<span id="cb45-506"><a href="#cb45-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-507"><a href="#cb45-507" aria-hidden="true" tabindex="-1"></a><span class="in">`module spider R`</span></span>
<span id="cb45-508"><a href="#cb45-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-509"><a href="#cb45-509" aria-hidden="true" tabindex="-1"></a>But, there may be more recent version of <span class="in">`R`</span> installed in the "Additional Software Stacks" (<span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76513440/Argon+Software+List&gt;</span>; archived at <span class="ot">&lt;https://perma.cc/WJ4Q-GDUS&gt;</span>)</span>
<span id="cb45-510"><a href="#cb45-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-511"><a href="#cb45-511" aria-hidden="true" tabindex="-1"></a><span class="fu">## Compile `R`</span></span>
<span id="cb45-512"><a href="#cb45-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-513"><a href="#cb45-513" aria-hidden="true" tabindex="-1"></a>If you want to compile a more recent version of <span class="in">`R`</span> than is available in the software stacks, see <span class="co">[</span><span class="ot">here</span><span class="co">](https://brandonlebeau.org/2022/06/02/compile-hpc-iowa/)</span> (archived at <span class="ot">&lt;https://perma.cc/C6EX-EZL4&gt;</span>).</span>
<span id="cb45-514"><a href="#cb45-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-515"><a href="#cb45-515" aria-hidden="true" tabindex="-1"></a><span class="fu">## Install `R` packages</span></span>
<span id="cb45-516"><a href="#cb45-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-517"><a href="#cb45-517" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;https://uiowa.atlassian.net/wiki/spaces/hpcdocs/pages/76514803/Adding+R+programs+to+a+personal+library&gt;</span> (archived at <span class="ot">&lt;https://perma.cc/3SRR-2JE7&gt;</span>)</span>
<span id="cb45-518"><a href="#cb45-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-519"><a href="#cb45-519" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>first load the <span class="in">`R`</span> environment module</span>
<span id="cb45-520"><a href="#cb45-520" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`module load r/4.2.2_gcc-9.5.0`</span></span>
<span id="cb45-521"><a href="#cb45-521" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>launch R</span>
<span id="cb45-522"><a href="#cb45-522" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`R`</span></span>
<span id="cb45-523"><a href="#cb45-523" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>then install the package, (the code below uses a generic <span class="in">`package_name`</span>):</span>
<span id="cb45-524"><a href="#cb45-524" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="in">`install.packages("package_name", repos = "http://cran.r-project.org", dependencies = TRUE, type = "source", Ncpus = 40)`</span></span>
<span id="cb45-525"><a href="#cb45-525" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>If using <span class="in">`packrat`</span>, it is preferable to install packages by source, if possible, but you can remove <span class="in">`type = source`</span> if you want to install binaries</span>
<span id="cb45-526"><a href="#cb45-526" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Assuming that you do not have a personal library directory you will see</span>
<span id="cb45-527"><a href="#cb45-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-528"><a href="#cb45-528" aria-hidden="true" tabindex="-1"></a>    <span class="in">```r</span></span>
<span id="cb45-529"><a href="#cb45-529" aria-hidden="true" tabindex="-1"></a>    Warning <span class="cf">in</span> <span class="fu">install.packages</span>(<span class="st">"package_name"</span>, <span class="at">repos =</span> <span class="st">"http://cran.r-project.org"</span>) <span class="sc">:</span></span>
<span id="cb45-530"><a href="#cb45-530" aria-hidden="true" tabindex="-1"></a>    lib <span class="ot">=</span> <span class="st">"/opt/R/3.0.2/lib64/R/library"' is not writable</span></span>
<span id="cb45-531"><a href="#cb45-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-532"><a href="#cb45-532" aria-hidden="true" tabindex="-1"></a><span class="st">    Would you like to use a personal library instead?  (y/n)</span></span>
<span id="cb45-533"><a href="#cb45-533" aria-hidden="true" tabindex="-1"></a><span class="st">    ```</span></span>
<span id="cb45-534"><a href="#cb45-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-535"><a href="#cb45-535" aria-hidden="true" tabindex="-1"></a><span class="st">1. Select `y`</span></span>
<span id="cb45-536"><a href="#cb45-536" aria-hidden="true" tabindex="-1"></a><span class="st">1. Select `y` again when prompted to create the directory; your package should download and install into your personal library directory</span></span>
<span id="cb45-537"><a href="#cb45-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-538"><a href="#cb45-538" aria-hidden="true" tabindex="-1"></a><span class="st">Example:</span></span>
<span id="cb45-539"><a href="#cb45-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-542"><a href="#cb45-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-543"><a href="#cb45-543" aria-hidden="true" tabindex="-1"></a><span class="st">#| eval: false</span></span>
<span id="cb45-544"><a href="#cb45-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-545"><a href="#cb45-545" aria-hidden="true" tabindex="-1"></a><span class="st">install.packages(c(</span></span>
<span id="cb45-546"><a href="#cb45-546" aria-hidden="true" tabindex="-1"></a><span class="st">    "renv","psych","tidyverse","data.table","nlme","lme4","mirt","TeachingDemos","Amelia","mice","miceadds","abind","future","lavaan","blavaan","Rcpp","igraph","shinystan","StanHeaders","brms","rstan","rjags"),</span></span>
<span id="cb45-547"><a href="#cb45-547" aria-hidden="true" tabindex="-1"></a><span class="st">    repos = "http://cran.r-project.org",</span></span>
<span id="cb45-548"><a href="#cb45-548" aria-hidden="true" tabindex="-1"></a><span class="st">    dependencies = TRUE,</span></span>
<span id="cb45-549"><a href="#cb45-549" aria-hidden="true" tabindex="-1"></a><span class="st">    Ncpus = 40)</span></span>
<span id="cb45-550"><a href="#cb45-550" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-551"><a href="#cb45-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-552"><a href="#cb45-552" aria-hidden="true" tabindex="-1"></a><span class="st">### Install `R` package locally from source</span></span>
<span id="cb45-553"><a href="#cb45-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-554"><a href="#cb45-554" aria-hidden="true" tabindex="-1"></a><span class="st">`install.packages(path_to_file, repos = NULL, type = "source", Ncpus = 40)`</span></span>
<span id="cb45-555"><a href="#cb45-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-556"><a href="#cb45-556" aria-hidden="true" tabindex="-1"></a><span class="st">Example:</span></span>
<span id="cb45-557"><a href="#cb45-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-560"><a href="#cb45-560" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-561"><a href="#cb45-561" aria-hidden="true" tabindex="-1"></a><span class="st">#| eval: false</span></span>
<span id="cb45-562"><a href="#cb45-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-563"><a href="#cb45-563" aria-hidden="true" tabindex="-1"></a><span class="st">install.packages(c(</span></span>
<span id="cb45-564"><a href="#cb45-564" aria-hidden="true" tabindex="-1"></a><span class="st">    "renv","psych","tidyverse","data.table","nlme","lme4","mirt","TeachingDemos","Amelia","mice","miceadds","abind","future","lavaan","blavaan","Rcpp","igraph","shinystan","StanHeaders","brms","rstan","rjags"),</span></span>
<span id="cb45-565"><a href="#cb45-565" aria-hidden="true" tabindex="-1"></a><span class="st">    repos = "http://cran.r-project.org",</span></span>
<span id="cb45-566"><a href="#cb45-566" aria-hidden="true" tabindex="-1"></a><span class="st">    type = "source",</span></span>
<span id="cb45-567"><a href="#cb45-567" aria-hidden="true" tabindex="-1"></a><span class="st">    dependencies = TRUE,</span></span>
<span id="cb45-568"><a href="#cb45-568" aria-hidden="true" tabindex="-1"></a><span class="st">    Ncpus = 40)</span></span>
<span id="cb45-569"><a href="#cb45-569" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-570"><a href="#cb45-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-571"><a href="#cb45-571" aria-hidden="true" tabindex="-1"></a><span class="st">### Managing packages for a project using `renv` {#sec-renv}</span></span>
<span id="cb45-572"><a href="#cb45-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-573"><a href="#cb45-573" aria-hidden="true" tabindex="-1"></a><span class="st">1. Create a directory where you want you want to store the project.</span></span>
<span id="cb45-574"><a href="#cb45-574" aria-hidden="true" tabindex="-1"></a><span class="st">1. `cd` to the above directory</span></span>
<span id="cb45-575"><a href="#cb45-575" aria-hidden="true" tabindex="-1"></a><span class="st">1. Start R</span></span>
<span id="cb45-576"><a href="#cb45-576" aria-hidden="true" tabindex="-1"></a><span class="st">1. Load the `renv` package: `library("renv")`</span></span>
<span id="cb45-577"><a href="#cb45-577" aria-hidden="true" tabindex="-1"></a><span class="st">1. At the `R` prompt, initialize the `renv` project on the local repository of `R` packages with:</span></span>
<span id="cb45-578"><a href="#cb45-578" aria-hidden="true" tabindex="-1"></a><span class="st">    - `renv::init(project = "/Users/itpetersen/Documents/Projects/SelfRegulation_IRT/")`</span></span>
<span id="cb45-579"><a href="#cb45-579" aria-hidden="true" tabindex="-1"></a><span class="st">    - or `renv::init()` if you are in the intended working directory</span></span>
<span id="cb45-580"><a href="#cb45-580" aria-hidden="true" tabindex="-1"></a><span class="st">1. You must restart your `R` session in the given project directory after running init in order for the changes to take effect!</span></span>
<span id="cb45-581"><a href="#cb45-581" aria-hidden="true" tabindex="-1"></a><span class="st">1. From this point on you are working in a `renv` project.</span></span>
<span id="cb45-582"><a href="#cb45-582" aria-hidden="true" tabindex="-1"></a><span class="st">Installed packages will go into a library within this project.</span></span>
<span id="cb45-583"><a href="#cb45-583" aria-hidden="true" tabindex="-1"></a><span class="st">After initializing the `renv` project on the local repository of `R` packages, packages from the local repository can be installed with `renv::install()`:</span></span>
<span id="cb45-584"><a href="#cb45-584" aria-hidden="true" tabindex="-1"></a><span class="st">    - `renv::install("package_name")`</span></span>
<span id="cb45-585"><a href="#cb45-585" aria-hidden="true" tabindex="-1"></a><span class="st">1. To restart a `renv` project, simply start `R` from the directory created in step (1).</span></span>
<span id="cb45-586"><a href="#cb45-586" aria-hidden="true" tabindex="-1"></a><span class="st">The project will initialize automatically.</span></span>
<span id="cb45-587"><a href="#cb45-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-588"><a href="#cb45-588" aria-hidden="true" tabindex="-1"></a><span class="st">To update version of `renv`: `renv::upgrade()`</span></span>
<span id="cb45-589"><a href="#cb45-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-590"><a href="#cb45-590" aria-hidden="true" tabindex="-1"></a><span class="st">To install packages: `renv::install("package_name")`</span></span>
<span id="cb45-591"><a href="#cb45-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-592"><a href="#cb45-592" aria-hidden="true" tabindex="-1"></a><span class="st">To update packages: `renv::update()`</span></span>
<span id="cb45-593"><a href="#cb45-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-594"><a href="#cb45-594" aria-hidden="true" tabindex="-1"></a><span class="st">To save the current state of your library: `renv::snapshot()`</span></span>
<span id="cb45-595"><a href="#cb45-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-596"><a href="#cb45-596" aria-hidden="true" tabindex="-1"></a><span class="st">To restore the state of your library from the lock file: `renv::restore()`</span></span>
<span id="cb45-597"><a href="#cb45-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-598"><a href="#cb45-598" aria-hidden="true" tabindex="-1"></a><span class="st">To disable `renv` on a project: `renv::deactivate()`</span></span>
<span id="cb45-599"><a href="#cb45-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-600"><a href="#cb45-600" aria-hidden="true" tabindex="-1"></a><span class="st">#### To control which packages to install with `renv` using a `DESCRIPTION` file</span></span>
<span id="cb45-601"><a href="#cb45-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-602"><a href="#cb45-602" aria-hidden="true" tabindex="-1"></a><span class="st">If you want to control which packages are installed in a `renv` project, you can use a `DESCRIPTION` file to specify the packages that should be installed:</span></span>
<span id="cb45-603"><a href="#cb45-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-604"><a href="#cb45-604" aria-hidden="true" tabindex="-1"></a><span class="st">1. Create a `DESCRIPTION` file in the project directory with the following format:</span></span>
<span id="cb45-605"><a href="#cb45-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-606"><a href="#cb45-606" aria-hidden="true" tabindex="-1"></a><span class="st">    ```yaml</span></span>
<span id="cb45-607"><a href="#cb45-607" aria-hidden="true" tabindex="-1"></a><span class="st">    Type: project</span></span>
<span id="cb45-608"><a href="#cb45-608" aria-hidden="true" tabindex="-1"></a><span class="st">    Description: My project.</span></span>
<span id="cb45-609"><a href="#cb45-609" aria-hidden="true" tabindex="-1"></a><span class="st">    Depends:</span></span>
<span id="cb45-610"><a href="#cb45-610" aria-hidden="true" tabindex="-1"></a><span class="st">        packageName1,</span></span>
<span id="cb45-611"><a href="#cb45-611" aria-hidden="true" tabindex="-1"></a><span class="st">        packageName2,</span></span>
<span id="cb45-612"><a href="#cb45-612" aria-hidden="true" tabindex="-1"></a><span class="st">        packageName3</span></span>
<span id="cb45-613"><a href="#cb45-613" aria-hidden="true" tabindex="-1"></a><span class="st">    ```</span></span>
<span id="cb45-614"><a href="#cb45-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-615"><a href="#cb45-615" aria-hidden="true" tabindex="-1"></a><span class="st">1. Run `renv::settings$snapshot.type("explicit")` to suppress dependency discover and to enable "explicit" mode: &lt;https://rstudio.github.io/renv/reference/dependencies.html#explicit-dependencies&gt;</span></span>
<span id="cb45-616"><a href="#cb45-616" aria-hidden="true" tabindex="-1"></a><span class="st">1. Run `renv::init(bare=TRUE)` to initialize the project without attempting to discover and install `R` package dependencies</span></span>
<span id="cb45-617"><a href="#cb45-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-618"><a href="#cb45-618" aria-hidden="true" tabindex="-1"></a><span class="st">### To install a new package for a project after `renv` has been initialized</span></span>
<span id="cb45-619"><a href="#cb45-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-620"><a href="#cb45-620" aria-hidden="true" tabindex="-1"></a><span class="st">1. First, load the `R` environment module (see `Install R packages` section above)</span></span>
<span id="cb45-621"><a href="#cb45-621" aria-hidden="true" tabindex="-1"></a><span class="st">1. cd to the directory of the `R` project</span></span>
<span id="cb45-622"><a href="#cb45-622" aria-hidden="true" tabindex="-1"></a><span class="st">1. launch R</span></span>
<span id="cb45-623"><a href="#cb45-623" aria-hidden="true" tabindex="-1"></a><span class="st">    - `R`</span></span>
<span id="cb45-624"><a href="#cb45-624" aria-hidden="true" tabindex="-1"></a><span class="st">1. then install the package, (the code below uses a generic `package_name`):</span></span>
<span id="cb45-625"><a href="#cb45-625" aria-hidden="true" tabindex="-1"></a><span class="st">    - `install.packages("package_name", repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)`</span></span>
<span id="cb45-626"><a href="#cb45-626" aria-hidden="true" tabindex="-1"></a><span class="st">    - `install.packages(c("renv","psych","tidyverse","data.table","nlme","lme4","mirt","TeachingDemos","Amelia","mice","miceadds","abind","future","lavaan","blavaan","Rcpp","igraph","shinystan","StanHeaders","brms","rstan","rjags","renv"), repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)`</span></span>
<span id="cb45-627"><a href="#cb45-627" aria-hidden="true" tabindex="-1"></a><span class="st">1. `renv::snapshot()`</span></span>
<span id="cb45-628"><a href="#cb45-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-629"><a href="#cb45-629" aria-hidden="true" tabindex="-1"></a><span class="st">## Update Packages</span></span>
<span id="cb45-630"><a href="#cb45-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-633"><a href="#cb45-633" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-634"><a href="#cb45-634" aria-hidden="true" tabindex="-1"></a><span class="st">#| eval: false</span></span>
<span id="cb45-635"><a href="#cb45-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-636"><a href="#cb45-636" aria-hidden="true" tabindex="-1"></a><span class="st">update.packages(ask = FALSE)</span></span>
<span id="cb45-637"><a href="#cb45-637" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-638"><a href="#cb45-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-639"><a href="#cb45-639" aria-hidden="true" tabindex="-1"></a><span class="st">## Run `R` Script {#sec-runRscript}</span></span>
<span id="cb45-640"><a href="#cb45-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-641"><a href="#cb45-641" aria-hidden="true" tabindex="-1"></a><span class="st">`module load r/4.0.5_gcc-9.3.0`</span></span>
<span id="cb45-642"><a href="#cb45-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-643"><a href="#cb45-643" aria-hidden="true" tabindex="-1"></a><span class="st">`cd path/to/dataSet123`</span></span>
<span id="cb45-644"><a href="#cb45-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-645"><a href="#cb45-645" aria-hidden="true" tabindex="-1"></a><span class="st">[cd /Users/itpetersen/Documents/Projects/Test/Analyses]</span></span>
<span id="cb45-646"><a href="#cb45-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-647"><a href="#cb45-647" aria-hidden="true" tabindex="-1"></a><span class="st">`Rscript path/to/program.R`</span></span>
<span id="cb45-648"><a href="#cb45-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-649"><a href="#cb45-649" aria-hidden="true" tabindex="-1"></a><span class="st">[Rscript test.R]</span></span>
<span id="cb45-650"><a href="#cb45-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-651"><a href="#cb45-651" aria-hidden="true" tabindex="-1"></a><span class="st">## Quit R</span></span>
<span id="cb45-652"><a href="#cb45-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-653"><a href="#cb45-653" aria-hidden="true" tabindex="-1"></a><span class="st">`q()`</span></span>
<span id="cb45-654"><a href="#cb45-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-655"><a href="#cb45-655" aria-hidden="true" tabindex="-1"></a><span class="st"># Stan</span></span>
<span id="cb45-656"><a href="#cb45-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-657"><a href="#cb45-657" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;https://github.com/stan-dev/rstan/wiki/Installing-RStan-on-Linux&gt; (archived at &lt;https://perma.cc/89H9-L8S6&gt;)</span></span>
<span id="cb45-658"><a href="#cb45-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-659"><a href="#cb45-659" aria-hidden="true" tabindex="-1"></a><span class="st">Makevars:</span></span>
<span id="cb45-660"><a href="#cb45-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-661"><a href="#cb45-661" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="sc">\\</span><span class="st">data.hpc.uiowa.edu</span><span class="sc">\a</span><span class="st">rgon_home\.R\Makevars`</span></span>
<span id="cb45-662"><a href="#cb45-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-663"><a href="#cb45-663" aria-hidden="true" tabindex="-1"></a><span class="st"># Troubleshooting</span></span>
<span id="cb45-664"><a href="#cb45-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-665"><a href="#cb45-665" aria-hidden="true" tabindex="-1"></a><span class="st">## Having trouble installing packages?</span></span>
<span id="cb45-666"><a href="#cb45-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-667"><a href="#cb45-667" aria-hidden="true" tabindex="-1"></a><span class="st">Sometimes Argon will fail to install packages in an R workspace.</span></span>
<span id="cb45-668"><a href="#cb45-668" aria-hidden="true" tabindex="-1"></a><span class="st">We advise the following steps:</span></span>
<span id="cb45-669"><a href="#cb45-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-670"><a href="#cb45-670" aria-hidden="true" tabindex="-1"></a><span class="st">1. Sometimes R provides an error stating something like "fatal error: modulename: No such file or directory".</span></span>
<span id="cb45-671"><a href="#cb45-671" aria-hidden="true" tabindex="-1"></a><span class="st">In this instance, you may wish to exist R with q() and load all the modules that begin with the listed module name, as listed above in "Installing Linux Packages to Install R Packages".</span></span>
<span id="cb45-672"><a href="#cb45-672" aria-hidden="true" tabindex="-1"></a><span class="st">Then reopen R and try to install the package again.</span></span>
<span id="cb45-673"><a href="#cb45-673" aria-hidden="true" tabindex="-1"></a><span class="st">1. You can also try installing the package from binary using the RStudio Package Manager (RSPM):</span></span>
<span id="cb45-674"><a href="#cb45-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-675"><a href="#cb45-675" aria-hidden="true" tabindex="-1"></a><span class="st">    ```r</span></span>
<span id="cb45-676"><a href="#cb45-676" aria-hidden="true" tabindex="-1"></a><span class="st">    remotes::install_github("cran4linux/rspm")</span></span>
<span id="cb45-677"><a href="#cb45-677" aria-hidden="true" tabindex="-1"></a><span class="st">    rspm::enable()</span></span>
<span id="cb45-678"><a href="#cb45-678" aria-hidden="true" tabindex="-1"></a><span class="st">    install.packages("PACKAGE_NAME")</span></span>
<span id="cb45-679"><a href="#cb45-679" aria-hidden="true" tabindex="-1"></a><span class="st">    ```</span></span>
<span id="cb45-680"><a href="#cb45-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-681"><a href="#cb45-681" aria-hidden="true" tabindex="-1"></a><span class="st">1. If that does not work, you can try downloading the .tar file directly from the CRAN repository. Then copy the file into your Argon folder and type '</span><span class="fu">install.packages</span>(<span class="st">"/Users/path/to/directory/package_name"</span>, <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>)<span class="st">'.</span></span>
<span id="cb45-682"><a href="#cb45-682" aria-hidden="true" tabindex="-1"></a><span class="st">Note that you may need to download an older version of the package (e.g., from the [CRAN Archive](https://cran.r-project.org/src/contrib/Archive/)), such that it is compatible with the version of R you are running on Argon (which it typically not the most recent R version):</span></span>
<span id="cb45-683"><a href="#cb45-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-684"><a href="#cb45-684" aria-hidden="true" tabindex="-1"></a><span class="st">    ```r</span></span>
<span id="cb45-685"><a href="#cb45-685" aria-hidden="true" tabindex="-1"></a><span class="st">    install.packages("http://cran.r-project.org/src/contrib/Archive/MASS/MASS_7.3-60.0.1.tar.gz", repos = NULL, type = "source")</span></span>
<span id="cb45-686"><a href="#cb45-686" aria-hidden="true" tabindex="-1"></a><span class="st">    ```</span></span>
<span id="cb45-687"><a href="#cb45-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-688"><a href="#cb45-688" aria-hidden="true" tabindex="-1"></a><span class="st">1. Check if you are installing the necessary modules within your job script: </span></span>
<span id="cb45-689"><a href="#cb45-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-690"><a href="#cb45-690" aria-hidden="true" tabindex="-1"></a><span class="st">    ```r</span></span>
<span id="cb45-691"><a href="#cb45-691" aria-hidden="true" tabindex="-1"></a><span class="st">    module load stack/2022.2</span></span>
<span id="cb45-692"><a href="#cb45-692" aria-hidden="true" tabindex="-1"></a><span class="st">    module load r/4.2.2_gcc-9.5.0</span></span>
<span id="cb45-693"><a href="#cb45-693" aria-hidden="true" tabindex="-1"></a><span class="st">    ```</span></span>
<span id="cb45-694"><a href="#cb45-694" aria-hidden="true" tabindex="-1"></a><span class="st">1. Add a line to your R script to make sure it is accessing the same repository where you installed the packages manually:</span></span>
<span id="cb45-695"><a href="#cb45-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-696"><a href="#cb45-696" aria-hidden="true" tabindex="-1"></a><span class="st">    ```r</span></span>
<span id="cb45-697"><a href="#cb45-697" aria-hidden="true" tabindex="-1"></a><span class="st">    .libPaths(c("/old_Users/HAWKID/Rlibs", </span></span>
<span id="cb45-698"><a href="#cb45-698" aria-hidden="true" tabindex="-1"></a><span class="st">            "/cvmfs/argon.hpc.uiowa.edu/2022.2/apps/linux-centos7-broadwell/gcc-9.5.0/r-4.2.2-lv7yirk/rlib/R/library"))</span></span>
<span id="cb45-699"><a href="#cb45-699" aria-hidden="true" tabindex="-1"></a><span class="st">    ```</span></span>
<span id="cb45-700"><a href="#cb45-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-701"><a href="#cb45-701" aria-hidden="true" tabindex="-1"></a><span class="st">1. If the prior steps fail, email research-computing@uiowa.edu with the error, asking for help to figure out how to install the packages.</span></span>
<span id="cb45-702"><a href="#cb45-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-703"><a href="#cb45-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-704"><a href="#cb45-704" aria-hidden="true" tabindex="-1"></a><span class="st">## Error When Installing Packages from Source</span></span>
<span id="cb45-705"><a href="#cb45-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-706"><a href="#cb45-706" aria-hidden="true" tabindex="-1"></a><span class="st">You may have to set environment variables in each module file to help the compiler find headers and libraries.</span></span>
<span id="cb45-707"><a href="#cb45-707" aria-hidden="true" tabindex="-1"></a><span class="st">Note that if you run into any C++ code, you will need to set the `CPLUS_INCLUDE_PATH` variable.</span></span>
<span id="cb45-708"><a href="#cb45-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-709"><a href="#cb45-709" aria-hidden="true" tabindex="-1"></a><span class="st">### `nloptr`</span></span>
<span id="cb45-710"><a href="#cb45-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-711"><a href="#cb45-711" aria-hidden="true" tabindex="-1"></a><span class="st">1. Run the following commands</span></span>
<span id="cb45-712"><a href="#cb45-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-713"><a href="#cb45-713" aria-hidden="true" tabindex="-1"></a><span class="st">```bash</span></span>
<span id="cb45-714"><a href="#cb45-714" aria-hidden="true" tabindex="-1"></a><span class="st">module load stack/2022.1</span></span>
<span id="cb45-715"><a href="#cb45-715" aria-hidden="true" tabindex="-1"></a><span class="st">module load r/4.1.3_gcc-9.4.0</span></span>
<span id="cb45-716"><a href="#cb45-716" aria-hidden="true" tabindex="-1"></a><span class="st">module load nlopt</span></span>
<span id="cb45-717"><a href="#cb45-717" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-718"><a href="#cb45-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-719"><a href="#cb45-719" aria-hidden="true" tabindex="-1"></a><span class="st">2. Set `LIBRARY_PATH` so linker can find library while launching `R` session (single line below):</span></span>
<span id="cb45-720"><a href="#cb45-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-721"><a href="#cb45-721" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-722"><a href="#cb45-722" aria-hidden="true" tabindex="-1"></a><span class="st">LIBRARY_PATH=$ROOT_NLOPT/lib64:$LIBRARY_PATH R</span></span>
<span id="cb45-723"><a href="#cb45-723" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-724"><a href="#cb45-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-725"><a href="#cb45-725" aria-hidden="true" tabindex="-1"></a><span class="st">3. In `R` console, install `nloptr` (two lines below)</span></span>
<span id="cb45-726"><a href="#cb45-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-729"><a href="#cb45-729" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-730"><a href="#cb45-730" aria-hidden="true" tabindex="-1"></a><span class="st">#| eval: false</span></span>
<span id="cb45-731"><a href="#cb45-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-732"><a href="#cb45-732" aria-hidden="true" tabindex="-1"></a><span class="st">install.packages(verbose = 1, "nloptr")</span></span>
<span id="cb45-733"><a href="#cb45-733" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-734"><a href="#cb45-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-735"><a href="#cb45-735" aria-hidden="true" tabindex="-1"></a><span class="st">### `tkrplot`</span></span>
<span id="cb45-736"><a href="#cb45-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-737"><a href="#cb45-737" aria-hidden="true" tabindex="-1"></a><span class="st">1. Run the following commands</span></span>
<span id="cb45-738"><a href="#cb45-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-739"><a href="#cb45-739" aria-hidden="true" tabindex="-1"></a><span class="st">```bash</span></span>
<span id="cb45-740"><a href="#cb45-740" aria-hidden="true" tabindex="-1"></a><span class="st">module load stack/2022.1</span></span>
<span id="cb45-741"><a href="#cb45-741" aria-hidden="true" tabindex="-1"></a><span class="st">module load r/4.1.3_gcc-9.4.0</span></span>
<span id="cb45-742"><a href="#cb45-742" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-743"><a href="#cb45-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-744"><a href="#cb45-744" aria-hidden="true" tabindex="-1"></a><span class="st">2. Set LIBRARY_PATH so linker can find library while launching `R` session (single line below):</span></span>
<span id="cb45-745"><a href="#cb45-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-746"><a href="#cb45-746" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-747"><a href="#cb45-747" aria-hidden="true" tabindex="-1"></a><span class="st">C_INCLUDE_PATH=$ROOT_XPROTO/include LIBRARY_PATH=$ROOT_LIBXEXT/lib:$ROOT_LIBXSCRNSAVER/lib R</span></span>
<span id="cb45-748"><a href="#cb45-748" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-749"><a href="#cb45-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-750"><a href="#cb45-750" aria-hidden="true" tabindex="-1"></a><span class="st">3. In `R` console, install `tkrplot` (two lines below)</span></span>
<span id="cb45-751"><a href="#cb45-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-754"><a href="#cb45-754" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-755"><a href="#cb45-755" aria-hidden="true" tabindex="-1"></a><span class="st">#| eval: false</span></span>
<span id="cb45-756"><a href="#cb45-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-757"><a href="#cb45-757" aria-hidden="true" tabindex="-1"></a><span class="st">install.packages(verbose = 1, "tkrplot")</span></span>
<span id="cb45-758"><a href="#cb45-758" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-759"><a href="#cb45-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-760"><a href="#cb45-760" aria-hidden="true" tabindex="-1"></a><span class="st">## Error Reading from Connection</span></span>
<span id="cb45-761"><a href="#cb45-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-762"><a href="#cb45-762" aria-hidden="true" tabindex="-1"></a><span class="st">```r</span></span>
<span id="cb45-763"><a href="#cb45-763" aria-hidden="true" tabindex="-1"></a><span class="st">Error in unserialize(node$con) : error reading from connection</span></span>
<span id="cb45-764"><a href="#cb45-764" aria-hidden="true" tabindex="-1"></a><span class="st">Calls: parlmice ... FUN -&gt; recvData -&gt; recvData.SOCK0node -&gt; unserialize</span></span>
<span id="cb45-765"><a href="#cb45-765" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-766"><a href="#cb45-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-767"><a href="#cb45-767" aria-hidden="true" tabindex="-1"></a><span class="st">There likely wasn'</span>t sufficient memory <span class="cf">for</span> a given core.</span>
<span id="cb45-768"><a href="#cb45-768" aria-hidden="true" tabindex="-1"></a>Try increasing the max memory available and decreasing the number of cores and<span class="sc">/</span>or slots, so there is more memory available per core<span class="sc">:</span></span>
<span id="cb45-769"><a href="#cb45-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-770"><a href="#cb45-770" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span>https<span class="sc">:</span><span class="er">//</span>stackoverflow.com<span class="sc">/</span>questions<span class="sc">/</span><span class="dv">46186375</span><span class="sc">/</span>r<span class="sc">-</span>parallel<span class="sc">-</span>error<span class="sc">-</span><span class="cf">in</span><span class="sc">-</span>unserializenodecon<span class="sc">-</span><span class="cf">in</span><span class="sc">-</span>hpc<span class="sc">&gt;</span> (archived at <span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>perma.cc<span class="sc">/</span>MF6V<span class="sc">-</span>NAVS<span class="sc">&gt;</span>)</span>
<span id="cb45-771"><a href="#cb45-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-772"><a href="#cb45-772" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>stackoverflow.com<span class="sc">/</span>questions<span class="sc">/</span><span class="dv">17015598</span><span class="sc">/</span>error<span class="sc">-</span>calling<span class="sc">-</span>serialize<span class="sc">-</span>r<span class="sc">-</span><span class="cf">function</span><span class="sc">&gt;</span> (archived at <span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>perma.cc<span class="sc">/</span><span class="dv">3</span>Q75<span class="sc">-</span>DA2D<span class="sc">&gt;</span>)</span>
<span id="cb45-773"><a href="#cb45-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-774"><a href="#cb45-774" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>gforge.se<span class="sc">/</span><span class="dv">2015</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span>how<span class="sc">-</span>to<span class="sc">-</span>go<span class="sc">-</span>parallel<span class="sc">-</span><span class="cf">in</span><span class="sc">-</span>r<span class="sc">-</span>basics<span class="sc">-</span>tips<span class="sc">/</span><span class="co">#Memory_load&gt; (archived at &lt;https://perma.cc/2JRF-8Y5F&gt;)</span></span>
<span id="cb45-775"><a href="#cb45-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-776"><a href="#cb45-776" aria-hidden="true" tabindex="-1"></a><span class="co"># Appendix {#sec-appendix}</span></span>
<span id="cb45-777"><a href="#cb45-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-778"><a href="#cb45-778" aria-hidden="true" tabindex="-1"></a><span class="do">## Old Stacks</span></span>
<span id="cb45-779"><a href="#cb45-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-780"><a href="#cb45-780" aria-hidden="true" tabindex="-1"></a><span class="do">### Stack 2022.1</span></span>
<span id="cb45-781"><a href="#cb45-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-782"><a href="#cb45-782" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">bash</span></span>
<span id="cb45-783"><a href="#cb45-783" aria-hidden="true" tabindex="-1"></a><span class="at">module load stack/2022.1</span></span>
<span id="cb45-784"><a href="#cb45-784" aria-hidden="true" tabindex="-1"></a><span class="at">module load r/4.1.3_gcc-9.4.0</span></span>
<span id="cb45-785"><a href="#cb45-785" aria-hidden="true" tabindex="-1"></a><span class="at">cd path</span></span>
<span id="cb45-786"><a href="#cb45-786" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-787"><a href="#cb45-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-788"><a href="#cb45-788" aria-hidden="true" tabindex="-1"></a><span class="do">### Stack 2021.1</span></span>
<span id="cb45-789"><a href="#cb45-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-790"><a href="#cb45-790" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">bash</span></span>
<span id="cb45-791"><a href="#cb45-791" aria-hidden="true" tabindex="-1"></a><span class="at">module load stack/2021.1</span></span>
<span id="cb45-792"><a href="#cb45-792" aria-hidden="true" tabindex="-1"></a><span class="at">module load r/4.0.5_gcc-9.3.0</span></span>
<span id="cb45-793"><a href="#cb45-793" aria-hidden="true" tabindex="-1"></a><span class="at">cd path</span></span>
<span id="cb45-794"><a href="#cb45-794" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-795"><a href="#cb45-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-796"><a href="#cb45-796" aria-hidden="true" tabindex="-1"></a><span class="do">### Stack 2020.2</span></span>
<span id="cb45-797"><a href="#cb45-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-798"><a href="#cb45-798" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">bash</span></span>
<span id="cb45-799"><a href="#cb45-799" aria-hidden="true" tabindex="-1"></a><span class="at">module load stack/2020.2</span></span>
<span id="cb45-800"><a href="#cb45-800" aria-hidden="true" tabindex="-1"></a><span class="at">module load r/4.0.2_gcc-8.4.0</span></span>
<span id="cb45-801"><a href="#cb45-801" aria-hidden="true" tabindex="-1"></a><span class="at">cd path</span></span>
<span id="cb45-802"><a href="#cb45-802" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-803"><a href="#cb45-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-804"><a href="#cb45-804" aria-hidden="true" tabindex="-1"></a><span class="do">### Stack 2020.1</span></span>
<span id="cb45-805"><a href="#cb45-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-806"><a href="#cb45-806" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">bash</span></span>
<span id="cb45-807"><a href="#cb45-807" aria-hidden="true" tabindex="-1"></a><span class="at">module load stack/2020.1</span></span>
<span id="cb45-808"><a href="#cb45-808" aria-hidden="true" tabindex="-1"></a><span class="at">module load r/3.6.2_gcc-9.2.0</span></span>
<span id="cb45-809"><a href="#cb45-809" aria-hidden="true" tabindex="-1"></a><span class="at">cd path</span></span>
<span id="cb45-810"><a href="#cb45-810" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span>
<span id="cb45-811"><a href="#cb45-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-812"><a href="#cb45-812" aria-hidden="true" tabindex="-1"></a><span class="do">## Managing packages for a project using `packrat`</span></span>
<span id="cb45-813"><a href="#cb45-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-814"><a href="#cb45-814" aria-hidden="true" tabindex="-1"></a>Please note<span class="sc">:</span> we now use [<span class="st">`</span><span class="at">renv</span><span class="st">`</span>](<span class="co">#sec-renv) rather than `packrat` for package management</span></span>
<span id="cb45-815"><a href="#cb45-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-816"><a href="#cb45-816" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>uiowa.atlassian.net<span class="sc">/</span>wiki<span class="sc">/</span>spaces<span class="sc">/</span>hpcdocs<span class="sc">/</span>pages<span class="sc">/</span><span class="dv">76514803</span><span class="sc">/</span>Adding<span class="sc">+</span>R<span class="sc">+</span>programs<span class="sc">+</span>to<span class="sc">+</span>a<span class="sc">+</span>personal<span class="sc">+</span>library<span class="sc">&gt;</span> (archived at <span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>perma.cc<span class="sc">/</span><span class="dv">3</span>SRR<span class="dv">-2</span>JE7<span class="sc">&gt;</span>)</span>
<span id="cb45-817"><a href="#cb45-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-818"><a href="#cb45-818" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Create a directory where you want you want to store the project.</span>
<span id="cb45-819"><a href="#cb45-819" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">cd</span><span class="st">`</span> to the above directory</span>
<span id="cb45-820"><a href="#cb45-820" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Start R</span>
<span id="cb45-821"><a href="#cb45-821" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Load the <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> package<span class="sc">:</span> <span class="st">`</span><span class="at">library("packrat")</span><span class="st">`</span></span>
<span id="cb45-822"><a href="#cb45-822" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> At the <span class="st">`</span><span class="at">R</span><span class="st">`</span> prompt, initialize the <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> project on the local repository of <span class="st">`</span><span class="at">R</span><span class="st">`</span> packages with<span class="sc">:</span> <span class="st">`</span><span class="at">packrat::init(project = "/Users/itpetersen/Documents/Projects/INSERT_PROJECT_NAME/", options = list(local.repos = "/Users/itpetersen/R/x86_64-pc-linux-gnu-library/4.0"))</span><span class="st">`</span></span>
<span id="cb45-823"><a href="#cb45-823" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> You must restart your <span class="st">`</span><span class="at">R</span><span class="st">`</span> session <span class="cf">in</span> the given project directory after running init <span class="cf">in</span> order <span class="cf">for</span> the changes to take effect<span class="sc">!</span></span>
<span id="cb45-824"><a href="#cb45-824" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> From this point on you are working <span class="cf">in</span> a <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> project.</span>
<span id="cb45-825"><a href="#cb45-825" aria-hidden="true" tabindex="-1"></a>Installed packages will go into a library within this project.</span>
<span id="cb45-826"><a href="#cb45-826" aria-hidden="true" tabindex="-1"></a>After initializing the <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> project on the local repository of <span class="st">`</span><span class="at">R</span><span class="st">`</span> packages, packages from the local repository can be installed with <span class="st">`</span><span class="at">packrat::install_local()</span><span class="st">`</span><span class="sc">:</span></span>
<span id="cb45-827"><a href="#cb45-827" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span> <span class="st">`</span><span class="at">packrat::install_local("package_name")</span><span class="st">`</span></span>
<span id="cb45-828"><a href="#cb45-828" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> To restart a packrat project simply start <span class="st">`</span><span class="at">R</span><span class="st">`</span> from the directory created <span class="cf">in</span> <span class="fu">step</span> (<span class="dv">1</span>). The project will initialize automatically.</span>
<span id="cb45-829"><a href="#cb45-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-830"><a href="#cb45-830" aria-hidden="true" tabindex="-1"></a>To save the current state of your library<span class="sc">:</span> <span class="st">`</span><span class="at">packrat::snapshot()</span><span class="st">`</span>; <span class="cf">if</span> that command fails due to an error when fetching sources, try <span class="st">`</span><span class="at">packrat::snapshot(snapshot.sources = FALSE)</span><span class="st">`</span> </span>
<span id="cb45-831"><a href="#cb45-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-832"><a href="#cb45-832" aria-hidden="true" tabindex="-1"></a>To disable <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> on a project<span class="sc">:</span> <span class="st">`</span><span class="at">disable(restart = FALSE)</span><span class="st">`</span></span>
<span id="cb45-833"><a href="#cb45-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-834"><a href="#cb45-834" aria-hidden="true" tabindex="-1"></a><span class="do">### To install a new package for a project after `packrat` has been initialized</span></span>
<span id="cb45-835"><a href="#cb45-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-836"><a href="#cb45-836" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> First, load the <span class="st">`</span><span class="at">R</span><span class="st">`</span> environment <span class="fu">module</span> (see <span class="st">`</span><span class="at">Install R packages</span><span class="st">`</span> section above)</span>
<span id="cb45-837"><a href="#cb45-837" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> cd to the directory of the <span class="st">`</span><span class="at">R</span><span class="st">`</span> project</span>
<span id="cb45-838"><a href="#cb45-838" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> launch R</span>
<span id="cb45-839"><a href="#cb45-839" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span> <span class="st">`</span><span class="at">R</span><span class="st">`</span></span>
<span id="cb45-840"><a href="#cb45-840" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> then install the package, (the code below uses a generic <span class="st">`</span><span class="at">package_name</span><span class="st">`</span>)<span class="sc">:</span></span>
<span id="cb45-841"><a href="#cb45-841" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span> <span class="st">`</span><span class="at">install.packages("package_name", repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)</span><span class="st">`</span></span>
<span id="cb45-842"><a href="#cb45-842" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span> <span class="st">`</span><span class="at">install.packages(c("packrat","psych","tidyverse","data.table","nlme","lme4","mirt","TeachingDemos","Amelia","mice","miceadds","abind","future","lavaan","blavaan","Rcpp","igraph","shinystan","StanHeaders","brms","rstan","rjags","renv"), repos = "http://cran.r-project.org", type = "source", dependencies = TRUE, Ncpus = 40)</span><span class="st">`</span></span>
<span id="cb45-843"><a href="#cb45-843" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">packrat::snapshot()</span><span class="st">`</span>; <span class="cf">if</span> that command fails due to an error when fetching sources, try <span class="st">`</span><span class="at">packrat::snapshot(snapshot.sources = FALSE)</span><span class="st">`</span></span>
<span id="cb45-844"><a href="#cb45-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-845"><a href="#cb45-845" aria-hidden="true" tabindex="-1"></a><span class="do">### Build `packrat` environment on a compute node (only if necessary if package load fails due to issues building packages)</span></span>
<span id="cb45-846"><a href="#cb45-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-847"><a href="#cb45-847" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">qlogin</span><span class="st">`</span> <span class="sc">--</span> <span class="cf">for</span> more info, see here<span class="sc">:</span> <span class="er">&lt;</span>https<span class="sc">:</span><span class="er">//</span>uiowa.atlassian.net<span class="sc">/</span>wiki<span class="sc">/</span>spaces<span class="sc">/</span>hpcdocs<span class="sc">/</span>pages<span class="sc">/</span><span class="dv">76513454</span><span class="sc">/</span>Qlogin<span class="sc">+</span><span class="cf">for</span><span class="sc">+</span>Interactive<span class="sc">+</span>Sessions<span class="sc">&gt;</span> (archived at <span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>perma.cc<span class="sc">/</span>Y3A9<span class="sc">-</span>WQ3W<span class="sc">&gt;</span>)</span>
<span id="cb45-848"><a href="#cb45-848" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">module load stack/2020.2-base_arch</span><span class="st">`</span> <span class="sc">--</span> this will ensure that the modules point to the lowest common multiarchitecture on Argon and will run on all nodes</span>
<span id="cb45-849"><a href="#cb45-849" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">module load r</span><span class="st">`</span></span>
<span id="cb45-850"><a href="#cb45-850" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> cd to the directory of the <span class="st">`</span><span class="at">R</span><span class="st">`</span> project</span>
<span id="cb45-851"><a href="#cb45-851" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">R</span><span class="st">`</span></span>
<span id="cb45-852"><a href="#cb45-852" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Create <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> <span class="fu">project</span> (see above)</span>
<span id="cb45-853"><a href="#cb45-853" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Install packages</span>
<span id="cb45-854"><a href="#cb45-854" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Take a package snapshot using <span class="st">`</span><span class="at">packrat</span><span class="st">`</span></span>
<span id="cb45-855"><a href="#cb45-855" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> <span class="st">`</span><span class="at">exit</span><span class="st">`</span> <span class="sc">--</span> to exit the qlogin session</span>
<span id="cb45-856"><a href="#cb45-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-857"><a href="#cb45-857" aria-hidden="true" tabindex="-1"></a>Note<span class="sc">:</span> Your <span class="st">`</span><span class="at">packrat</span><span class="st">`</span> environment will then be linked to the proper <span class="st">`</span><span class="at">glpk</span><span class="st">`</span> library and will run on any Argon node.</span>
<span id="cb45-858"><a href="#cb45-858" aria-hidden="true" tabindex="-1"></a>You do not need to use the <span class="st">`</span><span class="at">2020.2-base_arch</span><span class="st">`</span> module at run time, only build time.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/DevPsyLab/DataAnalysis/edit/main/hpc.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/DevPsyLab/DataAnalysis/blob/main/hpc.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/DevPsyLab/DataAnalysis/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>