<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Multiple Imputation</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TYR0QMREEW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TYR0QMREEW');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="includes/custom.css" type="text/css" />
<link rel="stylesheet" href="font/css/roboto.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Analysis Guides for the Developmental Psychopathology Lab</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="adobe.html">Adobe</a>
    </li>
    <li>
      <a href="bayesian.html">Bayesian Analysis</a>
    </li>
    <li>
      <a href="dataManagement.html">Data Management</a>
    </li>
    <li>
      <a href="developmentalScaling.html">Developmental Scaling</a>
    </li>
    <li>
      <a href="eegERP.html">Electroencaphalography/Event-Related Potentials</a>
    </li>
    <li>
      <a href="eda.html">Exploratory Data Analysis</a>
    </li>
    <li>
      <a href="factorAnalysis.html">Factor Analysis</a>
    </li>
    <li>
      <a href="figures.html">Figures</a>
    </li>
    <li>
      <a href="git.html">Git, GitLab, and GitHub</a>
    </li>
    <li>
      <a href="hlm.html">Hierarchical Linear Modeling</a>
    </li>
    <li>
      <a href="irt.html">Item Response Theory</a>
    </li>
    <li>
      <a href="jamovi.html">jamovi</a>
    </li>
    <li>
      <a href="lda.html">Longitudinal Data Analysis</a>
    </li>
    <li>
      <a href="markdown.html">Markdown</a>
    </li>
    <li>
      <a href="sem.html#mediation">Mediation</a>
    </li>
    <li>
      <a href="regression.html#moderation">Moderation/Interaction</a>
    </li>
    <li>
      <a href="multipleImputation.html">Multiple Imputation</a>
    </li>
    <li>
      <a href="osf.html">Open Science Framework</a>
    </li>
    <li>
      <a href="pca.html">Principal Component Analysis</a>
    </li>
    <li>
      <a href="R.html">R</a>
    </li>
    <li>
      <a href="regression.html">Regression</a>
    </li>
    <li>
      <a href="SPSS.html">SPSS</a>
    </li>
    <li>
      <a href="sem.html">Structural Equation Modeling</a>
    </li>
  </ul>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://devpsylab.github.io/LabWiki">Lab Wiki</a>
</li>
<li>
  <a href="https://developmental-psychopathology.lab.uiowa.edu">Lab Website</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Multiple Imputation</h1>

</div>


<div id="preamble" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Preamble</h1>
<div id="install-libraries" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Install
Libraries</h2>
<pre class="r fold-show"><code>#install.packages(&quot;remotes&quot;)
#remotes::install_github(&quot;DevPsyLab/petersenlab&quot;)</code></pre>
</div>
<div id="load-libraries" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Load Libraries</h2>
<pre class="r fold-show"><code>library(&quot;tidyverse&quot;)
library(&quot;psych&quot;)
library(&quot;mice&quot;)
library(&quot;micemd&quot;)
library(&quot;miceadds&quot;)
library(&quot;mitml&quot;)
library(&quot;Amelia&quot;)
library(&quot;jomo&quot;)
library(&quot;parallel&quot;)
library(&quot;future&quot;)
library(&quot;furrr&quot;)
library(&quot;nlme&quot;)
library(&quot;MplusAutomation&quot;)</code></pre>
</div>
<div id="data" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Data</h2>
<pre class="r fold-show"><code>data(Oxboys, package = &quot;nlme&quot;)

Oxboys_addNA &lt;- data.frame(Oxboys)
Oxboys_addNA &lt;- Oxboys_addNA %&gt;% 
  rename(id = Subject)

Oxboys_addNA$id &lt;- as.integer(Oxboys_addNA$id)
Oxboys_addNA$Occasion &lt;- as.integer(Oxboys_addNA$Occasion)

set.seed(52242)
Oxboys_addNA[sample(1:nrow(Oxboys_addNA), 25), &quot;height&quot;] &lt;- NA

dataToImpute &lt;- Oxboys_addNA
varsToImpute &lt;- c(&quot;height&quot;)
Y &lt;- varsToImpute</code></pre>
</div>
</div>
<div id="types-of-missingness" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Types of
Missingness</h1>
<ol style="list-style-type: decimal">
<li>Missing Completely at Random (MCAR)
<ul>
<li>the probability of being missing is the same for all cases</li>
<li>missingness is not related to variables in the model</li>
</ul></li>
<li>(Conditionally) Missing at Random (MAR)
<ul>
<li>missingness is related to variables in the model, but once we
condition on the variables in the model, the missingness is
haphazard</li>
<li>the unobserved values do not play a role</li>
</ul></li>
<li>Missing Not at Random (MNAR)
<ul>
<li>missingness is related to variables that are not in the model (i.e.,
for reasons that are unknown)</li>
<li>unobserved variables carry information about whether a case will
have missing data</li>
</ul></li>
</ol>
</div>
<div id="approaches-to-handle-missing-data" class="section level1"
number="3">
<h1><span class="header-section-number">3</span> Approaches to Handle
Missing Data</h1>
<div id="for-mcarmar-missingness" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> For MCAR/MAR
Missingness</h2>
<ol style="list-style-type: decimal">
<li>Full Information Maximum Likelihood (FIML)</li>
<li>Multiple Imputation</li>
</ol>
</div>
<div id="for-mnar-missingness" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> For MNAR
Missingness</h2>
<p><a href="https://stefvanbuuren.name/fimd/sec-nonignorable.html"
class="uri">https://stefvanbuuren.name/fimd/sec-nonignorable.html</a></p>
<p><a
href="https://cran.r-project.org/web/packages/missingHE/vignettes/Fitting_MNAR_models_in_missingHE.html"
class="uri">https://cran.r-project.org/web/packages/missingHE/vignettes/Fitting_MNAR_models_in_missingHE.html</a></p>
<ol style="list-style-type: decimal">
<li>find more data about the causes for the missingness</li>
<li>sensitivity analyses (what-if analyses) to see how sensitive the
results are under various scenarios
<ul>
<li><a href="https://stefvanbuuren.name/fimd/sec-MCAR.html"
class="uri">https://stefvanbuuren.name/fimd/sec-MCAR.html</a></li>
</ul></li>
<li>selection models
<ul>
<li>simultaneously estimate the focal model and a missingness model,
where the missingness model has the missing data indicator as a
dependent variable, as predicted by the original dependent variable, the
original predictors, and any additional covariates etc.</li>
<li>if the missingness model is approximately correct, the focal model
adjusts in way that removes nonresponse bias</li>
<li>similar to a mediation process
<ul>
<li>X → Y</li>
<li>Y → missingness</li>
<li>X → missingness</li>
</ul></li>
<li><a href="https://quantitudepod.org/s4e08-craig-enders/"
class="uri">https://quantitudepod.org/s4e08-craig-enders/</a></li>
</ul></li>
<li>pattern-mixture models
<ul>
<li>missing data indicator is a predictor variable</li>
<li>similar to a moderation process; subgroups of cases have different
parameter estimates</li>
</ul></li>
</ol>
</div>
</div>
<div id="approaches-to-multiple-imputation" class="section level1"
number="4">
<h1><span class="header-section-number">4</span> Approaches to Multiple
Imputation</h1>
<ul>
<li>multiple imputation by joint modeling
<ul>
<li>assumes that the variables in follow a joint distribution, e.g.:
<ul>
<li>multivariate normal (i.e., multivariate normal imputation)</li>
</ul></li>
<li>R packages:
<ul>
<li><code>jomo</code></li>
<li><code>pan</code></li>
<li><code>Amelia</code></li>
<li><code>Mplus</code></li>
</ul></li>
</ul></li>
<li>multiple imputation by chained equations
<ul>
<li>aka:
<ul>
<li>fully conditional specification multiple imputation</li>
<li>sequential regression multiple imputation</li>
</ul></li>
<li>R packages:
<ul>
<li><code>mice</code>
<ul>
<li>predictive mean matching (<code>?mice::mice.impute.pmm</code>) can
be useful to obtain bounded imputations for non-normally distributed
variables</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="describe-missing-data" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Describe Missing
Data</h1>
<pre class="r fold-show"><code>describe(dataToImpute)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["vars"],"name":[1],"type":["int"],"align":["right"]},{"label":["n"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["sd"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["median"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["trimmed"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["mad"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["range"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["skew"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["kurtosis"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["se"],"name":[13],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"234","3":"13.50000000","4":"7.5160772","5":"13.5000","6":"13.50000000","7":"9.6369000","8":"1.0","9":"26.0000","10":"25.0000","11":"0.00000000","12":"-1.21887697","13":"0.49134134","_rn_":"id"},{"1":"2","2":"234","3":"0.02263462","4":"0.6479585","5":"-0.0027","6":"0.02871383","7":"0.8286251","8":"-1.0","9":"1.0055","10":"2.0055","11":"-0.05158503","12":"-1.22960788","13":"0.04235837","_rn_":"age"},{"1":"3","2":"209","3":"149.69014354","4":"9.2886034","5":"149.7800","6":"149.59437870","7":"8.7176880","8":"126.2","9":"174.8000","10":"48.6000","11":"0.11228667","12":"0.02860264","13":"0.64250613","_rn_":"height"},{"1":"4","2":"234","3":"5.00000000","4":"2.5875237","5":"5.0000","6":"5.00000000","7":"2.9652000","8":"1.0","9":"9.0000","10":"8.0000","11":"0.00000000","12":"-1.24509588","13":"0.16915172","_rn_":"Occasion"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r fold-show"><code>md.pattern(dataToImpute, rotate.names = TRUE)</code></pre>
<p><img src="multipleImputation_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre><code>    id age Occasion height   
209  1   1        1      1  0
25   1   1        1      0  1
     0   0        0     25 25</code></pre>
</div>
<div id="pre-imputation-setup" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Pre-Imputation
Setup</h1>
<div id="specify-number-of-imputations" class="section level2"
number="6.1">
<h2><span class="header-section-number">6.1</span> Specify Number of
Imputations</h2>
<pre class="r fold-show"><code>numImputations &lt;- 5 # generally use 100 imputations; this example uses 5 for speed</code></pre>
</div>
<div id="detect-cores" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Detect Cores</h2>
<pre class="r fold-show"><code>numCores &lt;- parallel::detectCores() - 1</code></pre>
</div>
</div>
<div id="multilevel-multiple-imputation" class="section level1"
number="7">
<h1><span class="header-section-number">7</span> Multilevel Multiple
Imputation</h1>
<div id="three-level-and-cross-classified-data" class="section level2"
number="7.1">
<h2><span class="header-section-number">7.1</span> Three-Level and
Cross-Classified Data</h2>
<p><a
href="https://simongrund1.github.io/posts/multiple-imputation-for-three-level-and-cross-classified-data/"
class="uri">https://simongrund1.github.io/posts/multiple-imputation-for-three-level-and-cross-classified-data/</a></p>
</div>
<div id="methods" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Methods</h2>
<div id="mice" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span>
<code>mice</code></h3>
<div id="types" class="section level4" number="7.2.1.1">
<h4><span class="header-section-number">7.2.1.1</span> Types</h4>
<div id="continuous-outcomes" class="section level5" number="7.2.1.1.1">
<h5><span class="header-section-number">7.2.1.1.1</span> Continuous
Outcomes</h5>
<p><a
href="https://stefvanbuuren.name/fimd/sec-multioutcome.html#methods"
class="uri">https://stefvanbuuren.name/fimd/sec-multioutcome.html#methods</a></p>
<pre class="r fold-show"><code>?mice::mice.impute.2l.norm
?mice::mice.impute.2l.pan
?mice::mice.impute.2l.lmer
?miceadds::mice.impute.2l.pmm
?miceadds::mice.impute.2l.contextual.pmm
?miceadds::mice.impute.2l.continuous
?micemd::mice.impute.2l.2stage.norm
?micemd::mice.impute.2l.2stage.pmm
?micemd::mice.impute.2l.glm.norm
?micemd::mice.impute.2l.jomo</code></pre>
</div>
<div id="discrete-outcomes" class="section level5" number="7.2.1.1.2">
<h5><span class="header-section-number">7.2.1.1.2</span> Discrete
Outcomes</h5>
<p><a
href="https://stefvanbuuren.name/fimd/sec-catoutcome.html#methods-1"
class="uri">https://stefvanbuuren.name/fimd/sec-catoutcome.html#methods-1</a></p>
<pre class="r fold-show"><code>?mice::mice.impute.2l.bin
?miceadds::mice.impute.2l.binary
?micemd::mice.impute.2l.2stage.bin
?micemd::mice.impute.2l.glm.bin</code></pre>
</div>
</div>
<div id="specifying-the-imputation-method" class="section level4"
number="7.2.1.2">
<h4><span class="header-section-number">7.2.1.2</span> Specifying the
Imputation Method</h4>
<pre class="r fold-show"><code>meth &lt;- make.method(dataToImpute)
meth[1:length(meth)] &lt;- &quot;&quot;
meth[Y] &lt;- &quot;2l.pmm&quot; # specify the imputation method here; this can differ by outcome variable</code></pre>
</div>
<div id="specifying-the-predictor-matrix" class="section level4"
number="7.2.1.3">
<h4><span class="header-section-number">7.2.1.3</span> Specifying the
Predictor Matrix</h4>
<p>A predictor matrix is a matrix of values, where:</p>
<ul>
<li>columns with non-zero values are predictors of the variable
specified in the given row</li>
<li>the diagonal of the predictor matrix should be zero because a
variable cannot predict itself</li>
</ul>
<p>The values are:</p>
<ul>
<li>NOT a predictor of the outcome: <code>0</code></li>
<li>cluster variable: <code>-2</code></li>
<li>fixed effect of predictor: <code>1</code></li>
<li>fixed effect and random effect of predictor: <code>2</code></li>
<li>include cluster mean of predictor in addition to fixed effect of
predictor: <code>3</code></li>
<li>include cluster mean of predictor in addition to fixed effect and
random effect of predictor: <code>4</code></li>
</ul>
<pre class="r fold-show"><code>pred &lt;- make.predictorMatrix(dataToImpute)
pred[1:nrow(pred), 1:ncol(pred)] &lt;- 0
pred[Y, &quot;id&quot;] &lt;- (-2) # cluster variable
pred[Y, &quot;Occasion&quot;] &lt;- 1 # fixed effect predictor
pred[Y, &quot;age&quot;] &lt;- 2 # random effect predictor
pred[Y, Y] &lt;- 1 # fixed effect predictor

diag(pred) &lt;- 0
pred</code></pre>
<pre><code>         id age height Occasion
id        0   0      0        0
age       0   0      0        0
height   -2   2      0        1
Occasion  0   0      0        0</code></pre>
</div>
<div id="syntax" class="section level4" number="7.2.1.4">
<h4><span class="header-section-number">7.2.1.4</span> Syntax</h4>
<pre class="r fold-show"><code>mi_mice &lt;- mice(
  as.data.frame(dataToImpute),
  method = meth,
  predictorMatrix = pred,
  m = numImputations,
  maxit = 5, # generally use 100 maximum iterations; this example uses 5 for speed
  seed = 52242)</code></pre>
<pre><code>
 iter imp variable
  1   1  height
  1   2  height
  1   3  height
  1   4  height
  1   5  height
  2   1  height
  2   2  height
  2   3  height
  2   4  height
  2   5  height
  3   1  height
  3   2  height
  3   3  height
  3   4  height
  3   5  height
  4   1  height
  4   2  height
  4   3  height
  4   4  height
  4   5  height
  5   1  height
  5   2  height
  5   3  height
  5   4  height
  5   5  height</code></pre>
</div>
</div>
<div id="jomo" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span>
<code>jomo</code></h3>
<pre class="r fold-show"><code>level1Vars &lt;- c(&quot;height&quot;)
level2Vars &lt;- c(&quot;v3&quot;,&quot;v4&quot;)
clusterVars &lt;- c(&quot;id&quot;)
fullyObservedCovariates &lt;- c(&quot;age&quot;,&quot;Occasion&quot;)

set.seed(52242)

mi_jomo &lt;- jomo(
  Y = data.frame(dataToImpute[, level1Vars]),
  #Y2 = data.frame(dataToImpute[, level2Vars]),
  X = data.frame(dataToImpute[, fullyObservedCovariates]),
  clus = data.frame(dataToImpute[, clusterVars]),
  nimp = numImputations,
  meth = &quot;random&quot;
)</code></pre>
<pre><code>Clustered data, using functions for two-level imputation.
Found  1 continuous outcomes and no categorical. Using function jomo1ranconhr with random cluster-specific covariance matrices. 
..................................................
..................................................
First imputation registered. 
..................................................
..................................................
Imputation number  2 registered 
..................................................
..................................................
Imputation number  3 registered 
..................................................
..................................................
Imputation number  4 registered 
..................................................
..................................................
Imputation number  5 registered 
The posterior mean of the fixed effects estimates is:
                                 age Occasion
dataToImpute...level1Vars. -113.0757 30.04838

The posterior mean of the random effects estimates is:
   dataToImpute...level1Vars..Z1
1                   -16.20902733
2                    -8.65212774
3                    -6.73361991
4                    -8.48037088
5                    -4.01165035
6                    -0.82193207
7                    -1.06273621
8                    -4.25225948
9                    -0.08327231
10                   -3.34891121
11                    2.57532592
12                    3.66401069
13                    0.48966344
14                    3.47497904
15                    3.90412653
16                    3.19938056
17                    2.40548040
18                    3.27865186
19                    6.09683973
20                    5.55557617
21                    6.75778040
22                    8.90157501
23                    8.52601382
24                   10.62696736
25                   16.84089878
26                   17.23746838

The posterior mean of the level 1 covariance matrices is:
                              dataToImpute...level1Vars.
dataToImpute...level1Vars..1                    20.55420
dataToImpute...level1Vars..2                    21.18287
dataToImpute...level1Vars..3                    15.70618
dataToImpute...level1Vars..4                    25.93674
dataToImpute...level1Vars..5                    20.32710
dataToImpute...level1Vars..6                    25.51296
dataToImpute...level1Vars..7                    23.47148
dataToImpute...level1Vars..8                    22.76608
dataToImpute...level1Vars..9                    24.07566
dataToImpute...level1Vars..10                   26.87790
dataToImpute...level1Vars..11                   20.55911
dataToImpute...level1Vars..12                   21.56772
dataToImpute...level1Vars..13                   24.82955
dataToImpute...level1Vars..14                   17.19218
dataToImpute...level1Vars..15                   21.30695
dataToImpute...level1Vars..16                   25.49398
dataToImpute...level1Vars..17                   21.73770
dataToImpute...level1Vars..18                   20.28903
dataToImpute...level1Vars..19                   22.74839
dataToImpute...level1Vars..20                   24.93717
dataToImpute...level1Vars..21                   19.27750
dataToImpute...level1Vars..22                   17.73270
dataToImpute...level1Vars..23                   21.87620
dataToImpute...level1Vars..24                   20.96218
dataToImpute...level1Vars..25                   18.61259
dataToImpute...level1Vars..26                   20.21037

The posterior mean of the level 2 covariance matrix is:
                              dataToImpute...level1Vars..Z1
dataToImpute...level1Vars.*Z1                      66.59035</code></pre>
</div>
<div id="amelia" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span>
<code>Amelia</code></h3>
<ul>
<li><code>!</code> in the console output indicates that the current
estimated complete data covariance matrix is not invertible</li>
<li><code>*</code> in the console output indicates that the likelihood
has not monotonically increased in that step</li>
</ul>
<pre class="r fold-show"><code>boundVars &lt;- c(&quot;height&quot;)
boundCols &lt;- which(names(dataToImpute) %in% boundVars)
boundLower &lt;- 100
boundUpper &lt;- 200

varBounds &lt;- cbind(boundCols, boundLower, boundUpper)

set.seed(52242)

mi_amelia &lt;- amelia(
  dataToImpute,
  m = numImputations,
  ts = &quot;age&quot;,
  cs = &quot;id&quot;,
  polytime = 1,
  intercs = TRUE,
  #ords = ordinalVars,
  #bounds = varBounds,
  parallel = &quot;snow&quot;,
  #ncpus = numCores,
  empri = .01*nrow(dataToImpute)) # ridge prior for numerical stability</code></pre>
<pre><code>-- Imputation 1 --

  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
 21

-- Imputation 2 --

  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18

-- Imputation 3 --

  1  2  3  4  5  6  7  8

-- Imputation 4 --

  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40
 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60
 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80
 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100
 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120
 121 122 123

-- Imputation 5 --

  1  2  3  4  5  6  7  8  9 10 11 12</code></pre>
</div>
<div id="mplus" class="section level3" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span>
<code>Mplus</code></h3>
<div id="save-mplus-data-file" class="section level4" number="7.2.4.1">
<h4><span class="header-section-number">7.2.4.1</span> Save
<code>Mplus</code> Data File</h4>
<p>Save R object as <code>Mplus</code> data file:</p>
<pre class="r fold-show"><code>prepareMplusData(dataToImpute, file.path(&quot;dataToImpute.dat&quot;))</code></pre>
<pre><code>TITLE: Your title goes here
DATA: FILE = &quot;dataToImpute.dat&quot;;
VARIABLE: 
NAMES = id age height Occasion; 
MISSING=.;</code></pre>
</div>
<div id="mplus-syntax-for-multilevel-imputation" class="section level4"
number="7.2.4.2">
<h4><span class="header-section-number">7.2.4.2</span>
<code>Mplus</code> Syntax for Multilevel Imputation</h4>
<p><code>Mplus</code> syntax for multilevel imputation:</p>
<pre class="mplus"><code>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!  MPLUS SYNTAX LINES CANNOT EXCEED 90 CHARACTERS;
!!!!!  VARIABLE NAMES AND PARAMETER LABELS CANNOT EXCEED 8 CHARACTERS EACH;
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

TITLE: Model Title

DATA: FILE = &quot;dataToImpute.dat&quot;;

VARIABLE:
  NAMES = id age height Occasion;
  MISSING = .;
  USEVARIABLES ARE age height Occasion;
  !CATEGORICAL ARE INSERT_NAMES_OF_CATEGORICAL_VARIABLES_HERE;
  CLUSTER = id;

ANALYSIS:
  TYPE = twolevel basic;
  bseed = 52242;
  PROCESSORS = 2;
    
DATA IMPUTATION:
  IMPUTE = age height Occasion; !put &#39; (c)&#39; after categorical vars
  NDATASETS = 100;
  SAVE = imp*.dat</code></pre>
</div>
</div>
</div>
</div>
<div id="parallel-processing" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Parallel
Processing</h1>
<p><a
href="https://www.gerkovink.com/miceVignettes/futuremice/Vignette_futuremice.html"
class="uri">https://www.gerkovink.com/miceVignettes/futuremice/Vignette_futuremice.html</a></p>
<pre class="r fold-show"><code>mi_parallel_mice &lt;- futuremice(
  dataToImpute,
  method = meth,
  predictorMatrix = pred,
  m = numImputations,
  maxit = 5, # generally use 100 maximum iterations; this example uses 5 for speed
  parallelseed = 52242,
  n.core = numCores)</code></pre>
</div>
<div id="imputation-diagnostics" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Imputation
Diagnostics</h1>
<div id="trace-plots" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Trace Plots</h2>
<p>On convergence, the streams of the trace plots should intermingle and
be free of any trend (at the later iterations). Convergence is diagnosed
when the variance between different sequences is no larger than the
variance within each individual sequence.</p>
<ul>
<li><a href="https://stefvanbuuren.name/fimd/sec-algoptions.html"
class="uri">https://stefvanbuuren.name/fimd/sec-algoptions.html</a></li>
</ul>
<pre class="r fold-show"><code>plot(mi_mice, c(&quot;height&quot;))</code></pre>
<p><img src="multipleImputation_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="density-plots" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Density Plots</h2>
<pre class="r fold-show"><code>densityplot(mi_mice)</code></pre>
<p><img src="multipleImputation_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r fold-show"><code>densityplot(mi_mice, ~ height)</code></pre>
<p><img src="multipleImputation_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
</div>
<div id="strip-plots" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Strip Plots</h2>
<pre class="r fold-show"><code>stripplot(mi_mice)</code></pre>
<p><img src="multipleImputation_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<pre class="r fold-show"><code>stripplot(mi_mice, height ~ .imp)</code></pre>
<p><img src="multipleImputation_files/figure-html/unnamed-chunk-18-2.png" width="672" /></p>
</div>
</div>
<div id="post-processing" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Post-Processing</h1>
<div id="modifycreate-new-variables" class="section level2"
number="10.1">
<h2><span class="header-section-number">10.1</span> Modify/Create New
Variables</h2>
<div id="mice-1" class="section level3" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span>
<code>mice</code></h3>
<pre class="r fold-show"><code>mi_mice_long &lt;- complete(
  mi_mice,
  action = &quot;long&quot;,
  include = TRUE)

mi_mice_long$newVar &lt;- mi_mice_long$age * mi_mice_long$height</code></pre>
</div>
<div id="jomo-1" class="section level3" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span>
<code>jomo</code></h3>
<pre class="r fold-show"><code>mi_jomo &lt;- mi_jomo %&gt;% 
  rename(height = dataToImpute...level1Vars.)

mi_jomo$newVar &lt;- mi_jomo$age * mi_jomo$height</code></pre>
</div>
<div id="amelia-1" class="section level3" number="10.1.3">
<h3><span class="header-section-number">10.1.3</span>
<code>Amelia</code></h3>
<pre class="r fold-show"><code>for(i in 1:length(mi_amelia$imputations)){
  mi_amelia$imputations[[i]]$newVar &lt;- mi_amelia$imputations[[i]]$age * mi_amelia$imputations[[i]]$height
}</code></pre>
</div>
</div>
<div id="convert-to-mids-object" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Convert to
<code>mids</code> object</h2>
<div id="mice-2" class="section level3" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span>
<code>mice</code></h3>
<pre class="r fold-show"><code>mi_mice_mids &lt;- as.mids(mi_mice_long)</code></pre>
</div>
<div id="jomo-2" class="section level3" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span>
<code>jomo</code></h3>
<pre class="r fold-show"><code>mi_jomo_mids &lt;- miceadds::jomo2mids(mi_jomo)</code></pre>
<pre><code>Warning: Number of logged events: 1</code></pre>
</div>
<div id="amelia-2" class="section level3" number="10.2.3">
<h3><span class="header-section-number">10.2.3</span>
<code>Amelia</code></h3>
<pre class="r fold-show"><code>mi_amelia_mids &lt;- miceadds::datlist2mids(mi_amelia$imputations)</code></pre>
</div>
</div>
<div id="export-for-mplus" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Export for
<code>Mplus</code></h2>
<pre class="r fold-show"><code>mids2mplus(mi_mice_mids, path = file.path(&quot;InsertFilePathHere&quot;, fsep = &quot;&quot;))
mids2mplus(mi_jomo_mids, path = file.path(&quot;InsertFilePathHere&quot;, fsep = &quot;&quot;))
mids2mplus(mi_amelia_mids, path = file.path(&quot;InsertFilePathHere&quot;, fsep = &quot;&quot;))</code></pre>
</div>
</div>
<div id="resources" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Resources</h1>
<p><a href="https://stefvanbuuren.name/fimd"
class="uri">https://stefvanbuuren.name/fimd</a></p>
<p><a
href="https://www.gerkovink.com/miceVignettes/Multi_level/Multi_level_data.html"
class="uri">https://www.gerkovink.com/miceVignettes/Multi_level/Multi_level_data.html</a></p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTXVsdGlwbGUgSW1wdXRhdGlvbiIKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZSA9IEZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IikKYGBgCgojIFByZWFtYmxlCgojIyBJbnN0YWxsIExpYnJhcmllcwoKYGBge3J9CiNpbnN0YWxsLnBhY2thZ2VzKCJyZW1vdGVzIikKI3JlbW90ZXM6Omluc3RhbGxfZ2l0aHViKCJEZXZQc3lMYWIvcGV0ZXJzZW5sYWIiKQpgYGAKCiMjIExvYWQgTGlicmFyaWVzCgpgYGB7ciwgbWVzc2FnZSA9IEZBTFNFLCB3YXJuaW5nID0gRkFMU0V9CmxpYnJhcnkoInRpZHl2ZXJzZSIpCmxpYnJhcnkoInBzeWNoIikKbGlicmFyeSgibWljZSIpCmxpYnJhcnkoIm1pY2VtZCIpCmxpYnJhcnkoIm1pY2VhZGRzIikKbGlicmFyeSgibWl0bWwiKQpsaWJyYXJ5KCJBbWVsaWEiKQpsaWJyYXJ5KCJqb21vIikKbGlicmFyeSgicGFyYWxsZWwiKQpsaWJyYXJ5KCJmdXR1cmUiKQpsaWJyYXJ5KCJmdXJyciIpCmxpYnJhcnkoIm5sbWUiKQpsaWJyYXJ5KCJNcGx1c0F1dG9tYXRpb24iKQpgYGAKCiMjIERhdGEKCmBgYHtyfQpkYXRhKE94Ym95cywgcGFja2FnZSA9ICJubG1lIikKCk94Ym95c19hZGROQSA8LSBkYXRhLmZyYW1lKE94Ym95cykKT3hib3lzX2FkZE5BIDwtIE94Ym95c19hZGROQSAlPiUgCiAgcmVuYW1lKGlkID0gU3ViamVjdCkKCk94Ym95c19hZGROQSRpZCA8LSBhcy5pbnRlZ2VyKE94Ym95c19hZGROQSRpZCkKT3hib3lzX2FkZE5BJE9jY2FzaW9uIDwtIGFzLmludGVnZXIoT3hib3lzX2FkZE5BJE9jY2FzaW9uKQoKc2V0LnNlZWQoNTIyNDIpCk94Ym95c19hZGROQVtzYW1wbGUoMTpucm93KE94Ym95c19hZGROQSksIDI1KSwgImhlaWdodCJdIDwtIE5BCgpkYXRhVG9JbXB1dGUgPC0gT3hib3lzX2FkZE5BCnZhcnNUb0ltcHV0ZSA8LSBjKCJoZWlnaHQiKQpZIDwtIHZhcnNUb0ltcHV0ZQpgYGAKCiMgVHlwZXMgb2YgTWlzc2luZ25lc3MKCjEuIE1pc3NpbmcgQ29tcGxldGVseSBhdCBSYW5kb20gKE1DQVIpCiAgICAtIHRoZSBwcm9iYWJpbGl0eSBvZiBiZWluZyBtaXNzaW5nIGlzIHRoZSBzYW1lIGZvciBhbGwgY2FzZXMKICAgIC0gbWlzc2luZ25lc3MgaXMgbm90IHJlbGF0ZWQgdG8gdmFyaWFibGVzIGluIHRoZSBtb2RlbAoxLiAoQ29uZGl0aW9uYWxseSkgTWlzc2luZyBhdCBSYW5kb20gKE1BUikKICAgIC0gbWlzc2luZ25lc3MgaXMgcmVsYXRlZCB0byB2YXJpYWJsZXMgaW4gdGhlIG1vZGVsLCBidXQgb25jZSB3ZSBjb25kaXRpb24gb24gdGhlIHZhcmlhYmxlcyBpbiB0aGUgbW9kZWwsIHRoZSBtaXNzaW5nbmVzcyBpcyBoYXBoYXphcmQKICAgIC0gdGhlIHVub2JzZXJ2ZWQgdmFsdWVzIGRvIG5vdCBwbGF5IGEgcm9sZQoxLiBNaXNzaW5nIE5vdCBhdCBSYW5kb20gKE1OQVIpCiAgICAtIG1pc3NpbmduZXNzIGlzIHJlbGF0ZWQgdG8gdmFyaWFibGVzIHRoYXQgYXJlIG5vdCBpbiB0aGUgbW9kZWwgKGkuZS4sIGZvciByZWFzb25zIHRoYXQgYXJlIHVua25vd24pCiAgICAtIHVub2JzZXJ2ZWQgdmFyaWFibGVzIGNhcnJ5IGluZm9ybWF0aW9uIGFib3V0IHdoZXRoZXIgYSBjYXNlIHdpbGwgaGF2ZSBtaXNzaW5nIGRhdGEKCiMgQXBwcm9hY2hlcyB0byBIYW5kbGUgTWlzc2luZyBEYXRhCgojIyBGb3IgTUNBUi9NQVIgTWlzc2luZ25lc3MKCjEuIEZ1bGwgSW5mb3JtYXRpb24gTWF4aW11bSBMaWtlbGlob29kIChGSU1MKQoxLiBNdWx0aXBsZSBJbXB1dGF0aW9uCgojIyBGb3IgTU5BUiBNaXNzaW5nbmVzcwoKaHR0cHM6Ly9zdGVmdmFuYnV1cmVuLm5hbWUvZmltZC9zZWMtbm9uaWdub3JhYmxlLmh0bWwKCmh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi9wYWNrYWdlcy9taXNzaW5nSEUvdmlnbmV0dGVzL0ZpdHRpbmdfTU5BUl9tb2RlbHNfaW5fbWlzc2luZ0hFLmh0bWwKCjEuIGZpbmQgbW9yZSBkYXRhIGFib3V0IHRoZSBjYXVzZXMgZm9yIHRoZSBtaXNzaW5nbmVzcwoxLiBzZW5zaXRpdml0eSBhbmFseXNlcyAod2hhdC1pZiBhbmFseXNlcykgdG8gc2VlIGhvdyBzZW5zaXRpdmUgdGhlIHJlc3VsdHMgYXJlIHVuZGVyIHZhcmlvdXMgc2NlbmFyaW9zCiAgICAtIGh0dHBzOi8vc3RlZnZhbmJ1dXJlbi5uYW1lL2ZpbWQvc2VjLU1DQVIuaHRtbAoxLiBzZWxlY3Rpb24gbW9kZWxzCiAgICAtIHNpbXVsdGFuZW91c2x5IGVzdGltYXRlIHRoZSBmb2NhbCBtb2RlbCBhbmQgYSBtaXNzaW5nbmVzcyBtb2RlbCwgd2hlcmUgdGhlIG1pc3NpbmduZXNzIG1vZGVsIGhhcyB0aGUgbWlzc2luZyBkYXRhIGluZGljYXRvciBhcyBhIGRlcGVuZGVudCB2YXJpYWJsZSwgYXMgcHJlZGljdGVkIGJ5IHRoZSBvcmlnaW5hbCBkZXBlbmRlbnQgdmFyaWFibGUsIHRoZSBvcmlnaW5hbCBwcmVkaWN0b3JzLCBhbmQgYW55IGFkZGl0aW9uYWwgY292YXJpYXRlcyBldGMuCiAgICAtIGlmIHRoZSBtaXNzaW5nbmVzcyBtb2RlbCBpcyBhcHByb3hpbWF0ZWx5IGNvcnJlY3QsIHRoZSBmb2NhbCBtb2RlbCBhZGp1c3RzIGluIHdheSB0aGF0IHJlbW92ZXMgbm9ucmVzcG9uc2UgYmlhcwogICAgLSBzaW1pbGFyIHRvIGEgbWVkaWF0aW9uIHByb2Nlc3MKICAgICAgICAtIFgg4oaSIFkKICAgICAgICAtIFkg4oaSIG1pc3NpbmduZXNzCiAgICAgICAgLSBYIOKGkiBtaXNzaW5nbmVzcwogICAgLSBodHRwczovL3F1YW50aXR1ZGVwb2Qub3JnL3M0ZTA4LWNyYWlnLWVuZGVycy8KMS4gcGF0dGVybi1taXh0dXJlIG1vZGVscwogICAgLSBtaXNzaW5nIGRhdGEgaW5kaWNhdG9yIGlzIGEgcHJlZGljdG9yIHZhcmlhYmxlCiAgICAtIHNpbWlsYXIgdG8gYSBtb2RlcmF0aW9uIHByb2Nlc3M7IHN1Ymdyb3VwcyBvZiBjYXNlcyBoYXZlIGRpZmZlcmVudCBwYXJhbWV0ZXIgZXN0aW1hdGVzCgojIEFwcHJvYWNoZXMgdG8gTXVsdGlwbGUgSW1wdXRhdGlvbgoKLSBtdWx0aXBsZSBpbXB1dGF0aW9uIGJ5IGpvaW50IG1vZGVsaW5nCiAgICAtIGFzc3VtZXMgdGhhdCB0aGUgdmFyaWFibGVzIGluIGZvbGxvdyBhIGpvaW50IGRpc3RyaWJ1dGlvbiwgZS5nLjoKICAgICAgICAtIG11bHRpdmFyaWF0ZSBub3JtYWwgKGkuZS4sIG11bHRpdmFyaWF0ZSBub3JtYWwgaW1wdXRhdGlvbikKICAgIC0gUiBwYWNrYWdlczoKICAgICAgICAtIGBqb21vYAogICAgICAgIC0gYHBhbmAKICAgICAgICAtIGBBbWVsaWFgCiAgICAgICAgLSBgTXBsdXNgCi0gbXVsdGlwbGUgaW1wdXRhdGlvbiBieSBjaGFpbmVkIGVxdWF0aW9ucwogICAgLSBha2E6CiAgICAgICAgLSBmdWxseSBjb25kaXRpb25hbCBzcGVjaWZpY2F0aW9uIG11bHRpcGxlIGltcHV0YXRpb24KICAgICAgICAtIHNlcXVlbnRpYWwgcmVncmVzc2lvbiBtdWx0aXBsZSBpbXB1dGF0aW9uCiAgICAtIFIgcGFja2FnZXM6CiAgICAgICAgLSBgbWljZWAKICAgICAgICAgICAgLSBwcmVkaWN0aXZlIG1lYW4gbWF0Y2hpbmcgKGA/bWljZTo6bWljZS5pbXB1dGUucG1tYCkgY2FuIGJlIHVzZWZ1bCB0byBvYnRhaW4gYm91bmRlZCBpbXB1dGF0aW9ucyBmb3Igbm9uLW5vcm1hbGx5IGRpc3RyaWJ1dGVkIHZhcmlhYmxlcwoKIyBEZXNjcmliZSBNaXNzaW5nIERhdGEKCmBgYHtyfQpkZXNjcmliZShkYXRhVG9JbXB1dGUpCm1kLnBhdHRlcm4oZGF0YVRvSW1wdXRlLCByb3RhdGUubmFtZXMgPSBUUlVFKQpgYGAKCiMgUHJlLUltcHV0YXRpb24gU2V0dXAKCiMjIFNwZWNpZnkgTnVtYmVyIG9mIEltcHV0YXRpb25zCgpgYGB7cn0KbnVtSW1wdXRhdGlvbnMgPC0gNSAjIGdlbmVyYWxseSB1c2UgMTAwIGltcHV0YXRpb25zOyB0aGlzIGV4YW1wbGUgdXNlcyA1IGZvciBzcGVlZApgYGAKCiMjIERldGVjdCBDb3JlcwoKYGBge3J9Cm51bUNvcmVzIDwtIHBhcmFsbGVsOjpkZXRlY3RDb3JlcygpIC0gMQpgYGAKCiMgTXVsdGlsZXZlbCBNdWx0aXBsZSBJbXB1dGF0aW9uCgojIyBUaHJlZS1MZXZlbCBhbmQgQ3Jvc3MtQ2xhc3NpZmllZCBEYXRhCgpodHRwczovL3NpbW9uZ3J1bmQxLmdpdGh1Yi5pby9wb3N0cy9tdWx0aXBsZS1pbXB1dGF0aW9uLWZvci10aHJlZS1sZXZlbC1hbmQtY3Jvc3MtY2xhc3NpZmllZC1kYXRhLwoKIyMgTWV0aG9kcwoKIyMjIGBtaWNlYAoKIyMjIyBUeXBlcwoKIyMjIyMgQ29udGludW91cyBPdXRjb21lcwoKaHR0cHM6Ly9zdGVmdmFuYnV1cmVuLm5hbWUvZmltZC9zZWMtbXVsdGlvdXRjb21lLmh0bWwjbWV0aG9kcwoKYGBge3IsIGV2YWwgPSBGQUxTRX0KP21pY2U6Om1pY2UuaW1wdXRlLjJsLm5vcm0KP21pY2U6Om1pY2UuaW1wdXRlLjJsLnBhbgo/bWljZTo6bWljZS5pbXB1dGUuMmwubG1lcgo/bWljZWFkZHM6Om1pY2UuaW1wdXRlLjJsLnBtbQo/bWljZWFkZHM6Om1pY2UuaW1wdXRlLjJsLmNvbnRleHR1YWwucG1tCj9taWNlYWRkczo6bWljZS5pbXB1dGUuMmwuY29udGludW91cwo/bWljZW1kOjptaWNlLmltcHV0ZS4ybC4yc3RhZ2Uubm9ybQo/bWljZW1kOjptaWNlLmltcHV0ZS4ybC4yc3RhZ2UucG1tCj9taWNlbWQ6Om1pY2UuaW1wdXRlLjJsLmdsbS5ub3JtCj9taWNlbWQ6Om1pY2UuaW1wdXRlLjJsLmpvbW8KYGBgCgojIyMjIyBEaXNjcmV0ZSBPdXRjb21lcwoKaHR0cHM6Ly9zdGVmdmFuYnV1cmVuLm5hbWUvZmltZC9zZWMtY2F0b3V0Y29tZS5odG1sI21ldGhvZHMtMQoKYGBge3IsIGV2YWwgPSBGQUxTRX0KP21pY2U6Om1pY2UuaW1wdXRlLjJsLmJpbgo/bWljZWFkZHM6Om1pY2UuaW1wdXRlLjJsLmJpbmFyeQo/bWljZW1kOjptaWNlLmltcHV0ZS4ybC4yc3RhZ2UuYmluCj9taWNlbWQ6Om1pY2UuaW1wdXRlLjJsLmdsbS5iaW4KYGBgCgojIyMjIFNwZWNpZnlpbmcgdGhlIEltcHV0YXRpb24gTWV0aG9kCgpgYGB7cn0KbWV0aCA8LSBtYWtlLm1ldGhvZChkYXRhVG9JbXB1dGUpCm1ldGhbMTpsZW5ndGgobWV0aCldIDwtICIiCm1ldGhbWV0gPC0gIjJsLnBtbSIgIyBzcGVjaWZ5IHRoZSBpbXB1dGF0aW9uIG1ldGhvZCBoZXJlOyB0aGlzIGNhbiBkaWZmZXIgYnkgb3V0Y29tZSB2YXJpYWJsZQpgYGAKCiMjIyMgU3BlY2lmeWluZyB0aGUgUHJlZGljdG9yIE1hdHJpeAoKQSBwcmVkaWN0b3IgbWF0cml4IGlzIGEgbWF0cml4IG9mIHZhbHVlcywgd2hlcmU6CgotIGNvbHVtbnMgd2l0aCBub24temVybyB2YWx1ZXMgYXJlIHByZWRpY3RvcnMgb2YgdGhlIHZhcmlhYmxlIHNwZWNpZmllZCBpbiB0aGUgZ2l2ZW4gcm93Ci0gdGhlIGRpYWdvbmFsIG9mIHRoZSBwcmVkaWN0b3IgbWF0cml4IHNob3VsZCBiZSB6ZXJvIGJlY2F1c2UgYSB2YXJpYWJsZSBjYW5ub3QgcHJlZGljdCBpdHNlbGYKClRoZSB2YWx1ZXMgYXJlOgoKLSBOT1QgYSBwcmVkaWN0b3Igb2YgdGhlIG91dGNvbWU6IGAwYAotIGNsdXN0ZXIgdmFyaWFibGU6IGAtMmAKLSBmaXhlZCBlZmZlY3Qgb2YgcHJlZGljdG9yOiBgMWAKLSBmaXhlZCBlZmZlY3QgYW5kIHJhbmRvbSBlZmZlY3Qgb2YgcHJlZGljdG9yOiBgMmAKLSBpbmNsdWRlIGNsdXN0ZXIgbWVhbiBvZiBwcmVkaWN0b3IgaW4gYWRkaXRpb24gdG8gZml4ZWQgZWZmZWN0IG9mIHByZWRpY3RvcjogYDNgCi0gaW5jbHVkZSBjbHVzdGVyIG1lYW4gb2YgcHJlZGljdG9yIGluIGFkZGl0aW9uIHRvIGZpeGVkIGVmZmVjdCBhbmQgcmFuZG9tIGVmZmVjdCBvZiBwcmVkaWN0b3I6IGA0YAoKYGBge3J9CnByZWQgPC0gbWFrZS5wcmVkaWN0b3JNYXRyaXgoZGF0YVRvSW1wdXRlKQpwcmVkWzE6bnJvdyhwcmVkKSwgMTpuY29sKHByZWQpXSA8LSAwCnByZWRbWSwgImlkIl0gPC0gKC0yKSAjIGNsdXN0ZXIgdmFyaWFibGUKcHJlZFtZLCAiT2NjYXNpb24iXSA8LSAxICMgZml4ZWQgZWZmZWN0IHByZWRpY3RvcgpwcmVkW1ksICJhZ2UiXSA8LSAyICMgcmFuZG9tIGVmZmVjdCBwcmVkaWN0b3IKcHJlZFtZLCBZXSA8LSAxICMgZml4ZWQgZWZmZWN0IHByZWRpY3RvcgoKZGlhZyhwcmVkKSA8LSAwCnByZWQKYGBgCgojIyMjIFN5bnRheAoKYGBge3J9Cm1pX21pY2UgPC0gbWljZSgKICBhcy5kYXRhLmZyYW1lKGRhdGFUb0ltcHV0ZSksCiAgbWV0aG9kID0gbWV0aCwKICBwcmVkaWN0b3JNYXRyaXggPSBwcmVkLAogIG0gPSBudW1JbXB1dGF0aW9ucywKICBtYXhpdCA9IDUsICMgZ2VuZXJhbGx5IHVzZSAxMDAgbWF4aW11bSBpdGVyYXRpb25zOyB0aGlzIGV4YW1wbGUgdXNlcyA1IGZvciBzcGVlZAogIHNlZWQgPSA1MjI0MikKYGBgCgojIyMgYGpvbW9gCgpgYGB7cn0KbGV2ZWwxVmFycyA8LSBjKCJoZWlnaHQiKQpsZXZlbDJWYXJzIDwtIGMoInYzIiwidjQiKQpjbHVzdGVyVmFycyA8LSBjKCJpZCIpCmZ1bGx5T2JzZXJ2ZWRDb3ZhcmlhdGVzIDwtIGMoImFnZSIsIk9jY2FzaW9uIikKCnNldC5zZWVkKDUyMjQyKQoKbWlfam9tbyA8LSBqb21vKAogIFkgPSBkYXRhLmZyYW1lKGRhdGFUb0ltcHV0ZVssIGxldmVsMVZhcnNdKSwKICAjWTIgPSBkYXRhLmZyYW1lKGRhdGFUb0ltcHV0ZVssIGxldmVsMlZhcnNdKSwKICBYID0gZGF0YS5mcmFtZShkYXRhVG9JbXB1dGVbLCBmdWxseU9ic2VydmVkQ292YXJpYXRlc10pLAogIGNsdXMgPSBkYXRhLmZyYW1lKGRhdGFUb0ltcHV0ZVssIGNsdXN0ZXJWYXJzXSksCiAgbmltcCA9IG51bUltcHV0YXRpb25zLAogIG1ldGggPSAicmFuZG9tIgopCmBgYAoKIyMjIGBBbWVsaWFgCgotIGAhYCBpbiB0aGUgY29uc29sZSBvdXRwdXQgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnQgZXN0aW1hdGVkIGNvbXBsZXRlIGRhdGEgY292YXJpYW5jZSBtYXRyaXggaXMgbm90IGludmVydGlibGUKLSBgKmAgaW4gdGhlIGNvbnNvbGUgb3V0cHV0IGluZGljYXRlcyB0aGF0IHRoZSBsaWtlbGlob29kIGhhcyBub3QgbW9ub3RvbmljYWxseSBpbmNyZWFzZWQgaW4gdGhhdCBzdGVwCgpgYGB7cn0KYm91bmRWYXJzIDwtIGMoImhlaWdodCIpCmJvdW5kQ29scyA8LSB3aGljaChuYW1lcyhkYXRhVG9JbXB1dGUpICVpbiUgYm91bmRWYXJzKQpib3VuZExvd2VyIDwtIDEwMApib3VuZFVwcGVyIDwtIDIwMAoKdmFyQm91bmRzIDwtIGNiaW5kKGJvdW5kQ29scywgYm91bmRMb3dlciwgYm91bmRVcHBlcikKCnNldC5zZWVkKDUyMjQyKQoKbWlfYW1lbGlhIDwtIGFtZWxpYSgKICBkYXRhVG9JbXB1dGUsCiAgbSA9IG51bUltcHV0YXRpb25zLAogIHRzID0gImFnZSIsCiAgY3MgPSAiaWQiLAogIHBvbHl0aW1lID0gMSwKICBpbnRlcmNzID0gVFJVRSwKICAjb3JkcyA9IG9yZGluYWxWYXJzLAogICNib3VuZHMgPSB2YXJCb3VuZHMsCiAgcGFyYWxsZWwgPSAic25vdyIsCiAgI25jcHVzID0gbnVtQ29yZXMsCiAgZW1wcmkgPSAuMDEqbnJvdyhkYXRhVG9JbXB1dGUpKSAjIHJpZGdlIHByaW9yIGZvciBudW1lcmljYWwgc3RhYmlsaXR5CmBgYAoKIyMjIGBNcGx1c2AKCiMjIyMgU2F2ZSBgTXBsdXNgIERhdGEgRmlsZQoKU2F2ZSBSIG9iamVjdCBhcyBgTXBsdXNgIGRhdGEgZmlsZToKCmBgYHtyfQpwcmVwYXJlTXBsdXNEYXRhKGRhdGFUb0ltcHV0ZSwgZmlsZS5wYXRoKCJkYXRhVG9JbXB1dGUuZGF0IikpCmBgYAoKIyMjIyBgTXBsdXNgIFN5bnRheCBmb3IgTXVsdGlsZXZlbCBJbXB1dGF0aW9uCgpgTXBsdXNgIHN5bnRheCBmb3IgbXVsdGlsZXZlbCBpbXB1dGF0aW9uOgoKYGBgTXBsdXMKISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIQohISEhISAgTVBMVVMgU1lOVEFYIExJTkVTIENBTk5PVCBFWENFRUQgOTAgQ0hBUkFDVEVSUzsKISEhISEgIFZBUklBQkxFIE5BTUVTIEFORCBQQVJBTUVURVIgTEFCRUxTIENBTk5PVCBFWENFRUQgOCBDSEFSQUNURVJTIEVBQ0g7CiEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEKClRJVExFOiBNb2RlbCBUaXRsZQoKREFUQTogRklMRSA9ICJkYXRhVG9JbXB1dGUuZGF0IjsKClZBUklBQkxFOgogIE5BTUVTID0gaWQgYWdlIGhlaWdodCBPY2Nhc2lvbjsKICBNSVNTSU5HID0gLjsKICBVU0VWQVJJQUJMRVMgQVJFIGFnZSBoZWlnaHQgT2NjYXNpb247CiAgIUNBVEVHT1JJQ0FMIEFSRSBJTlNFUlRfTkFNRVNfT0ZfQ0FURUdPUklDQUxfVkFSSUFCTEVTX0hFUkU7CiAgQ0xVU1RFUiA9IGlkOwoKQU5BTFlTSVM6CiAgVFlQRSA9IHR3b2xldmVsIGJhc2ljOwogIGJzZWVkID0gNTIyNDI7CiAgUFJPQ0VTU09SUyA9IDI7CiAgICAKREFUQSBJTVBVVEFUSU9OOgogIElNUFVURSA9IGFnZSBoZWlnaHQgT2NjYXNpb247ICFwdXQgJyAoYyknIGFmdGVyIGNhdGVnb3JpY2FsIHZhcnMKICBOREFUQVNFVFMgPSAxMDA7CiAgU0FWRSA9IGltcCouZGF0CmBgYAoKIyBQYXJhbGxlbCBQcm9jZXNzaW5nCgpodHRwczovL3d3dy5nZXJrb3ZpbmsuY29tL21pY2VWaWduZXR0ZXMvZnV0dXJlbWljZS9WaWduZXR0ZV9mdXR1cmVtaWNlLmh0bWwKCmBgYHtyfQptaV9wYXJhbGxlbF9taWNlIDwtIGZ1dHVyZW1pY2UoCiAgZGF0YVRvSW1wdXRlLAogIG1ldGhvZCA9IG1ldGgsCiAgcHJlZGljdG9yTWF0cml4ID0gcHJlZCwKICBtID0gbnVtSW1wdXRhdGlvbnMsCiAgbWF4aXQgPSA1LCAjIGdlbmVyYWxseSB1c2UgMTAwIG1heGltdW0gaXRlcmF0aW9uczsgdGhpcyBleGFtcGxlIHVzZXMgNSBmb3Igc3BlZWQKICBwYXJhbGxlbHNlZWQgPSA1MjI0MiwKICBuLmNvcmUgPSBudW1Db3JlcykKYGBgCgojIEltcHV0YXRpb24gRGlhZ25vc3RpY3MKCiMjIFRyYWNlIFBsb3RzCgpPbiBjb252ZXJnZW5jZSwgdGhlIHN0cmVhbXMgb2YgdGhlIHRyYWNlIHBsb3RzIHNob3VsZCBpbnRlcm1pbmdsZSBhbmQgYmUgZnJlZSBvZiBhbnkgdHJlbmQgKGF0IHRoZSBsYXRlciBpdGVyYXRpb25zKS4KQ29udmVyZ2VuY2UgaXMgZGlhZ25vc2VkIHdoZW4gdGhlIHZhcmlhbmNlIGJldHdlZW4gZGlmZmVyZW50IHNlcXVlbmNlcyBpcyBubyBsYXJnZXIgdGhhbiB0aGUgdmFyaWFuY2Ugd2l0aGluIGVhY2ggaW5kaXZpZHVhbCBzZXF1ZW5jZS4KCi0gaHR0cHM6Ly9zdGVmdmFuYnV1cmVuLm5hbWUvZmltZC9zZWMtYWxnb3B0aW9ucy5odG1sCgpgYGB7cn0KcGxvdChtaV9taWNlLCBjKCJoZWlnaHQiKSkKYGBgCgojIyBEZW5zaXR5IFBsb3RzCgpgYGB7cn0KZGVuc2l0eXBsb3QobWlfbWljZSkKZGVuc2l0eXBsb3QobWlfbWljZSwgfiBoZWlnaHQpCmBgYAoKIyMgU3RyaXAgUGxvdHMKCmBgYHtyfQpzdHJpcHBsb3QobWlfbWljZSkKc3RyaXBwbG90KG1pX21pY2UsIGhlaWdodCB+IC5pbXApCmBgYAoKIyBQb3N0LVByb2Nlc3NpbmcKCiMjIE1vZGlmeS9DcmVhdGUgTmV3IFZhcmlhYmxlcwoKIyMjIGBtaWNlYAoKYGBge3J9Cm1pX21pY2VfbG9uZyA8LSBjb21wbGV0ZSgKICBtaV9taWNlLAogIGFjdGlvbiA9ICJsb25nIiwKICBpbmNsdWRlID0gVFJVRSkKCm1pX21pY2VfbG9uZyRuZXdWYXIgPC0gbWlfbWljZV9sb25nJGFnZSAqIG1pX21pY2VfbG9uZyRoZWlnaHQKYGBgCgojIyMgYGpvbW9gCgpgYGB7cn0KbWlfam9tbyA8LSBtaV9qb21vICU+JSAKICByZW5hbWUoaGVpZ2h0ID0gZGF0YVRvSW1wdXRlLi4ubGV2ZWwxVmFycy4pCgptaV9qb21vJG5ld1ZhciA8LSBtaV9qb21vJGFnZSAqIG1pX2pvbW8kaGVpZ2h0CmBgYAoKIyMjIGBBbWVsaWFgCgpgYGB7cn0KZm9yKGkgaW4gMTpsZW5ndGgobWlfYW1lbGlhJGltcHV0YXRpb25zKSl7CiAgbWlfYW1lbGlhJGltcHV0YXRpb25zW1tpXV0kbmV3VmFyIDwtIG1pX2FtZWxpYSRpbXB1dGF0aW9uc1tbaV1dJGFnZSAqIG1pX2FtZWxpYSRpbXB1dGF0aW9uc1tbaV1dJGhlaWdodAp9CmBgYAoKIyMgQ29udmVydCB0byBgbWlkc2Agb2JqZWN0CgojIyMgYG1pY2VgCgpgYGB7cn0KbWlfbWljZV9taWRzIDwtIGFzLm1pZHMobWlfbWljZV9sb25nKQpgYGAKCiMjIyBgam9tb2AKCmBgYHtyfQptaV9qb21vX21pZHMgPC0gbWljZWFkZHM6OmpvbW8ybWlkcyhtaV9qb21vKQpgYGAKCiMjIyBgQW1lbGlhYAoKYGBge3J9Cm1pX2FtZWxpYV9taWRzIDwtIG1pY2VhZGRzOjpkYXRsaXN0Mm1pZHMobWlfYW1lbGlhJGltcHV0YXRpb25zKQpgYGAKCiMjIEV4cG9ydCBmb3IgYE1wbHVzYAoKYGBge3IsIGV2YWwgPSBGQUxTRX0KbWlkczJtcGx1cyhtaV9taWNlX21pZHMsIHBhdGggPSBmaWxlLnBhdGgoIkluc2VydEZpbGVQYXRoSGVyZSIsIGZzZXAgPSAiIikpCm1pZHMybXBsdXMobWlfam9tb19taWRzLCBwYXRoID0gZmlsZS5wYXRoKCJJbnNlcnRGaWxlUGF0aEhlcmUiLCBmc2VwID0gIiIpKQptaWRzMm1wbHVzKG1pX2FtZWxpYV9taWRzLCBwYXRoID0gZmlsZS5wYXRoKCJJbnNlcnRGaWxlUGF0aEhlcmUiLCBmc2VwID0gIiIpKQpgYGAKCiMgUmVzb3VyY2VzCgpodHRwczovL3N0ZWZ2YW5idXVyZW4ubmFtZS9maW1kCgpodHRwczovL3d3dy5nZXJrb3ZpbmsuY29tL21pY2VWaWduZXR0ZXMvTXVsdGlfbGV2ZWwvTXVsdGlfbGV2ZWxfZGF0YS5odG1sCg==</div>
<script type="text/javascript" src="includes/external-links.js"></script>

<br>
<hr>
<br>

<!-- Add lab logo -->
<p style="text-align: center;">
    <a href="https://developmental-psychopathology.lab.uiowa.edu" target="_blank">
        <img alt="Developmental Psychopathology Lab" src="images/formalLogo.png" width="60%">
    </a>
</p>

<br>
<hr>
<br>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Add font awesome icons -->
<p style="text-align: center;">
    <a href="https://github.com/DevPsyLab" target="_blank" class="fa fa-github fa-fw fa-3x"></a>
    <a href="https://twitter.com/devpsylab" target="_blank" class="fa fa-twitter fa-fw fa-3x"></a>
    <a href="https://www.facebook.com/DevPsyLab" target="_blank" class="fa fa-facebook fa-fw fa-3x"></a>
	<a href="https://www.instagram.com/dev_psy_lab" target="_blank" class="fa fa-instagram fa-fw fa-3x"></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("multipleImputation.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
