<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Hierarchical Linear Modeling</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TYR0QMREEW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TYR0QMREEW');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="includes/custom.css" type="text/css" />
<link rel="stylesheet" href="font/css/roboto.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Analysis Guides for the Developmental Psychopathology Lab</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="adobe.html">Adobe</a>
    </li>
    <li>
      <a href="bayesian.html">Bayesian Analysis</a>
    </li>
    <li>
      <a href="dataManagement.html">Data Management</a>
    </li>
    <li>
      <a href="developmentalScaling.html">Developmental Scaling</a>
    </li>
    <li>
      <a href="eegERP.html">Electroencaphalography/Event-Related Potentials</a>
    </li>
    <li>
      <a href="eda.html">Exploratory Data Analysis</a>
    </li>
    <li>
      <a href="factorAnalysis.html">Factor Analysis</a>
    </li>
    <li>
      <a href="figures.html">Figures</a>
    </li>
    <li>
      <a href="git.html">Git, GitLab, and GitHub</a>
    </li>
    <li>
      <a href="hlm.html">Hierarchical Linear Modeling</a>
    </li>
    <li>
      <a href="hpc.html">High-Performance Computing</a>
    </li>
    <li>
      <a href="irt.html">Item Response Theory</a>
    </li>
    <li>
      <a href="jamovi.html">jamovi</a>
    </li>
    <li>
      <a href="jsPsych.html">jsPsych</a>
    </li>
    <li>
      <a href="lda.html">Longitudinal Data Analysis</a>
    </li>
    <li>
      <a href="markdown.html">Markdown</a>
    </li>
    <li>
      <a href="sem.html#mediation">Mediation</a>
    </li>
    <li>
      <a href="regression.html#moderation">Moderation/Interaction</a>
    </li>
    <li>
      <a href="multipleImputation.html">Multiple Imputation</a>
    </li>
    <li>
      <a href="osf.html">Open Science Framework</a>
    </li>
    <li>
      <a href="pca.html">Principal Component Analysis</a>
    </li>
    <li>
      <a href="R.html">R</a>
    </li>
    <li>
      <a href="regression.html">Regression</a>
    </li>
    <li>
      <a href="SPSS.html">SPSS</a>
    </li>
    <li>
      <a href="sem.html">Structural Equation Modeling</a>
    </li>
  </ul>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://devpsylab.github.io/LabWiki">Lab Wiki</a>
</li>
<li>
  <a href="https://developmental-psychopathology.lab.uiowa.edu">Lab Website</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Hierarchical Linear Modeling</h1>

</div>


<div id="preamble" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Preamble</h1>
<div id="install-libraries" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Install
Libraries</h2>
<pre class="r fold-hide"><code>#install.packages(&quot;remotes&quot;)
#remotes::install_github(&quot;DevPsyLab/petersenlab&quot;)</code></pre>
</div>
<div id="load-libraries" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Load Libraries</h2>
<pre class="r fold-hide"><code>library(&quot;petersenlab&quot;)
library(&quot;lme4&quot;)
library(&quot;nlme&quot;)
library(&quot;lmerTest&quot;)
library(&quot;MASS&quot;)
library(&quot;MCMCglmm&quot;)
library(&quot;ggplot2&quot;)</code></pre>
</div>
<div id="import-data" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Import Data</h2>
<pre class="r fold-hide"><code>mydata &lt;- read.csv(&quot;https://osf.io/cqn3d/download&quot;)</code></pre>
</div>
<div id="simulate-data" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Simulate Data</h2>
<pre class="r fold-hide"><code>set.seed(52242)

mydata$outcome &lt;- rpois(nrow(mydata), 4)</code></pre>
</div>
</div>
<div id="terms" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Terms</h1>
<p>These models go by a variety of different terms:</p>
<ul>
<li>hierarchical linear model (HLM)</li>
<li>multilevel model (MLM)</li>
<li>mixed effects model</li>
<li>mixed model</li>
</ul>
</div>
<div id="overview" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Overview</h1>
<p><a
href="https://isaactpetersen.github.io/Principles-Psychological-Assessment/reliability.html#mixedModels"
class="uri">https://isaactpetersen.github.io/Principles-Psychological-Assessment/reliability.html#mixedModels</a></p>
</div>
<div id="pre-model-computation" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Pre-Model
Computation</h1>
<p>It can be helpful to center the age/time variable so that the
intercept in a growth curve model has meaning. For instance, we can
subtract the youngest participant age to set the intercepts to be the
earliest age in the sample.</p>
<pre class="r fold-show"><code>mydata$ageYears &lt;- mydata$age / 12
mydata$ageMonthsCentered &lt;- mydata$age - min(mydata$age, na.rm = TRUE)

mydata$ageYearsCentered &lt;- mydata$ageMonthsCentered / 12</code></pre>
</div>
<div id="estimator-ml-or-reml" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Estimator: ML or
REML</h1>
<p>For small sample sizes, restricted maximum likelihood (REML) is
preferred over maximum likelihood (ML). ML preferred when there is a
small number (&lt; 4) of fixed effects; REML is preferred when there are
more (&gt; 4) fixed effects. The greater the number of fixed effects,
the greater the difference between REML and ML estimates. Likelihood
ratio (LR) tests for REML require exactly the same fixed effects
specification in both models. So, to compare models with different fixed
effects with an LR test (to determine whether to include a particular
fixed effect), ML must be used. In contrast to the maximum likelihood
estimation, REML can produce unbiased estimates of variance and
covariance parameters, variance estimates are larger in REML than ML. To
compare whether an effect should be fixed or random, use REML. To
simultaneously compare fixed and random effects, use ML.</p>
</div>
<div id="linear" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Linear Mixed
Models</h1>
<p>The following models are models that are fit in a linear mixed
modeling framework.</p>
<div id="gcm" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Growth Curve
Models</h2>
<div id="plot-observed-growth-curves" class="section level3"
number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Plot Observed
Growth Curves</h3>
<pre class="r fold-show"><code>ggplot(
  data = mydata,
  mapping = aes(
    x = ageYears,
    y = math,
    group = id)) +
  geom_line() +
  scale_x_continuous(
    name = &quot;Age (Years)&quot;) +
  scale_y_continuous(
    name = &quot;Math Score&quot;)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="lme4" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span>
<code>lme4</code></h3>
<pre class="r fold-show"><code>linearMixedModel &lt;- lmer(
  math ~ female + ageYearsCentered + (ageYearsCentered | id),
  data = mydata,
  REML = FALSE, #for ML
  na.action = na.exclude,
  control = lmerControl(optimizer = &quot;bobyqa&quot;))

summary(linearMixedModel)</code></pre>
<pre><code>Linear mixed model fit by maximum likelihood . t-tests use Satterthwaite&#39;s
  method [lmerModLmerTest]
Formula: math ~ female + ageYearsCentered + (ageYearsCentered | id)
   Data: mydata
Control: lmerControl(optimizer = &quot;bobyqa&quot;)

     AIC      BIC   logLik deviance df.resid 
 15855.9  15895.8  -7920.9  15841.9     2214 

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-3.3709 -0.5156  0.0054  0.5228  2.6412 

Random effects:
 Groups   Name             Variance Std.Dev. Corr
 id       (Intercept)      62.5362  7.9080       
          ageYearsCentered  0.6764  0.8225   0.08
 Residual                  32.1542  5.6705       
Number of obs: 2221, groups:  id, 932

Fixed effects:
                   Estimate Std. Error         df t value Pr(&gt;|t|)    
(Intercept)        30.55370    0.50310 1007.55144  60.731   &lt;2e-16 ***
female             -0.69259    0.61681  921.20501  -1.123    0.262    
ageYearsCentered    4.25538    0.08044  599.23078  52.899   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Correlation of Fixed Effects:
            (Intr) female
female      -0.613       
ageYrsCntrd -0.506  0.013</code></pre>
<div id="protoypical-growth-curve" class="section level4"
number="6.1.2.1">
<h4><span class="header-section-number">6.1.2.1</span> Protoypical
Growth Curve</h4>
<pre class="r fold-show"><code>newData &lt;- expand.grid(
  female = c(0, 1),
  ageYears = c(
    min(mydata$ageYears, na.rm = TRUE),
    max(mydata$ageYears, na.rm = TRUE))
)

newData$ageYearsCentered &lt;- newData$ageYears - min(newData$ageYears)

newData$sex &lt;- NA
newData$sex[which(newData$female == 0)] &lt;- &quot;male&quot;
newData$sex[which(newData$female == 1)] &lt;- &quot;female&quot;
newData$sex &lt;- as.factor(newData$sex)

newData$predictedValue &lt;- predict(
  linearMixedModel,
  newdata = newData,
  re.form = NA
)

ggplot(
  data = newData,
  mapping = aes(x = ageYears, y = predictedValue, color = sex)) +
  xlab(&quot;Age (Years)&quot;) +
  ylab(&quot;Math Score&quot;) +
  geom_line()</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="individuals-growth-curves" class="section level4"
number="6.1.2.2">
<h4><span class="header-section-number">6.1.2.2</span> Individuals’
Growth Curves</h4>
<pre class="r fold-show"><code>mydata$predictedValue &lt;- predict(
  linearMixedModel,
  newdata = mydata,
  re.form = NULL
)

ggplot(
  data = mydata,
  mapping = aes(x = ageYears, y = predictedValue, group = factor(id))) +
  xlab(&quot;Age (Years)&quot;) +
  ylab(&quot;Math Score&quot;) +
  geom_line()</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="individuals-trajectories-overlaid-with-prototypical-trajectory"
class="section level4" number="6.1.2.3">
<h4><span class="header-section-number">6.1.2.3</span> Individuals’
Trajectories Overlaid with Prototypical Trajectory</h4>
<pre class="r fold-show"><code>ggplot(
  data = mydata,
  mapping = aes(x = ageYears, y = predictedValue, group = factor(id))) +
  xlab(&quot;Age (Years)&quot;) +
  ylab(&quot;Math Score&quot;) +
  geom_line() +
  geom_line(
    data = newData,
    mapping = aes(x = ageYears, y = predictedValue, group = sex, color = sex),
    linewidth = 2)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
</div>
<div id="nlme" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span>
<code>nlme</code></h3>
<pre class="r fold-show"><code>linearMixedModel_nlme &lt;- lme(
  math ~ female + ageYearsCentered,
  random = ~ 1 + ageYearsCentered|id,
  data = mydata,
  method = &quot;ML&quot;,
  na.action = na.exclude)

summary(linearMixedModel_nlme)</code></pre>
<pre><code>Linear mixed-effects model fit by maximum likelihood
  Data: mydata 
       AIC      BIC    logLik
  15855.88 15895.82 -7920.938

Random effects:
 Formula: ~1 + ageYearsCentered | id
 Structure: General positive-definite, Log-Cholesky parametrization
                 StdDev    Corr  
(Intercept)      7.9079824 (Intr)
ageYearsCentered 0.8224646 0.082 
Residual         5.6704658       

Fixed effects:  math ~ female + ageYearsCentered 
                     Value Std.Error   DF  t-value p-value
(Intercept)      30.553704 0.5034410 1288 60.68975  0.0000
female           -0.692589 0.6172311  930 -1.12209  0.2621
ageYearsCentered  4.255383 0.0804975 1288 52.86352  0.0000
 Correlation: 
                 (Intr) female
female           -0.613       
ageYearsCentered -0.506  0.013

Standardized Within-Group Residuals:
         Min           Q1          Med           Q3          Max 
-3.370893327 -0.515648736  0.005400788  0.522827409  2.641194679 

Number of Observations: 2221
Number of Groups: 932 </code></pre>
</div>
</div>
</div>
<div id="generalized" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Generalized Linear
Mixed Models</h1>
<p><a href="http://glmm.wikidot.com/faq"
class="uri">http://glmm.wikidot.com/faq</a></p>
<div id="lmer" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span>
<code>lmer</code></h2>
<pre class="r fold-show"><code>generalizedLinearMixedModel &lt;- glmer(
  outcome ~ female + ageYearsCentered + (ageYearsCentered | id),
  family = poisson(link = &quot;log&quot;),
  data = mydata,
  na.action = na.exclude)</code></pre>
<pre><code>boundary (singular) fit: see help(&#39;isSingular&#39;)</code></pre>
<pre class="r fold-show"><code>summary(generalizedLinearMixedModel)</code></pre>
<pre><code>Generalized linear mixed model fit by maximum likelihood (Laplace
  Approximation) [glmerMod]
 Family: poisson  ( log )
Formula: outcome ~ female + ageYearsCentered + (ageYearsCentered | id)
   Data: mydata

     AIC      BIC   logLik deviance df.resid 
  9329.7   9363.9  -4658.8   9317.7     2215 

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-2.0331 -0.5546 -0.0205  0.5350  5.0222 

Random effects:
 Groups Name             Variance  Std.Dev. Corr 
 id     (Intercept)      0.0058309 0.07636       
        ageYearsCentered 0.0002845 0.01687  -1.00
Number of obs: 2221, groups:  id, 932

Fixed effects:
                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      1.343986   0.027432  48.994   &lt;2e-16 ***
female           0.007439   0.021264   0.350   0.7265    
ageYearsCentered 0.010279   0.005877   1.749   0.0803 .  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Correlation of Fixed Effects:
            (Intr) female
female      -0.414       
ageYrsCntrd -0.835  0.037
optimizer (Nelder_Mead) convergence code: 0 (OK)
boundary (singular) fit: see help(&#39;isSingular&#39;)</code></pre>
</div>
<div id="mass" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span>
<code>MASS</code></h2>
<pre class="r fold-show"><code>glmmPQLmodel &lt;- glmmPQL(
  outcome ~ female + ageYearsCentered,
  random = ~ 1 + ageYearsCentered|id,
  family = poisson(link = &quot;log&quot;),
  data = mydata)</code></pre>
<pre><code>iteration 1</code></pre>
<pre class="r fold-show"><code>summary(glmmPQLmodel)</code></pre>
<pre><code>Linear mixed-effects model fit by maximum likelihood
  Data: mydata 
  AIC BIC logLik
   NA  NA     NA

Random effects:
 Formula: ~1 + ageYearsCentered | id
 Structure: General positive-definite, Log-Cholesky parametrization
                 StdDev       Corr  
(Intercept)      5.507913e-05 (Intr)
ageYearsCentered 9.250819e-08 0     
Residual         1.014184e+00       

Variance function:
 Structure: fixed weights
 Formula: ~invwt 
Fixed effects:  outcome ~ female + ageYearsCentered 
                     Value   Std.Error   DF  t-value p-value
(Intercept)      1.3453017 0.027100741 1288 49.64077  0.0000
female           0.0074130 0.021543030  930  0.34410  0.7308
ageYearsCentered 0.0100806 0.005850753 1288  1.72296  0.0851
 Correlation: 
                 (Intr) female
female           -0.423       
ageYearsCentered -0.829  0.036

Standardized Within-Group Residuals:
        Min          Q1         Med          Q3         Max 
-2.00970268 -0.55110605 -0.02158036  0.53179575  4.98914420 

Number of Observations: 2221
Number of Groups: 932 </code></pre>
</div>
<div id="mcmcglmm" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span>
<code>MCMCglmm</code></h2>
<pre class="r fold-show"><code>MCMCglmmModel &lt;- MCMCglmm(
  outcome ~ female + ageYearsCentered,
  random = ~ us(ageYearsCentered):id,
  family = &quot;poisson&quot;,
  data = na.omit(mydata[,c(&quot;id&quot;,&quot;outcome&quot;,&quot;female&quot;,&quot;ageYearsCentered&quot;)]))</code></pre>
<pre><code>
                       MCMC iteration = 0

 Acceptance ratio for liability set 1 = 0.000410

                       MCMC iteration = 1000

 Acceptance ratio for liability set 1 = 0.439819

                       MCMC iteration = 2000

 Acceptance ratio for liability set 1 = 0.439977

                       MCMC iteration = 3000

 Acceptance ratio for liability set 1 = 0.444608

                       MCMC iteration = 4000

 Acceptance ratio for liability set 1 = 0.496749

                       MCMC iteration = 5000

 Acceptance ratio for liability set 1 = 0.490778

                       MCMC iteration = 6000

 Acceptance ratio for liability set 1 = 0.512362

                       MCMC iteration = 7000

 Acceptance ratio for liability set 1 = 0.428231

                       MCMC iteration = 8000

 Acceptance ratio for liability set 1 = 0.412336

                       MCMC iteration = 9000

 Acceptance ratio for liability set 1 = 0.471726

                       MCMC iteration = 10000

 Acceptance ratio for liability set 1 = 0.428491

                       MCMC iteration = 11000

 Acceptance ratio for liability set 1 = 0.400078

                       MCMC iteration = 12000

 Acceptance ratio for liability set 1 = 0.346435

                       MCMC iteration = 13000

 Acceptance ratio for liability set 1 = 0.276170</code></pre>
<pre class="r fold-show"><code>summary(MCMCglmmModel)</code></pre>
<pre><code>
 Iterations = 3001:12991
 Thinning interval  = 10
 Sample size  = 1000 

 DIC: 9323.524 

 G-structure:  ~us(ageYearsCentered):id

                                     post.mean  l-95% CI  u-95% CI eff.samp
ageYearsCentered:ageYearsCentered.id 6.754e-06 1.087e-08 4.053e-05    7.788

 R-structure:  ~units

      post.mean l-95% CI u-95% CI eff.samp
units   0.00877 0.001634  0.01728    7.797

 Location effects: outcome ~ female + ageYearsCentered 

                 post.mean  l-95% CI  u-95% CI eff.samp  pMCMC    
(Intercept)       1.338707  1.281096  1.387614    55.58 &lt;0.001 ***
female            0.007688 -0.031193  0.052271    58.65  0.706    
ageYearsCentered  0.010561  0.000813  0.021420    57.32  0.046 *  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
</div>
<div id="nonlinear" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Nonlinear Mixed
Models</h1>
<pre class="r fold-show"><code>nonlinearModel &lt;- nlme(
  height ~ SSasymp(age, Asym, R0, lrc),
  data = Loblolly,
  fixed = Asym + R0 + lrc ~ 1,
  random = Asym ~ 1)

summary(nonlinearModel)</code></pre>
<pre><code>Nonlinear mixed-effects model fit by maximum likelihood
  Model: height ~ SSasymp(age, Asym, R0, lrc) 
  Data: Loblolly 
      AIC      BIC   logLik
  239.486 251.6401 -114.743

Random effects:
 Formula: Asym ~ 1 | Seed
            Asym  Residual
StdDev: 3.650645 0.7188624

Fixed effects:  list(Asym ~ 1, R0 ~ 1, lrc ~ 1) 
         Value Std.Error DF   t-value p-value
Asym 101.44830 2.4616151 68  41.21209       0
R0    -8.62749 0.3179519 68 -27.13459       0
lrc   -3.23373 0.0342695 68 -94.36168       0
 Correlation: 
    Asym   R0    
R0   0.704       
lrc -0.908 -0.827

Standardized Within-Group Residuals:
        Min          Q1         Med          Q3         Max 
-2.23604174 -0.62389999  0.05912777  0.65724316  1.95790785 

Number of Observations: 84
Number of Groups: 14 </code></pre>
</div>
<div id="robust-mixed-models" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Robust Mixed
Models</h1>
<p>To evaluate the extent to which a finding could driven by outliers,
this could be done in a number of different ways, such as:</p>
<ul>
<li>identifying and excluding influential observations based on DFBETAS
or Cook’s distance (Nieuwenhuis, Grotenhuis, &amp; Pelzer, 2012)</li>
<li>fitting mixed models using rank-based estimation (Bilgic &amp;
Susmann, 2013; Finch, 2017) or robust estimating equations (Koller,
2016)</li>
<li>estimating robust standard errors using a sandwich estimator (Wang
&amp; Merkle, 2018)</li>
</ul>
</div>
<div id="assumptions" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Assumptions</h1>
<p>The within-group errors:</p>
<ol style="list-style-type: decimal">
<li>are independent</li>
<li>are identically normally distributed</li>
<li>have mean zero and variance sigma-squared</li>
<li>are independent of the random effects</li>
</ol>
<p>The random effects:</p>
<ol start="5" style="list-style-type: decimal">
<li>are normally distributed</li>
<li>have mean zero and covariance matrix Psi (not depending on the
group)</li>
<li>are independent for different groups</li>
</ol>
</div>
<div id="examining-model-assumptions" class="section level1"
number="11">
<h1><span class="header-section-number">11</span> Examining Model
Assumptions</h1>
<div id="resources" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Resources</h2>
<p>Pinheiro and Bates (2000) book (p. 174, section 4.3.1)</p>
<p><a
href="https://stats.stackexchange.com/questions/77891/checking-assumptions-lmer-lme-mixed-models-in-r"
class="uri">https://stats.stackexchange.com/questions/77891/checking-assumptions-lmer-lme-mixed-models-in-r</a></p>
</div>
<div id="qq-plots" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> QQ Plots</h2>
<p>Make QQ plots for each level of the random effects. Vary the level
from 0, 1, to 2 so that you can check the between- and within-subject
residuals.</p>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme,
       ~ ranef(., level = 1))</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="pp-plots" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> PP Plots</h2>
<pre class="r fold-show"><code>ppPlot(linearMixedModel)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="qq-plot-of-residuals" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> QQ Plot of
residuals</h2>
<pre class="r fold-show"><code>qqnorm(resid(linearMixedModel))
qqline(resid(linearMixedModel))</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="plot-residuals" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Plot residuals</h2>
<pre class="r fold-show"><code>plot(linearMixedModel)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div
id="plot-residuals-by-group-in-the-example-below-level-2-represents-the-individual"
class="section level2" number="11.6">
<h2><span class="header-section-number">11.6</span> Plot residuals by
group (in the example below, level 2 represents the individual)</h2>
<pre class="r fold-show"><code>plot(linearMixedModel,
     as.factor(id) ~ resid(.),
     abline = 0,
     xlab = &quot;Residuals&quot;)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
<div id="plot-residuals-by-levels-of-a-predictor" class="section level2"
number="11.7">
<h2><span class="header-section-number">11.7</span> Plot residuals by
levels of a predictor</h2>
<pre class="r fold-show"><code>plot(linearMixedModel_nlme,
     resid(., type = &quot;p&quot;) ~ fitted(.) | female) #type = &quot;p&quot; specifies standardized residuals</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
</div>
<div
id="can-model-heteroscedasticity-of-the-within-group-error-with-the-weights-argument"
class="section level2" number="11.8">
<h2><span class="header-section-number">11.8</span> Can model
heteroscedasticity of the within-group error with the weights
argument</h2>
<pre class="r fold-show"><code>linearMixedModel_nlmeVarStructure &lt;- lme(
  math ~ female + ageYearsCentered,
  random = ~ 1 + ageYearsCentered|id,
  weights = varIdent(form = ~ 1 | female),
  method = &quot;ML&quot;,
  data = mydata,
  na.action = na.exclude)

summary(linearMixedModel_nlmeVarStructure)</code></pre>
<pre><code>Linear mixed-effects model fit by maximum likelihood
  Data: mydata 
       AIC      BIC    logLik
  15857.83 15903.48 -7920.915

Random effects:
 Formula: ~1 + ageYearsCentered | id
 Structure: General positive-definite, Log-Cholesky parametrization
                 StdDev    Corr  
(Intercept)      7.9177716 (Intr)
ageYearsCentered 0.8278343 0.076 
Residual         5.6410162       

Variance function:
 Structure: Different standard deviations per stratum
 Formula: ~1 | female 
 Parameter estimates:
       1        0 
1.000000 1.009161 
Fixed effects:  math ~ female + ageYearsCentered 
                     Value Std.Error   DF  t-value p-value
(Intercept)      30.554856 0.5040373 1288 60.62022  0.0000
female           -0.692653 0.6172485  930 -1.12216  0.2621
ageYearsCentered  4.255258 0.0805531 1288 52.82553  0.0000
 Correlation: 
                 (Intr) female
female           -0.614       
ageYearsCentered -0.507  0.014

Standardized Within-Group Residuals:
        Min          Q1         Med          Q3         Max 
-3.37982975 -0.51663213  0.00445497  0.52228733  2.63205084 

Number of Observations: 2221
Number of Groups: 932 </code></pre>
</div>
<div id="plot-observed-and-fitted-values" class="section level2"
number="11.9">
<h2><span class="header-section-number">11.9</span> Plot observed and
fitted values</h2>
<pre class="r fold-show"><code>plot(linearMixedModel,
     math ~ fitted(.))</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="plot-qq-plot-of-residuals-by-levels-of-a-predictor"
class="section level2" number="11.10">
<h2><span class="header-section-number">11.10</span> Plot QQ plot of
residuals by levels of a predictor</h2>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme, ~ resid(.) | female)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme, ~ resid(.))</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-24-2.png" width="672" /></p>
</div>
<div id="qq-plot-of-random-effects" class="section level2"
number="11.11">
<h2><span class="header-section-number">11.11</span> QQ plot of random
effects</h2>
<p>Make QQ plots for each level of the random effects. Vary the level
from 0, 1, to 2 so that you can check the between- and within-subject
residuals.</p>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme,
       ~ ranef(., level = 0))</code></pre>
<pre><code>Error in effects[[1L]]: subscript out of bounds</code></pre>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme,
       ~ ranef(., level = 1))</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme,
       ~ ranef(., level = 2))</code></pre>
<pre><code>Error in eval(i, data, env): object &#39;.y&#39; not found</code></pre>
</div>
<div id="qq-plot-of-random-effects-by-levels-of-a-predictor"
class="section level2" number="11.12">
<h2><span class="header-section-number">11.12</span> QQ plot of random
effects by levels of a predictor</h2>
<pre class="r fold-show"><code>qqnorm(linearMixedModel_nlme, 
       ~ ranef(., level = 1) | female)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="pairs-plot" class="section level2" number="11.13">
<h2><span class="header-section-number">11.13</span> Pairs plot</h2>
<pre class="r fold-show"><code>pairs(linearMixedModel_nlme)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<pre class="r fold-show"><code>pairs(linearMixedModel_nlme,
      ~ ranef(., level = 1) | female)</code></pre>
<p><img src="hlm_files/figure-html/unnamed-chunk-27-2.png" width="672" /></p>
</div>
<div id="variance-functions-for-modeling-heteroscedasticity"
class="section level2" number="11.14">
<h2><span class="header-section-number">11.14</span> Variance functions
for modeling heteroscedasticity</h2>
<ul>
<li><code>varFixed</code>: fixed variance</li>
<li><code>varIdent</code>: different variances per stratum</li>
<li><code>varPower</code>: power of covariate</li>
<li><code>varExp</code>: exponential of covariate</li>
<li><code>varConstPower</code>: constant plus power of covariate</li>
<li><code>varComb</code>: combination of variance functions</li>
</ul>
</div>
<div id="correlation-structures-for-modeling-dependence"
class="section level2" number="11.15">
<h2><span class="header-section-number">11.15</span> Correlation
structures for modeling dependence</h2>
<ul>
<li><code>corCompSymm</code>: compound symmetry</li>
<li><code>corSymm</code>: general</li>
<li><code>corAR1</code>: autoregressive of order 1</li>
<li><code>corCAR1</code>: continuous-time AR(1)</li>
<li><code>corARMA</code>: autoregressive-moving average</li>
<li><code>corExp</code>: exponential</li>
<li><code>corGaus</code>: Gaussian</li>
<li><code>corLin</code>: linear</li>
<li><code>corRatio</code>: rational quadratic</li>
<li><code>corSpher</code>: spherical</li>
</ul>
</div>
</div>
<div id="session-info" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Session Info</h1>
<pre class="r fold-hide"><code>sessionInfo()</code></pre>
<pre><code>R version 4.3.0 (2023-04-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 20.04.6 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0 
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] ggplot2_3.4.2          MCMCglmm_2.34          ape_5.7-1             
 [4] coda_0.19-4            MASS_7.3-58.4          lmerTest_3.1-3        
 [7] nlme_3.1-162           lme4_1.1-33            Matrix_1.5-4          
[10] petersenlab_0.1.2-9017

loaded via a namespace (and not attached):
 [1] tidyselect_1.2.0    psych_2.3.3         viridisLite_0.4.2  
 [4] farver_2.1.1        dplyr_1.1.2         fastmap_1.1.1      
 [7] tensorA_0.36.2      digest_0.6.31       rpart_4.1.19       
[10] lifecycle_1.0.3     cluster_2.1.4       magrittr_2.0.3     
[13] compiler_4.3.0      rlang_1.1.1         Hmisc_5.1-0        
[16] sass_0.4.6          tools_4.3.0         utf8_1.2.3         
[19] yaml_2.3.7          data.table_1.14.8   knitr_1.42         
[22] labeling_0.4.2      htmlwidgets_1.6.2   mnormt_2.1.1       
[25] plyr_1.8.8          RColorBrewer_1.1-3  withr_2.5.0        
[28] foreign_0.8-84      numDeriv_2016.8-1.1 nnet_7.3-18        
[31] grid_4.3.0          stats4_4.3.0        fansi_1.0.4        
[34] lavaan_0.6-15       xtable_1.8-4        colorspace_2.1-0   
[37] scales_1.2.1        cli_3.6.1           mvtnorm_1.1-3      
[40] rmarkdown_2.21      generics_0.1.3      rstudioapi_0.14    
[43] reshape2_1.4.4      minqa_1.2.5         DBI_1.1.3          
[46] cachem_1.0.8        stringr_1.5.0       splines_4.3.0      
[49] parallel_4.3.0      base64enc_0.1-3     mitools_2.4        
[52] vctrs_0.6.2         boot_1.3-28.1       jsonlite_1.8.4     
[55] Formula_1.2-5       htmlTable_2.4.1     jquerylib_0.1.4    
[58] glue_1.6.2          nloptr_2.0.3        stringi_1.7.12     
[61] cubature_2.0.4.6    gtable_0.3.3        quadprog_1.5-8     
[64] munsell_0.5.0       tibble_3.2.1        pillar_1.9.0       
[67] htmltools_0.5.5     R6_2.5.1            mix_1.0-11         
[70] evaluate_0.21       pbivnorm_0.6.0      lattice_0.21-8     
[73] highr_0.10          backports_1.4.1     corpcor_1.6.10     
[76] bslib_0.4.2         Rcpp_1.0.10         gridExtra_2.3      
[79] checkmate_2.2.0     xfun_0.39           pkgconfig_2.0.3    </code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiSGllcmFyY2hpY2FsIExpbmVhciBNb2RlbGluZyIKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZSA9IEZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoCiAgZWNobyA9IFRSVUUsCiAgZXJyb3IgPSBUUlVFLAogIGNvbW1lbnQgPSAiIiwKICBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IikKYGBgCgojIFByZWFtYmxlCgojIyBJbnN0YWxsIExpYnJhcmllcwoKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICJmb2xkLWhpZGUifQojaW5zdGFsbC5wYWNrYWdlcygicmVtb3RlcyIpCiNyZW1vdGVzOjppbnN0YWxsX2dpdGh1YigiRGV2UHN5TGFiL3BldGVyc2VubGFiIikKYGBgCgojIyBMb2FkIExpYnJhcmllcwoKYGBge3IsIG1lc3NhZ2UgPSBGQUxTRSwgd2FybmluZyA9IEZBTFNFLCBjbGFzcy5zb3VyY2UgPSAiZm9sZC1oaWRlIn0KbGlicmFyeSgicGV0ZXJzZW5sYWIiKQpsaWJyYXJ5KCJsbWU0IikKbGlicmFyeSgibmxtZSIpCmxpYnJhcnkoImxtZXJUZXN0IikKbGlicmFyeSgiTUFTUyIpCmxpYnJhcnkoIk1DTUNnbG1tIikKbGlicmFyeSgiZ2dwbG90MiIpCmBgYAoKIyMgSW1wb3J0IERhdGEKCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAiZm9sZC1oaWRlIn0KbXlkYXRhIDwtIHJlYWQuY3N2KCJodHRwczovL29zZi5pby9jcW4zZC9kb3dubG9hZCIpCmBgYAoKIyMgU2ltdWxhdGUgRGF0YQoKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICJmb2xkLWhpZGUifQpzZXQuc2VlZCg1MjI0MikKCm15ZGF0YSRvdXRjb21lIDwtIHJwb2lzKG5yb3cobXlkYXRhKSwgNCkKYGBgCgojIFRlcm1zCgpUaGVzZSBtb2RlbHMgZ28gYnkgYSB2YXJpZXR5IG9mIGRpZmZlcmVudCB0ZXJtczoKCi0gaGllcmFyY2hpY2FsIGxpbmVhciBtb2RlbCAoSExNKQotIG11bHRpbGV2ZWwgbW9kZWwgKE1MTSkKLSBtaXhlZCBlZmZlY3RzIG1vZGVsCi0gbWl4ZWQgbW9kZWwKCiMgT3ZlcnZpZXcKCmh0dHBzOi8vaXNhYWN0cGV0ZXJzZW4uZ2l0aHViLmlvL1ByaW5jaXBsZXMtUHN5Y2hvbG9naWNhbC1Bc3Nlc3NtZW50L3JlbGlhYmlsaXR5Lmh0bWwjbWl4ZWRNb2RlbHMKCiMgUHJlLU1vZGVsIENvbXB1dGF0aW9uCgpJdCBjYW4gYmUgaGVscGZ1bCB0byBjZW50ZXIgdGhlIGFnZS90aW1lIHZhcmlhYmxlIHNvIHRoYXQgdGhlIGludGVyY2VwdCBpbiBhIGdyb3d0aCBjdXJ2ZSBtb2RlbCBoYXMgbWVhbmluZy4KRm9yIGluc3RhbmNlLCB3ZSBjYW4gc3VidHJhY3QgdGhlIHlvdW5nZXN0IHBhcnRpY2lwYW50IGFnZSB0byBzZXQgdGhlIGludGVyY2VwdHMgdG8gYmUgdGhlIGVhcmxpZXN0IGFnZSBpbiB0aGUgc2FtcGxlLgoKYGBge3J9Cm15ZGF0YSRhZ2VZZWFycyA8LSBteWRhdGEkYWdlIC8gMTIKbXlkYXRhJGFnZU1vbnRoc0NlbnRlcmVkIDwtIG15ZGF0YSRhZ2UgLSBtaW4obXlkYXRhJGFnZSwgbmEucm0gPSBUUlVFKQoKbXlkYXRhJGFnZVllYXJzQ2VudGVyZWQgPC0gbXlkYXRhJGFnZU1vbnRoc0NlbnRlcmVkIC8gMTIKYGBgCgojIEVzdGltYXRvcjogTUwgb3IgUkVNTAoKRm9yIHNtYWxsIHNhbXBsZSBzaXplcywgcmVzdHJpY3RlZCBtYXhpbXVtIGxpa2VsaWhvb2QgKFJFTUwpIGlzIHByZWZlcnJlZCBvdmVyIG1heGltdW0gbGlrZWxpaG9vZCAoTUwpLgpNTCBwcmVmZXJyZWQgd2hlbiB0aGVyZSBpcyBhIHNtYWxsIG51bWJlciAoPCA0KSBvZiBmaXhlZCBlZmZlY3RzOyBSRU1MIGlzIHByZWZlcnJlZCB3aGVuIHRoZXJlIGFyZSBtb3JlICg+IDQpIGZpeGVkIGVmZmVjdHMuClRoZSBncmVhdGVyIHRoZSBudW1iZXIgb2YgZml4ZWQgZWZmZWN0cywgdGhlIGdyZWF0ZXIgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBSRU1MIGFuZCBNTCBlc3RpbWF0ZXMuCkxpa2VsaWhvb2QgcmF0aW8gKExSKSB0ZXN0cyBmb3IgUkVNTCByZXF1aXJlIGV4YWN0bHkgdGhlIHNhbWUgZml4ZWQgZWZmZWN0cyBzcGVjaWZpY2F0aW9uIGluIGJvdGggbW9kZWxzLgpTbywgdG8gY29tcGFyZSBtb2RlbHMgd2l0aCBkaWZmZXJlbnQgZml4ZWQgZWZmZWN0cyB3aXRoIGFuIExSIHRlc3QgKHRvIGRldGVybWluZSB3aGV0aGVyIHRvIGluY2x1ZGUgYSBwYXJ0aWN1bGFyIGZpeGVkIGVmZmVjdCksIE1MIG11c3QgYmUgdXNlZC4KSW4gY29udHJhc3QgdG8gdGhlIG1heGltdW0gbGlrZWxpaG9vZCBlc3RpbWF0aW9uLCBSRU1MIGNhbiBwcm9kdWNlIHVuYmlhc2VkIGVzdGltYXRlcyBvZiB2YXJpYW5jZSBhbmQgY292YXJpYW5jZSBwYXJhbWV0ZXJzLCB2YXJpYW5jZSBlc3RpbWF0ZXMgYXJlIGxhcmdlciBpbiBSRU1MIHRoYW4gTUwuClRvIGNvbXBhcmUgd2hldGhlciBhbiBlZmZlY3Qgc2hvdWxkIGJlIGZpeGVkIG9yIHJhbmRvbSwgdXNlIFJFTUwuClRvIHNpbXVsdGFuZW91c2x5IGNvbXBhcmUgZml4ZWQgYW5kIHJhbmRvbSBlZmZlY3RzLCB1c2UgTUwuCgojIExpbmVhciBNaXhlZCBNb2RlbHMgeyNsaW5lYXJ9CgpUaGUgZm9sbG93aW5nIG1vZGVscyBhcmUgbW9kZWxzIHRoYXQgYXJlIGZpdCBpbiBhIGxpbmVhciBtaXhlZCBtb2RlbGluZyBmcmFtZXdvcmsuCgojIyBHcm93dGggQ3VydmUgTW9kZWxzIHsjZ2NtfQoKIyMjIFBsb3QgT2JzZXJ2ZWQgR3Jvd3RoIEN1cnZlcwoKYGBge3J9CmdncGxvdCgKICBkYXRhID0gbXlkYXRhLAogIG1hcHBpbmcgPSBhZXMoCiAgICB4ID0gYWdlWWVhcnMsCiAgICB5ID0gbWF0aCwKICAgIGdyb3VwID0gaWQpKSArCiAgZ2VvbV9saW5lKCkgKwogIHNjYWxlX3hfY29udGludW91cygKICAgIG5hbWUgPSAiQWdlIChZZWFycykiKSArCiAgc2NhbGVfeV9jb250aW51b3VzKAogICAgbmFtZSA9ICJNYXRoIFNjb3JlIikKYGBgCgojIyMgYGxtZTRgCgpgYGB7cn0KbGluZWFyTWl4ZWRNb2RlbCA8LSBsbWVyKAogIG1hdGggfiBmZW1hbGUgKyBhZ2VZZWFyc0NlbnRlcmVkICsgKGFnZVllYXJzQ2VudGVyZWQgfCBpZCksCiAgZGF0YSA9IG15ZGF0YSwKICBSRU1MID0gRkFMU0UsICNmb3IgTUwKICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlLAogIGNvbnRyb2wgPSBsbWVyQ29udHJvbChvcHRpbWl6ZXIgPSAiYm9ieXFhIikpCgpzdW1tYXJ5KGxpbmVhck1peGVkTW9kZWwpCmBgYAoKIyMjIyBQcm90b3lwaWNhbCBHcm93dGggQ3VydmUKCmBgYHtyfQpuZXdEYXRhIDwtIGV4cGFuZC5ncmlkKAogIGZlbWFsZSA9IGMoMCwgMSksCiAgYWdlWWVhcnMgPSBjKAogICAgbWluKG15ZGF0YSRhZ2VZZWFycywgbmEucm0gPSBUUlVFKSwKICAgIG1heChteWRhdGEkYWdlWWVhcnMsIG5hLnJtID0gVFJVRSkpCikKCm5ld0RhdGEkYWdlWWVhcnNDZW50ZXJlZCA8LSBuZXdEYXRhJGFnZVllYXJzIC0gbWluKG5ld0RhdGEkYWdlWWVhcnMpCgpuZXdEYXRhJHNleCA8LSBOQQpuZXdEYXRhJHNleFt3aGljaChuZXdEYXRhJGZlbWFsZSA9PSAwKV0gPC0gIm1hbGUiCm5ld0RhdGEkc2V4W3doaWNoKG5ld0RhdGEkZmVtYWxlID09IDEpXSA8LSAiZmVtYWxlIgpuZXdEYXRhJHNleCA8LSBhcy5mYWN0b3IobmV3RGF0YSRzZXgpCgpuZXdEYXRhJHByZWRpY3RlZFZhbHVlIDwtIHByZWRpY3QoCiAgbGluZWFyTWl4ZWRNb2RlbCwKICBuZXdkYXRhID0gbmV3RGF0YSwKICByZS5mb3JtID0gTkEKKQoKZ2dwbG90KAogIGRhdGEgPSBuZXdEYXRhLAogIG1hcHBpbmcgPSBhZXMoeCA9IGFnZVllYXJzLCB5ID0gcHJlZGljdGVkVmFsdWUsIGNvbG9yID0gc2V4KSkgKwogIHhsYWIoIkFnZSAoWWVhcnMpIikgKwogIHlsYWIoIk1hdGggU2NvcmUiKSArCiAgZ2VvbV9saW5lKCkKYGBgCgojIyMjIEluZGl2aWR1YWxzJyBHcm93dGggQ3VydmVzCgpgYGB7cn0KbXlkYXRhJHByZWRpY3RlZFZhbHVlIDwtIHByZWRpY3QoCiAgbGluZWFyTWl4ZWRNb2RlbCwKICBuZXdkYXRhID0gbXlkYXRhLAogIHJlLmZvcm0gPSBOVUxMCikKCmdncGxvdCgKICBkYXRhID0gbXlkYXRhLAogIG1hcHBpbmcgPSBhZXMoeCA9IGFnZVllYXJzLCB5ID0gcHJlZGljdGVkVmFsdWUsIGdyb3VwID0gZmFjdG9yKGlkKSkpICsKICB4bGFiKCJBZ2UgKFllYXJzKSIpICsKICB5bGFiKCJNYXRoIFNjb3JlIikgKwogIGdlb21fbGluZSgpCmBgYAoKIyMjIyBJbmRpdmlkdWFscycgVHJhamVjdG9yaWVzIE92ZXJsYWlkIHdpdGggUHJvdG90eXBpY2FsIFRyYWplY3RvcnkKCmBgYHtyfQpnZ3Bsb3QoCiAgZGF0YSA9IG15ZGF0YSwKICBtYXBwaW5nID0gYWVzKHggPSBhZ2VZZWFycywgeSA9IHByZWRpY3RlZFZhbHVlLCBncm91cCA9IGZhY3RvcihpZCkpKSArCiAgeGxhYigiQWdlIChZZWFycykiKSArCiAgeWxhYigiTWF0aCBTY29yZSIpICsKICBnZW9tX2xpbmUoKSArCiAgZ2VvbV9saW5lKAogICAgZGF0YSA9IG5ld0RhdGEsCiAgICBtYXBwaW5nID0gYWVzKHggPSBhZ2VZZWFycywgeSA9IHByZWRpY3RlZFZhbHVlLCBncm91cCA9IHNleCwgY29sb3IgPSBzZXgpLAogICAgbGluZXdpZHRoID0gMikKYGBgCgojIyMgYG5sbWVgCgpgYGB7cn0KbGluZWFyTWl4ZWRNb2RlbF9ubG1lIDwtIGxtZSgKICBtYXRoIH4gZmVtYWxlICsgYWdlWWVhcnNDZW50ZXJlZCwKICByYW5kb20gPSB+IDEgKyBhZ2VZZWFyc0NlbnRlcmVkfGlkLAogIGRhdGEgPSBteWRhdGEsCiAgbWV0aG9kID0gIk1MIiwKICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlKQoKc3VtbWFyeShsaW5lYXJNaXhlZE1vZGVsX25sbWUpCmBgYAoKIyBHZW5lcmFsaXplZCBMaW5lYXIgTWl4ZWQgTW9kZWxzIHsjZ2VuZXJhbGl6ZWR9CgpodHRwOi8vZ2xtbS53aWtpZG90LmNvbS9mYXEKCiMjIGBsbWVyYAoKYGBge3J9CmdlbmVyYWxpemVkTGluZWFyTWl4ZWRNb2RlbCA8LSBnbG1lcigKICBvdXRjb21lIH4gZmVtYWxlICsgYWdlWWVhcnNDZW50ZXJlZCArIChhZ2VZZWFyc0NlbnRlcmVkIHwgaWQpLAogIGZhbWlseSA9IHBvaXNzb24obGluayA9ICJsb2ciKSwKICBkYXRhID0gbXlkYXRhLAogIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCgpzdW1tYXJ5KGdlbmVyYWxpemVkTGluZWFyTWl4ZWRNb2RlbCkKYGBgCgojIyBgTUFTU2AKCmBgYHtyfQpnbG1tUFFMbW9kZWwgPC0gZ2xtbVBRTCgKICBvdXRjb21lIH4gZmVtYWxlICsgYWdlWWVhcnNDZW50ZXJlZCwKICByYW5kb20gPSB+IDEgKyBhZ2VZZWFyc0NlbnRlcmVkfGlkLAogIGZhbWlseSA9IHBvaXNzb24obGluayA9ICJsb2ciKSwKICBkYXRhID0gbXlkYXRhKQoKc3VtbWFyeShnbG1tUFFMbW9kZWwpCmBgYAoKIyMgYE1DTUNnbG1tYAoKYGBge3J9Ck1DTUNnbG1tTW9kZWwgPC0gTUNNQ2dsbW0oCiAgb3V0Y29tZSB+IGZlbWFsZSArIGFnZVllYXJzQ2VudGVyZWQsCiAgcmFuZG9tID0gfiB1cyhhZ2VZZWFyc0NlbnRlcmVkKTppZCwKICBmYW1pbHkgPSAicG9pc3NvbiIsCiAgZGF0YSA9IG5hLm9taXQobXlkYXRhWyxjKCJpZCIsIm91dGNvbWUiLCJmZW1hbGUiLCJhZ2VZZWFyc0NlbnRlcmVkIildKSkKCnN1bW1hcnkoTUNNQ2dsbW1Nb2RlbCkKYGBgCgojIE5vbmxpbmVhciBNaXhlZCBNb2RlbHMgeyNub25saW5lYXJ9CgpgYGB7cn0Kbm9ubGluZWFyTW9kZWwgPC0gbmxtZSgKICBoZWlnaHQgfiBTU2FzeW1wKGFnZSwgQXN5bSwgUjAsIGxyYyksCiAgZGF0YSA9IExvYmxvbGx5LAogIGZpeGVkID0gQXN5bSArIFIwICsgbHJjIH4gMSwKICByYW5kb20gPSBBc3ltIH4gMSkKCnN1bW1hcnkobm9ubGluZWFyTW9kZWwpCmBgYAoKIyBSb2J1c3QgTWl4ZWQgTW9kZWxzCgpUbyBldmFsdWF0ZSB0aGUgZXh0ZW50IHRvIHdoaWNoIGEgZmluZGluZyBjb3VsZCBkcml2ZW4gYnkgb3V0bGllcnMsIHRoaXMgY291bGQgYmUgZG9uZSBpbiBhIG51bWJlciBvZiBkaWZmZXJlbnQgd2F5cywgc3VjaCBhczoKCi0gaWRlbnRpZnlpbmcgYW5kIGV4Y2x1ZGluZyBpbmZsdWVudGlhbCBvYnNlcnZhdGlvbnMgYmFzZWQgb24gREZCRVRBUyBvciBDb29r4oCZcyBkaXN0YW5jZSAoTmlldXdlbmh1aXMsIEdyb3Rlbmh1aXMsICYgUGVsemVyLCAyMDEyKQotIGZpdHRpbmcgbWl4ZWQgbW9kZWxzIHVzaW5nIHJhbmstYmFzZWQgZXN0aW1hdGlvbiAoQmlsZ2ljICYgU3VzbWFubiwgMjAxMzsgRmluY2gsIDIwMTcpIG9yIHJvYnVzdCBlc3RpbWF0aW5nIGVxdWF0aW9ucyAoS29sbGVyLCAyMDE2KQotIGVzdGltYXRpbmcgcm9idXN0IHN0YW5kYXJkIGVycm9ycyB1c2luZyBhIHNhbmR3aWNoIGVzdGltYXRvciAoV2FuZyAmIE1lcmtsZSwgMjAxOCkKCiMgQXNzdW1wdGlvbnMKClRoZSB3aXRoaW4tZ3JvdXAgZXJyb3JzOgoKMS4gYXJlIGluZGVwZW5kZW50CjIuIGFyZSBpZGVudGljYWxseSBub3JtYWxseSBkaXN0cmlidXRlZAozLiBoYXZlIG1lYW4gemVybyBhbmQgdmFyaWFuY2Ugc2lnbWEtc3F1YXJlZAo0LiBhcmUgaW5kZXBlbmRlbnQgb2YgdGhlIHJhbmRvbSBlZmZlY3RzCgpUaGUgcmFuZG9tIGVmZmVjdHM6Cgo1LiBhcmUgbm9ybWFsbHkgZGlzdHJpYnV0ZWQKNi4gaGF2ZSBtZWFuIHplcm8gYW5kIGNvdmFyaWFuY2UgbWF0cml4IFBzaSAobm90IGRlcGVuZGluZyBvbiB0aGUgZ3JvdXApCjcuIGFyZSBpbmRlcGVuZGVudCBmb3IgZGlmZmVyZW50IGdyb3VwcwoKIyBFeGFtaW5pbmcgTW9kZWwgQXNzdW1wdGlvbnMKCiMjIFJlc291cmNlcwoKUGluaGVpcm8gYW5kIEJhdGVzICgyMDAwKSBib29rIChwLiAxNzQsIHNlY3Rpb24gNC4zLjEpCgpodHRwczovL3N0YXRzLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy83Nzg5MS9jaGVja2luZy1hc3N1bXB0aW9ucy1sbWVyLWxtZS1taXhlZC1tb2RlbHMtaW4tcgoKIyMgUVEgUGxvdHMKCk1ha2UgUVEgcGxvdHMgZm9yIGVhY2ggbGV2ZWwgb2YgdGhlIHJhbmRvbSBlZmZlY3RzLgpWYXJ5IHRoZSBsZXZlbCBmcm9tIDAsIDEsIHRvIDIgc28gdGhhdCB5b3UgY2FuIGNoZWNrIHRoZSBiZXR3ZWVuLSBhbmQgd2l0aGluLXN1YmplY3QgcmVzaWR1YWxzLgoKYGBge3J9CnFxbm9ybShsaW5lYXJNaXhlZE1vZGVsX25sbWUsCiAgICAgICB+IHJhbmVmKC4sIGxldmVsID0gMSkpCmBgYAoKIyMgUFAgUGxvdHMKCmBgYHtyfQpwcFBsb3QobGluZWFyTWl4ZWRNb2RlbCkKYGBgCgojIyBRUSBQbG90IG9mIHJlc2lkdWFscwoKYGBge3J9CnFxbm9ybShyZXNpZChsaW5lYXJNaXhlZE1vZGVsKSkKcXFsaW5lKHJlc2lkKGxpbmVhck1peGVkTW9kZWwpKQpgYGAKCiMjIFBsb3QgcmVzaWR1YWxzCgpgYGB7cn0KcGxvdChsaW5lYXJNaXhlZE1vZGVsKQpgYGAKCiMjIFBsb3QgcmVzaWR1YWxzIGJ5IGdyb3VwIChpbiB0aGUgZXhhbXBsZSBiZWxvdywgbGV2ZWwgMiByZXByZXNlbnRzIHRoZSBpbmRpdmlkdWFsKQoKYGBge3J9CnBsb3QobGluZWFyTWl4ZWRNb2RlbCwKICAgICBhcy5mYWN0b3IoaWQpIH4gcmVzaWQoLiksCiAgICAgYWJsaW5lID0gMCwKICAgICB4bGFiID0gIlJlc2lkdWFscyIpCmBgYAoKIyMgUGxvdCByZXNpZHVhbHMgYnkgbGV2ZWxzIG9mIGEgcHJlZGljdG9yCgpgYGB7cn0KcGxvdChsaW5lYXJNaXhlZE1vZGVsX25sbWUsCiAgICAgcmVzaWQoLiwgdHlwZSA9ICJwIikgfiBmaXR0ZWQoLikgfCBmZW1hbGUpICN0eXBlID0gInAiIHNwZWNpZmllcyBzdGFuZGFyZGl6ZWQgcmVzaWR1YWxzCmBgYAoKIyMgQ2FuIG1vZGVsIGhldGVyb3NjZWRhc3RpY2l0eSBvZiB0aGUgd2l0aGluLWdyb3VwIGVycm9yIHdpdGggdGhlIHdlaWdodHMgYXJndW1lbnQKCmBgYHtyfQpsaW5lYXJNaXhlZE1vZGVsX25sbWVWYXJTdHJ1Y3R1cmUgPC0gbG1lKAogIG1hdGggfiBmZW1hbGUgKyBhZ2VZZWFyc0NlbnRlcmVkLAogIHJhbmRvbSA9IH4gMSArIGFnZVllYXJzQ2VudGVyZWR8aWQsCiAgd2VpZ2h0cyA9IHZhcklkZW50KGZvcm0gPSB+IDEgfCBmZW1hbGUpLAogIG1ldGhvZCA9ICJNTCIsCiAgZGF0YSA9IG15ZGF0YSwKICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlKQoKc3VtbWFyeShsaW5lYXJNaXhlZE1vZGVsX25sbWVWYXJTdHJ1Y3R1cmUpCmBgYAoKIyMgUGxvdCBvYnNlcnZlZCBhbmQgZml0dGVkIHZhbHVlcwoKYGBge3J9CnBsb3QobGluZWFyTWl4ZWRNb2RlbCwKICAgICBtYXRoIH4gZml0dGVkKC4pKQpgYGAKCiMjIFBsb3QgUVEgcGxvdCBvZiByZXNpZHVhbHMgYnkgbGV2ZWxzIG9mIGEgcHJlZGljdG9yCgpgYGB7cn0KcXFub3JtKGxpbmVhck1peGVkTW9kZWxfbmxtZSwgfiByZXNpZCguKSB8IGZlbWFsZSkKcXFub3JtKGxpbmVhck1peGVkTW9kZWxfbmxtZSwgfiByZXNpZCguKSkKYGBgCgojIyBRUSBwbG90IG9mIHJhbmRvbSBlZmZlY3RzCgpNYWtlIFFRIHBsb3RzIGZvciBlYWNoIGxldmVsIG9mIHRoZSByYW5kb20gZWZmZWN0cy4KVmFyeSB0aGUgbGV2ZWwgZnJvbSAwLCAxLCB0byAyIHNvIHRoYXQgeW91IGNhbiBjaGVjayB0aGUgYmV0d2Vlbi0gYW5kIHdpdGhpbi1zdWJqZWN0IHJlc2lkdWFscy4KCgpgYGB7cn0KcXFub3JtKGxpbmVhck1peGVkTW9kZWxfbmxtZSwKICAgICAgIH4gcmFuZWYoLiwgbGV2ZWwgPSAwKSkKcXFub3JtKGxpbmVhck1peGVkTW9kZWxfbmxtZSwKICAgICAgIH4gcmFuZWYoLiwgbGV2ZWwgPSAxKSkKcXFub3JtKGxpbmVhck1peGVkTW9kZWxfbmxtZSwKICAgICAgIH4gcmFuZWYoLiwgbGV2ZWwgPSAyKSkKYGBgCgojIyBRUSBwbG90IG9mIHJhbmRvbSBlZmZlY3RzIGJ5IGxldmVscyBvZiBhIHByZWRpY3RvcgoKYGBge3J9CnFxbm9ybShsaW5lYXJNaXhlZE1vZGVsX25sbWUsIAogICAgICAgfiByYW5lZiguLCBsZXZlbCA9IDEpIHwgZmVtYWxlKQpgYGAKCiMjIFBhaXJzIHBsb3QKCmBgYHtyfQpwYWlycyhsaW5lYXJNaXhlZE1vZGVsX25sbWUpCnBhaXJzKGxpbmVhck1peGVkTW9kZWxfbmxtZSwKICAgICAgfiByYW5lZiguLCBsZXZlbCA9IDEpIHwgZmVtYWxlKQpgYGAKCiMjIFZhcmlhbmNlIGZ1bmN0aW9ucyBmb3IgbW9kZWxpbmcgaGV0ZXJvc2NlZGFzdGljaXR5CgotIGB2YXJGaXhlZGA6IGZpeGVkIHZhcmlhbmNlCi0gYHZhcklkZW50YDogZGlmZmVyZW50IHZhcmlhbmNlcyBwZXIgc3RyYXR1bQotIGB2YXJQb3dlcmA6IHBvd2VyIG9mIGNvdmFyaWF0ZQotIGB2YXJFeHBgOiBleHBvbmVudGlhbCBvZiBjb3ZhcmlhdGUKLSBgdmFyQ29uc3RQb3dlcmA6IGNvbnN0YW50IHBsdXMgcG93ZXIgb2YgY292YXJpYXRlCi0gYHZhckNvbWJgOiBjb21iaW5hdGlvbiBvZiB2YXJpYW5jZSBmdW5jdGlvbnMKCiMjIENvcnJlbGF0aW9uIHN0cnVjdHVyZXMgZm9yIG1vZGVsaW5nIGRlcGVuZGVuY2UKCi0gYGNvckNvbXBTeW1tYDogY29tcG91bmQgc3ltbWV0cnkKLSBgY29yU3ltbWA6IGdlbmVyYWwKLSBgY29yQVIxYDogYXV0b3JlZ3Jlc3NpdmUgb2Ygb3JkZXIgMQotIGBjb3JDQVIxYDogY29udGludW91cy10aW1lIEFSKDEpCi0gYGNvckFSTUFgOiBhdXRvcmVncmVzc2l2ZS1tb3ZpbmcgYXZlcmFnZQotIGBjb3JFeHBgOiBleHBvbmVudGlhbAotIGBjb3JHYXVzYDogR2F1c3NpYW4KLSBgY29yTGluYDogbGluZWFyCi0gYGNvclJhdGlvYDogcmF0aW9uYWwgcXVhZHJhdGljCi0gYGNvclNwaGVyYDogc3BoZXJpY2FsCgojIFNlc3Npb24gSW5mbwoKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICJmb2xkLWhpZGUifQpzZXNzaW9uSW5mbygpCmBgYAo=</div>
<script type="text/javascript" src="includes/external-links.js"></script>

<br>
<hr>
<br>

<!-- Add lab logo -->
<p style="text-align: center;">
    <a href="https://developmental-psychopathology.lab.uiowa.edu" target="_blank">
        <img alt="Developmental Psychopathology Lab" src="images/formalLogo.png" width="60%">
    </a>
</p>

<br>
<hr>
<br>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Add font awesome icons -->
<p style="text-align: center;">
    <a href="https://github.com/DevPsyLab" target="_blank" class="fa fa-github fa-fw fa-3x"></a>
    <a href="https://twitter.com/devpsylab" target="_blank" class="fa fa-twitter fa-fw fa-3x"></a>
    <a href="https://www.facebook.com/DevPsyLab" target="_blank" class="fa fa-facebook fa-fw fa-3x"></a>
	<a href="https://www.instagram.com/dev_psy_lab" target="_blank" class="fa fa-instagram fa-fw fa-3x"></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("hlm.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
