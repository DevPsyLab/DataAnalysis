<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Regression</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TYR0QMREEW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TYR0QMREEW');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="includes/custom.css" type="text/css" />
<link rel="stylesheet" href="font/css/roboto.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Analysis Guides for the Developmental Psychopathology Lab</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Guides</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://devpsylab.github.io/LabWiki">Lab Wiki</a>
</li>
<li>
  <a href="https://developmental-psychopathology.lab.uiowa.edu">Lab Website</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Regression</h1>

</div>


<div id="preamble" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Preamble</h1>
<div id="install-libraries" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Install Libraries</h2>
<pre class="r fold-hide"><code>#install.packages(&quot;remotes&quot;)
#remotes::install_git(&quot;https://research-git.uiowa.edu/PetersenLab/petersenlab.git&quot;)</code></pre>
</div>
<div id="load-libraries" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Load Libraries</h2>
<pre class="r fold-hide"><code>library(&quot;petersenlab&quot;)
library(&quot;MASS&quot;)
library(&quot;tidyverse&quot;)
library(&quot;psych&quot;)
library(&quot;rms&quot;)
library(&quot;robustbase&quot;)
library(&quot;brms&quot;)
library(&quot;cvTools&quot;)
library(&quot;car&quot;)
library(&quot;mgcv&quot;)
library(&quot;AER&quot;)
library(&quot;foreign&quot;)
library(&quot;olsrr&quot;)
library(&quot;asbio&quot;)</code></pre>
<pre><code>Error in library(&quot;asbio&quot;): there is no package called &#39;asbio&#39;</code></pre>
<pre class="r fold-hide"><code>library(&quot;quantreg&quot;)
library(&quot;mblm&quot;)
library(&quot;effects&quot;)
library(&quot;correlation&quot;)
library(&quot;interactions&quot;)</code></pre>
<pre><code>Error in library(&quot;interactions&quot;): there is no package called &#39;interactions&#39;</code></pre>
</div>
</div>
<div id="import-data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Import data</h1>
<pre class="r fold-hide"><code>mydata &lt;- read.csv(&quot;https://osf.io/8syp5/download&quot;)</code></pre>
</div>
<div id="data-preparation" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Data preparation</h1>
<pre class="r fold-hide"><code>mydata$countVariable &lt;- as.integer(mydata$bpi_antisocialT2Sum)
mydata$orderedVariable &lt;- factor(mydata$countVariable, ordered = TRUE)

mydata$female &lt;- NA
mydata$female[which(mydata$sex == &quot;male&quot;)] &lt;- 0
mydata$female[which(mydata$sex == &quot;female&quot;)] &lt;- 1</code></pre>
</div>
<div id="linear-regression" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Linear Regression</h1>
<div id="linear-regression-model" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Linear regression model</h2>
<pre class="r fold-show"><code>multipleRegressionModel &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                              data = mydata,
                              na.action = na.exclude)

summary(multipleRegressionModel)</code></pre>
<pre><code>
Call:
lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
    data = mydata, na.action = na.exclude)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.3755 -1.2337 -0.2212  0.9911 12.8017 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              1.19830    0.05983  20.029  &lt; 2e-16 ***
bpi_antisocialT1Sum      0.46553    0.01858  25.049  &lt; 2e-16 ***
bpi_anxiousDepressedSum  0.16075    0.02916   5.513 3.83e-08 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.979 on 2871 degrees of freedom
  (8656 observations deleted due to missingness)
Multiple R-squared:  0.262, Adjusted R-squared:  0.2615 
F-statistic: 509.6 on 2 and 2871 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r fold-show"><code>confint(multipleRegressionModel)</code></pre>
<pre><code>                            2.5 %    97.5 %
(Intercept)             1.0809881 1.3156128
bpi_antisocialT1Sum     0.4290884 0.5019688
bpi_anxiousDepressedSum 0.1035825 0.2179258</code></pre>
<div id="remove-missing-data" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Remove Missing Data</h3>
<pre class="r fold-show"><code>multipleRegressionModelNoMissing &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                       data = mydata,
                                       na.action = na.omit)

multipleRegressionModelNoMissing &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                       data = mydata %&gt;% select(bpi_antisocialT2Sum, bpi_antisocialT1Sum, bpi_anxiousDepressedSum) %&gt;% na.omit)</code></pre>
</div>
</div>
<div id="linear-regression-model-on-correlationcovariance-matrix-for-pairwise-deletion" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Linear regression model on correlation/covariance matrix (for pairwise deletion)</h2>
<p>Also see here: <a href="https://stats.stackexchange.com/questions/158366/fit-multiple-regression-model-with-pairwise-deletion-or-on-a-correlation-covari/173002#173002" class="uri">https://stats.stackexchange.com/questions/158366/fit-multiple-regression-model-with-pairwise-deletion-or-on-a-correlation-covari/173002#173002</a></p>
<pre class="r fold-show"><code>multipleRegressionModelPairwise &lt;- setCor(y = &quot;bpi_antisocialT2Sum&quot;,
                                          x = c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_anxiousDepressedSum&quot;),
                                          data = cov(mydata[,c(&quot;bpi_antisocialT2Sum&quot;,&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_anxiousDepressedSum&quot;)], use = &quot;pairwise.complete.obs&quot;),
                                          n.obs = nrow(mydata))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r fold-show"><code>summary(multipleRegressionModelPairwise)</code></pre>
<pre><code>
Multiple Regression from raw data 
setCor(y = &quot;bpi_antisocialT2Sum&quot;, x = c(&quot;bpi_antisocialT1Sum&quot;, 
    &quot;bpi_anxiousDepressedSum&quot;), data = cov(mydata[, c(&quot;bpi_antisocialT2Sum&quot;, 
    &quot;bpi_antisocialT1Sum&quot;, &quot;bpi_anxiousDepressedSum&quot;)], use = &quot;pairwise.complete.obs&quot;), 
    n.obs = nrow(mydata))

Multiple Regression from matrix input 

Beta weights 
                        bpi_antisocialT2Sum
(Intercept)                           0.000
bpi_antisocialT1Sum                  -0.031
bpi_anxiousDepressedSum              -1.004

Multiple R 
bpi_antisocialT2Sum 
                  1 

Multiple R2 
bpi_antisocialT2Sum 
                  1 

Cohen&#39;s set correlation R2 
[1] 1

Squared Canonical Correlations
NULL</code></pre>
<pre class="r fold-show"><code>multipleRegressionModelPairwise[c(&quot;coefficients&quot;,&quot;se&quot;,&quot;Probability&quot;,&quot;R2&quot;,&quot;shrunkenR2&quot;)]</code></pre>
<pre><code>$coefficients
                        bpi_antisocialT2Sum
(Intercept)                       0.0000000
bpi_antisocialT1Sum              -0.0311043
bpi_anxiousDepressedSum          -1.0040177

$se
                        bpi_antisocialT2Sum
(Intercept)                             NaN
bpi_antisocialT1Sum                     NaN
bpi_anxiousDepressedSum                 NaN

$Probability
                        bpi_antisocialT2Sum
(Intercept)                             NaN
bpi_antisocialT1Sum                     NaN
bpi_anxiousDepressedSum                 NaN

$R2
bpi_antisocialT2Sum 
                  1 

$shrunkenR2
bpi_antisocialT2Sum 
                Inf </code></pre>
</div>
<div id="linear-regression-model-with-robust-covariance-matrix-rms" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Linear regression model with robust covariance matrix (rms)</h2>
<pre class="r fold-show"><code>rmsMultipleRegressionModel &lt;- robcov(ols(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                         data = mydata,
                                         x = TRUE,
                                         y = TRUE))

rmsMultipleRegressionModel</code></pre>
<pre><code>Frequencies of Missing Values Due to Each Variable
    bpi_antisocialT2Sum     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
                   7501                    7613                    7616 

Linear Regression Model
 
 ols(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
     data = mydata, x = TRUE, y = TRUE)
 
 
                 Model Likelihood    Discrimination    
                       Ratio Test           Indexes    
 Obs    2874    LR chi2    873.09    R2       0.262    
 sigma1.9786    d.f.            2    R2 adj   0.261    
 d.f.   2871    Pr(&gt; chi2) 0.0000    g        1.278    
 
 Residuals
 
     Min      1Q  Median      3Q     Max 
 -8.3755 -1.2337 -0.2212  0.9911 12.8017 
 
 
                         Coef   S.E.   t     Pr(&gt;|t|)
 Intercept               1.1983 0.0622 19.26 &lt;0.0001 
 bpi_antisocialT1Sum     0.4655 0.0229 20.30 &lt;0.0001 
 bpi_anxiousDepressedSum 0.1608 0.0330  4.87 &lt;0.0001 
 </code></pre>
<pre class="r fold-show"><code>confint(rmsMultipleRegressionModel)</code></pre>
<pre><code>                             2.5 %    97.5 %
Intercept               1.07631713 1.3202837
bpi_antisocialT1Sum     0.42056957 0.5104877
bpi_anxiousDepressedSum 0.09606644 0.2254418</code></pre>
</div>
<div id="robust-linear-regression-mm-type-iteratively-reweighted-least-squares-regression" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Robust linear regression (MM-type iteratively reweighted least squares regression)</h2>
<pre class="r fold-show"><code>robustLinearRegression &lt;- lmrob(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude)

summary(robustLinearRegression)</code></pre>
<pre><code>
Call:
lmrob(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
    data = mydata, na.action = na.exclude)
 \--&gt; method = &quot;MM&quot;
Residuals:
     Min       1Q   Median       3Q      Max 
-8.43518 -1.06680 -0.06707  1.14090 13.05599 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              0.94401    0.05406  17.464  &lt; 2e-16 ***
bpi_antisocialT1Sum      0.49135    0.02237  21.966  &lt; 2e-16 ***
bpi_anxiousDepressedSum  0.15766    0.03102   5.083 3.96e-07 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Robust residual standard error: 1.628 
  (8656 observations deleted due to missingness)
Multiple R-squared:  0.326, Adjusted R-squared:  0.3255 
Convergence in 14 IRWLS iterations

Robustness weights: 
 12 observations c(52,347,354,517,709,766,768,979,1618,2402,2403,2404)
     are outliers with |weight| = 0 ( &lt; 3.5e-05); 
 283 weights are ~= 1. The remaining 2579 ones are summarized as
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
0.0001311 0.8599000 0.9470000 0.8814000 0.9816000 0.9990000 
Algorithmic parameters: 
       tuning.chi                bb        tuning.psi        refine.tol 
        1.548e+00         5.000e-01         4.685e+00         1.000e-07 
          rel.tol         scale.tol         solve.tol       eps.outlier 
        1.000e-07         1.000e-10         1.000e-07         3.479e-05 
            eps.x warn.limit.reject warn.limit.meanrw 
        2.365e-11         5.000e-01         5.000e-01 
     nResample         max.it       best.r.s       k.fast.s          k.max 
           500             50              2              1            200 
   maxit.scale      trace.lev            mts     compute.rd fast.s.large.n 
           200              0           1000              0           2000 
                  psi           subsampling                   cov 
           &quot;bisquare&quot;         &quot;nonsingular&quot;         &quot;.vcov.avar1&quot; 
compute.outlier.stats 
                 &quot;SM&quot; 
seed : int(0) </code></pre>
<pre class="r fold-show"><code>confint(robustLinearRegression)</code></pre>
<pre><code>                             2.5 %    97.5 %
(Intercept)             0.83801566 1.0499981
bpi_antisocialT1Sum     0.44749135 0.5352118
bpi_anxiousDepressedSum 0.09683728 0.2184779</code></pre>
</div>
<div id="least-trimmed-squares-regression-for-removing-outliers" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Least trimmed squares regression (for removing outliers)</h2>
<pre class="r fold-show"><code>ltsRegression &lt;- ltsReg(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                        data = mydata,
                        na.action = na.exclude)

summary(ltsRegression)</code></pre>
<pre><code>
Call:
ltsReg.formula(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
    bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)

Residuals (from reweighted LS):
    Min      1Q  Median      3Q     Max 
-3.9305 -0.9091  0.0000  0.9997  3.9036 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
Intercept                0.74932    0.04795  15.626  &lt; 2e-16 ***
bpi_antisocialT1Sum      0.54338    0.01524  35.647  &lt; 2e-16 ***
bpi_anxiousDepressedSum  0.13826    0.02343   5.901 4.06e-09 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.534 on 2710 degrees of freedom
Multiple R-Squared: 0.4121, Adjusted R-squared: 0.4116 
F-statistic: 949.7 on 2 and 2710 DF,  p-value: &lt; 2.2e-16 </code></pre>
</div>
<div id="bayesian-linear-regression" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Bayesian linear regression</h2>
<pre class="r fold-show"><code>bayesianRegularizedRegression &lt;- brm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                     data = mydata,
                                     chains = 4,
                                     iter = 2000,
                                     seed = 52242)

summary(bayesianRegularizedRegression)</code></pre>
</div>
</div>
<div id="generalized-linear-regression" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Generalized Linear Regression</h1>
<div id="generalized-regression-model" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Generalized regression model</h2>
<p>In this example, we predict a count variable that has a poisson distribution. We could change the distribution.</p>
<pre class="r fold-show"><code>generalizedRegressionModel &lt;- glm(countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                  data = mydata,
                                  family = &quot;poisson&quot;,
                                  na.action = na.exclude)

summary(generalizedRegressionModel)</code></pre>
<pre><code>
Call:
glm(formula = countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
    family = &quot;poisson&quot;, data = mydata, na.action = na.exclude)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-5.2767  -0.9731  -0.1403   0.5939   6.0151  

Coefficients:
                        Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)             0.459999   0.019650  23.410  &lt; 2e-16 ***
bpi_antisocialT1Sum     0.141577   0.004891  28.948  &lt; 2e-16 ***
bpi_anxiousDepressedSum 0.047567   0.008036   5.919 3.23e-09 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 5849.4  on 2873  degrees of freedom
Residual deviance: 4562.6  on 2871  degrees of freedom
  (8656 observations deleted due to missingness)
AIC: 11482

Number of Fisher Scoring iterations: 5</code></pre>
<pre class="r fold-show"><code>confint(generalizedRegressionModel)</code></pre>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                             2.5 %     97.5 %
(Intercept)             0.42136094 0.49838751
bpi_antisocialT1Sum     0.13196544 0.15113708
bpi_anxiousDepressedSum 0.03177425 0.06327445</code></pre>
</div>
<div id="generalized-regression-model-rms" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Generalized regression model (rms)</h2>
<p>In this example, we predict a count variable that has a poisson distribution. We could change the distribution.</p>
<pre class="r fold-show"><code>rmsGeneralizedRegressionModel &lt;- Glm(countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                     data = mydata,
                                     x = TRUE,
                                     y = TRUE,
                                     family = &quot;poisson&quot;)

rmsGeneralizedRegressionModel</code></pre>
<pre><code>Frequencies of Missing Values Due to Each Variable
          countVariable     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
                   7501                    7613                    7616 

General Linear Model
 
 Glm(formula = countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
     family = &quot;poisson&quot;, data = mydata, x = TRUE, y = TRUE)
 
 
                        Model Likelihood    
                              Ratio Test    
       Obs    2874    LR chi2    1286.72    
 Residual d.f.2871    d.f.             2    
       g 0.3873236    Pr(&gt; chi2) &lt;0.0001    
 
                         Coef   S.E.   Wald Z Pr(&gt;|Z|)
 Intercept               0.4600 0.0196 23.41  &lt;0.0001 
 bpi_antisocialT1Sum     0.1416 0.0049 28.95  &lt;0.0001 
 bpi_anxiousDepressedSum 0.0476 0.0080  5.92  &lt;0.0001 
 </code></pre>
<pre class="r fold-show"><code>confint(rmsGeneralizedRegressionModel)</code></pre>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>Error in summary.rms(fitted): adjustment values not defined here or with datadist for bpi_antisocialT1Sum bpi_anxiousDepressedSum</code></pre>
</div>
<div id="bayesian-generalized-linear-model" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Bayesian generalized linear model</h2>
<p>In this example, we predict a count variable that has a poisson distribution. We could change the distribution. For example, we could use Gamma regression, <code>family = Gamma</code>, when the response variable is continuous and positive, and the coefficient of variation–rather than the variance–is constant.</p>
<pre class="r fold-show"><code>bayesianGeneralizedLinearRegression &lt;- brm(countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                           data = mydata,
                                           family = poisson,
                                           chains = 4,
                                           seed = 52242,
                                           iter = 2000)

summary(bayesianGeneralizedLinearRegression)</code></pre>
</div>
<div id="robust-generalized-regression" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Robust generalized regression</h2>
<pre class="r fold-show"><code>robustGeneralizedRegression &lt;- glmrob(countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                      data = mydata,
                                      family = &quot;poisson&quot;,
                                      na.action = na.exclude)

summary(robustGeneralizedRegression)</code></pre>
<pre><code>
Call:  glmrob(formula = countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,      family = &quot;poisson&quot;, data = mydata, na.action = na.exclude) 


Coefficients:
                        Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)             0.365934   0.020794  17.598  &lt; 2e-16 ***
bpi_antisocialT1Sum     0.156275   0.005046  30.969  &lt; 2e-16 ***
bpi_anxiousDepressedSum 0.050526   0.008332   6.064 1.32e-09 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
Robustness weights w.r * w.x: 
 2273 weights are ~= 1. The remaining 601 ones are summarized as
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.1286  0.5550  0.7574  0.7183  0.8874  0.9982 

Number of observations: 2874 
Fitted by method &#39;Mqle&#39;  (in 5 iterations)

(Dispersion parameter for poisson family taken to be 1)

No deviance values available 
Algorithmic parameters: 
   acc    tcc 
0.0001 1.3450 
maxit 
   50 
test.acc 
  &quot;coef&quot; </code></pre>
<pre class="r fold-show"><code>confint(robustGeneralizedRegression)</code></pre>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>Error in glm.control(acc = 1e-04, test.acc = &quot;coef&quot;, maxit = 50, tcc = 1.345): unused arguments (acc = 1e-04, test.acc = &quot;coef&quot;, tcc = 1.345)</code></pre>
</div>
<div id="ordinal-regression-model-rms" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Ordinal regression model (rms)</h2>
<pre class="r fold-show"><code>ordinalRegressionModel &lt;- robcov(orm(orderedVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                     data = mydata,
                                     x = TRUE,
                                     y = TRUE))

ordinalRegressionModel</code></pre>
<pre><code>Frequencies of Missing Values Due to Each Variable
        orderedVariable     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
                   7501                    7613                    7616 

Logistic (Proportional Odds) Ordinal Regression Model
 
 orm(formula = orderedVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
     data = mydata, x = TRUE, y = TRUE)
 
 
 Frequencies of Responses
 
   0   1   2   3   4   5   6   7   8   9  10  11  12  14 
 455 597 527 444 313 205 133  80  52  33  16   9   6   4 
 
 
                        Model Likelihood               Discrimination    Rank Discrim.    
                              Ratio Test                      Indexes          Indexes    
 Obs          2874    LR chi2     881.26    R2                  0.268    rho     0.506    
 Distinct Y     14    d.f.             2    R2(2,2874)          0.264                     
 Median Y        3    Pr(&gt; chi2) &lt;0.0001    R2(2,2803.4)        0.269                     
 max |deriv| 6e-06    Score chi2  916.79    |Pr(Y&gt;=median)-0.5| 0.188                     
                      Pr(&gt; chi2) &lt;0.0001                                                  
 
                         Coef   S.E.   Wald Z Pr(&gt;|Z|)
 bpi_antisocialT1Sum     0.4404 0.0208 21.16  &lt;0.0001 
 bpi_anxiousDepressedSum 0.1427 0.0266  5.36  &lt;0.0001 
 </code></pre>
<pre class="r fold-show"><code>confint(ordinalRegressionModel)</code></pre>
<pre><code>                              2.5 %     97.5 %
y&gt;=1                             NA         NA
y&gt;=2                    -0.79571122 -0.5575596
y&gt;=3                             NA         NA
y&gt;=4                             NA         NA
y&gt;=5                             NA         NA
y&gt;=6                             NA         NA
y&gt;=7                             NA         NA
y&gt;=8                             NA         NA
y&gt;=9                             NA         NA
y&gt;=10                            NA         NA
y&gt;=11                            NA         NA
y&gt;=12                            NA         NA
y&gt;=14                            NA         NA
bpi_antisocialT1Sum      0.39961501  0.4811892
bpi_anxiousDepressedSum  0.09053245  0.1948370</code></pre>
</div>
<div id="bayesian-ordinal-regression-model" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Bayesian ordinal regression model</h2>
<pre class="r fold-show"><code>bayesianOrdinalRegression &lt;- brm(orderedVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                 data = mydata,
                                 family = cumulative(),
                                 chains = 4,
                                 seed = 52242,
                                 iter = 2000)

summary(bayesianOrdinalRegression)</code></pre>
</div>
<div id="bayesian-count-regression-model" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Bayesian count regression model</h2>
<pre class="r fold-show"><code>bayesianCountRegression &lt;- brm(countVariable ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                               data = mydata,
                               family = &quot;poisson&quot;,
                               chains = 4,
                               seed = 52242,
                               iter = 2000)

summary(bayesianCountRegression)</code></pre>
</div>
<div id="logistic-regression-model-rms" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Logistic regression model (rms)</h2>
<pre class="r fold-show"><code>logisticRegressionModel &lt;- robcov(lrm(female ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                      data = mydata,
                                      x = TRUE,
                                      y = TRUE))

logisticRegressionModel</code></pre>
<pre><code>Frequencies of Missing Values Due to Each Variable
                 female     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
                      2                    7613                    7616 

Logistic Regression Model
 
 lrm(formula = female ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
     data = mydata, x = TRUE, y = TRUE)
 
 
                        Model Likelihood       Discrimination    Rank Discrim.    
                              Ratio Test              Indexes          Indexes    
 Obs          3914    LR chi2      66.63       R2       0.023    C       0.571    
  0           1965    d.f.             2      R2(2,3914)0.016    Dxy     0.142    
  1           1949    Pr(&gt; chi2) &lt;0.0001    R2(2,2935.5)0.022    gamma   0.147    
 max |deriv| 1e-12                             Brier    0.246    tau-a   0.071    
 
                         Coef    S.E.   Wald Z Pr(&gt;|Z|)
 Intercept                0.3002 0.0529  5.67  &lt;0.0001 
 bpi_antisocialT1Sum     -0.1244 0.0166 -7.48  &lt;0.0001 
 bpi_anxiousDepressedSum  0.0382 0.0253  1.51  0.1314  
 </code></pre>
<pre class="r fold-show"><code>confint(logisticRegressionModel)</code></pre>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>Error in summary.rms(fitted): adjustment values not defined here or with datadist for bpi_antisocialT1Sum bpi_anxiousDepressedSum</code></pre>
</div>
<div id="bayesian-logistic-regression-model" class="section level2" number="5.9">
<h2><span class="header-section-number">5.9</span> Bayesian logistic regression model</h2>
<pre class="r fold-show"><code>bayesianLogisticRegression &lt;- brm(female ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                  data = mydata,
                                  family = bernoulli,
                                  chains = 4,
                                  seed = 52242,
                                  iter = 2000)
                                       
summary(bayesianLogisticRegression)</code></pre>
</div>
</div>
<div id="hierarchical-linear-regression" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Hierarchical Linear Regression</h1>
<pre class="r fold-show"><code>model1 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum,
             data = mydata %&gt;% select(bpi_antisocialT2Sum, bpi_antisocialT1Sum, bpi_anxiousDepressedSum) %&gt;% na.omit,
             na.action = na.exclude)

model2 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
             data = mydata %&gt;% select(bpi_antisocialT2Sum, bpi_antisocialT1Sum, bpi_anxiousDepressedSum) %&gt;% na.omit,
             na.action = na.exclude)

summary(model2)$adj.r.squared</code></pre>
<pre><code>[1] 0.2614694</code></pre>
<pre class="r fold-show"><code>anova(model1, model2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Res.Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RSS"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Df"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Sum of Sq"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"2872","2":"11358.86","3":"NA","4":"NA","5":"NA","6":"NA","_rn_":"1"},{"1":"2871","2":"11239.86","3":"1","4":"119.0016","5":"30.39663","6":"3.834142e-08","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r fold-show"><code>summary(model2)$adj.r.squared - summary(model1)$adj.r.squared</code></pre>
<pre><code>[1] 0.007559301</code></pre>
</div>
<div id="moderation" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Moderated Multiple Regression</h1>
<p><a href="https://cran.r-project.org/web/packages/interactions/vignettes/interactions.html" class="uri">https://cran.r-project.org/web/packages/interactions/vignettes/interactions.html</a></p>
<p>Make sure to mean-center or orthogonalize predictors before computing the interaction term.</p>
<div id="model" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Model</h2>
<pre class="r fold-show"><code>states &lt;- as.data.frame(state.x77)
interactionModel &lt;- lm(Income ~ Illiteracy * Murder + `HS Grad`, data = states)</code></pre>
</div>
<div id="plots" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Plots</h2>
<pre class="r fold-show"><code>interact_plot(interactionModel, pred = Illiteracy, modx = Murder)</code></pre>
<pre><code>Error in interact_plot(interactionModel, pred = Illiteracy, modx = Murder): could not find function &quot;interact_plot&quot;</code></pre>
<pre class="r fold-show"><code>interact_plot(interactionModel, pred = Illiteracy, modx = Murder, plot.points = TRUE)</code></pre>
<pre><code>Error in interact_plot(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;interact_plot&quot;</code></pre>
<pre class="r fold-show"><code>interact_plot(interactionModel, pred = Illiteracy, modx = Murder, interval = TRUE)</code></pre>
<pre><code>Error in interact_plot(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;interact_plot&quot;</code></pre>
<pre class="r fold-show"><code>johnson_neyman(interactionModel, pred = Illiteracy, modx = Murder, alpha = .05)</code></pre>
<pre><code>Error in johnson_neyman(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;johnson_neyman&quot;</code></pre>
</div>
<div id="simple-slopes-analysis" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Simple Slopes Analysis</h2>
<pre class="r fold-show"><code>sim_slopes(interactionModel, pred = Illiteracy, modx = Murder, johnson_neyman = FALSE)</code></pre>
<pre><code>Error in sim_slopes(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;sim_slopes&quot;</code></pre>
<pre class="r fold-show"><code>sim_slopes(interactionModel,
           pred = Illiteracy,
           modx = Murder,
           modx.values = c(0, 5, 10),
           johnson_neyman = FALSE)</code></pre>
<pre><code>Error in sim_slopes(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;sim_slopes&quot;</code></pre>
</div>
<div id="johnson-neyman-intervals" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Johnson-Neyman intervals</h2>
<p>Indicates all the values of the moderator for which the slope of the predictor is statistically significant.</p>
<pre class="r fold-show"><code>sim_slopes(interactionModel, pred = Illiteracy, modx = Murder, johnson_neyman = TRUE)</code></pre>
<pre><code>Error in sim_slopes(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;sim_slopes&quot;</code></pre>
<pre class="r fold-show"><code>probe_interaction(interactionModel,
                  pred = Illiteracy,
                  modx = Murder,
                  cond.int = TRUE,
                  interval = TRUE,
                  jnplot = TRUE)</code></pre>
<pre><code>Error in probe_interaction(interactionModel, pred = Illiteracy, modx = Murder, : could not find function &quot;probe_interaction&quot;</code></pre>
</div>
</div>
<div id="model-building-steps" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Model Building Steps</h1>
<ol style="list-style-type: decimal">
<li>Examine extent and type of missing data, consider how to handle missing values (multiple imputation, FIML, pairwise deletion, listwise deletion)
<ul>
<li>Little’s MCAR test from <code>mcar_test()</code> function of the <code>njtierney/naniar</code> package</li>
<li>Bayesian handling of missing data: <a href="https://cran.r-project.org/web/packages/brms/vignettes/brms_missings.html" class="uri">https://cran.r-project.org/web/packages/brms/vignettes/brms_missings.html</a></li>
</ul></li>
<li>Examine descriptive statistics, consider variable transformations</li>
<li>Examine scatterplot matrix to examine whether associations between predictor and outcomes are linear or nonlinear</li>
<li>Model building: theory and empiricism (stepwise regression, likelihood ratio tests, k-fold cross validation to check for over-fitting compared to simpler model)</li>
<li>Test assumptions
<ul>
<li>Examine whether predictors have linear association with outcome (Residual Plots, Marginal Model Plots, Added-Variable Plots—check for non-horizontal lines)</li>
<li>Examine whether residuals have constant variance across levels of outcome and predictors Residual Plots, Spread-Level Plots—check for fan-shaped plot or other increasing/decreasing structure)</li>
<li>Examine whether predictors show multicollinearity (VIF)</li>
<li>Examine whether residuals are normally distributed (QQ plot and density plot)</li>
<li>Examine influence of influential observations (high outlyingness and leverage) on parameter stimates by iteratively removing influential observations and refitting (Added-Variable Plots)</li>
</ul></li>
<li>Handle violated assumptions, select final set of predictors/outcomes and transformation of each</li>
<li>Use k-fold cross validation to identify the best estimation procedure (OLS, MM, or LTS) on the final model</li>
<li>Use identified estimation procedure to fit final model and determine the best parameter point estimates</li>
<li>Calculate bootstrapped estimates to determine the confidence intervals around the parameter estimates of the final model</li>
</ol>
</div>
<div id="bootstrapped-estimates" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Bootstrapped Estimates</h1>
<p>To determine the confidence intervals of parameter estimates</p>
<div id="linear-regression-1" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Linear Regression</h2>
<pre class="r fold-show"><code>multipleRegressionModelBootstrapped &lt;- Boot(multipleRegressionModelNoMissing, R = 1000)
summary(multipleRegressionModelBootstrapped)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["R"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["original"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["bootBias"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["bootSE"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["bootMed"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"1000","2":"1.1983004","3":"7.905947e-04","4":"0.06461433","5":"1.1975968","_rn_":"(Intercept)"},{"1":"1000","2":"0.4655286","3":"-7.697538e-04","4":"0.02394096","5":"0.4645738","_rn_":"bpi_antisocialT1Sum"},{"1":"1000","2":"0.1607541","3":"8.904235e-05","4":"0.03293465","5":"0.1593161","_rn_":"bpi_anxiousDepressedSum"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r fold-show"><code>confint(multipleRegressionModelBootstrapped, level = .95, type = &quot;bca&quot;)</code></pre>
<pre><code>Warning in confint.boot(multipleRegressionModelBootstrapped, level = 0.95, : BCa
method fails for this problem. Using &#39;perc&#39; instead</code></pre>
<pre><code>Bootstrap percent confidence intervals

                             2.5 %    97.5 %
(Intercept)             1.08353231 1.3323795
bpi_antisocialT1Sum     0.41676679 0.5112257
bpi_anxiousDepressedSum 0.09642837 0.2258856</code></pre>
<pre class="r fold-show"><code>hist(multipleRegressionModelBootstrapped)</code></pre>
<pre><code>Warning in confint.boot(x, type = ci, level = level): BCa method fails for this
problem. Using &#39;perc&#39; instead</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="generalized-regression" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Generalized Regression</h2>
<pre class="r fold-show"><code>generalizedRegressionModelBootstrapped &lt;- Boot(generalizedRegressionModel, R = 1000)</code></pre>
<pre><code>Error in Boot.glm(generalizedRegressionModel, R = 1000): The Boot function in the &#39;car&#39; package does not allow
  missing values for lm or glm models.  Refit your model with rows 
  with missing values removed.  If you have a data frame called &#39;d&#39;, 
  then the argument data=na.omit(d) is likely to work.</code></pre>
<pre class="r fold-show"><code>summary(generalizedRegressionModelBootstrapped)</code></pre>
<pre><code>Error in summary(generalizedRegressionModelBootstrapped): object &#39;generalizedRegressionModelBootstrapped&#39; not found</code></pre>
<pre class="r fold-show"><code>confint(generalizedRegressionModelBootstrapped, level = .95, type = &quot;bca&quot;)</code></pre>
<pre><code>Error in confint(generalizedRegressionModelBootstrapped, level = 0.95, : object &#39;generalizedRegressionModelBootstrapped&#39; not found</code></pre>
<pre class="r fold-show"><code>hist(generalizedRegressionModelBootstrapped)</code></pre>
<pre><code>Error in hist(generalizedRegressionModelBootstrapped): object &#39;generalizedRegressionModelBootstrapped&#39; not found</code></pre>
</div>
</div>
<div id="cross-validation" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Cross Validation</h1>
<p>To examine degree of prediction error and over-fitting to determine best model <a href="https://stats.stackexchange.com/questions/103459/how-do-i-know-which-method-of-cross-validation-is-best" class="uri">https://stats.stackexchange.com/questions/103459/how-do-i-know-which-method-of-cross-validation-is-best</a></p>
<div id="k-fold-cross-validation" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> K-fold cross validation</h2>
<pre class="r fold-show"><code>kFolds &lt;- 10
replications &lt;- 20

folds &lt;- cvFolds(nrow(mydata), K = kFolds, R = replications)

fitLm &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
            data = mydata,
            na.action = &quot;na.exclude&quot;)

fitLmrob &lt;- lmrob(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                  data = mydata,
                  na.action = &quot;na.exclude&quot;)

fitLts &lt;- ltsReg(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                 data = mydata,
                 na.action = &quot;na.exclude&quot;)

cvFitLm &lt;- cvLm(fitLm, K = kFolds, R = replications)

cvFitLmrob &lt;- cvLmrob(fitLmrob, K = kFolds, R = replications)
cvFitLts &lt;- cvLts(fitLts, K = kFolds, R = replications)

cvFits &lt;- cvSelect(OLS = cvFitLm, MM = cvFitLmrob, LTS = cvFitLts)
cvFits</code></pre>
<pre><code>
10-fold CV results:
  Fit       CV
1 OLS 1.980093
2  MM 1.026407
3 LTS 1.007212

Best model:
   CV 
&quot;LTS&quot; </code></pre>
<pre class="r fold-show"><code>bwplot(cvFits, xlab = &quot;Root Mean Square Error&quot;, xlim= c(0, max(cvFits$cv$CV) + 0.2))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
</div>
<div id="examining-model-fits" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Examining Model Fits</h1>
<div id="effect-plots" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Effect Plots</h2>
<pre class="r fold-show"><code>allEffects(multipleRegressionModel)</code></pre>
<pre><code> model: bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum

 bpi_antisocialT1Sum effect
bpi_antisocialT1Sum
       0      3.2      6.5      9.8       13 
1.394591 2.884283 4.420527 5.956772 7.446463 

 bpi_anxiousDepressedSum effect
bpi_anxiousDepressedSum
       0        2        4        6        8 
2.502636 2.824145 3.145653 3.467161 3.788669 </code></pre>
<pre class="r fold-show"><code>plot(allEffects(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
<div id="confidence-ellipses" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Confidence Ellipses</h2>
<pre class="r fold-show"><code>confidenceEllipse(multipleRegressionModel, levels = c(0.5, .95))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="data-ellipse" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Data Ellipse</h2>
<pre class="r fold-show"><code>mydata_nomissing &lt;- na.omit(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)])
dataEllipse(mydata_nomissing$bpi_antisocialT1Sum, mydata_nomissing$bpi_antisocialT2Sum, levels = c(0.5, .95))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
</div>
</div>
<div id="diagnostics" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Diagnostics</h1>
<div id="assumptions" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Assumptions</h2>
<div id="linearAssociation" class="section level3" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> 1. Linear relation between predictors and outcome</h3>
<div id="ways-to-test" class="section level4" number="12.1.1.1">
<h4><span class="header-section-number">12.1.1.1</span> Ways to Test</h4>
<div id="before-model-fitting" class="section level5" number="12.1.1.1.1">
<h5><span class="header-section-number">12.1.1.1.1</span> Before Model Fitting</h5>
<ul>
<li>scatterplot matrix</li>
<li>distance correlation</li>
</ul>
<div id="scatterplot-matrix" class="section level6" number="12.1.1.1.1.1">
<h6><span class="header-section-number">12.1.1.1.1.1</span> Scatterplot Matrix</h6>
<pre class="r fold-show"><code>scatterplotMatrix(~ bpi_antisocialT2Sum + bpi_antisocialT1Sum + bpi_anxiousDepressedSum, data = mydata)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
</div>
<div id="distance-correlation" class="section level6" number="12.1.1.1.1.2">
<h6><span class="header-section-number">12.1.1.1.1.2</span> Distance correlation</h6>
<p>The distance correlation is an index of the degree of the linear and non-linear association between two variables.</p>
<pre class="r fold-show"><code>correlation(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)], method = &quot;distance&quot;, p_adjust = &quot;none&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Parameter1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Parameter2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["r"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Method"],"name":[10],"type":["chr"],"align":["left"]},{"label":["n_Obs"],"name":[11],"type":["int"],"align":["right"]}],"data":[{"1":"bpi_antisocialT1Sum","2":"bpi_antisocialT2Sum","3":"0.231721","4":"0.95","5":"0.1968321","6":"0.2660239","7":"484.0006","8":"4128499","9":"0","10":"Distance (Bias Corrected) correlation","11":"2875","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="after-model-fitting" class="section level5" number="12.1.1.1.2">
<h5><span class="header-section-number">12.1.1.1.2</span> After Model Fitting</h5>
<p>Check for nonlinearities (non-horizontal line) in plots of:</p>
<ul>
<li>Residuals versus fitted values (<a href="#residualPlots">Residual Plots</a>)—best</li>
<li>Residuals versus predictors (<a href="#residualPlots">Residual Plots</a>)</li>
<li>Outcome versus fitted values (<a href="#marginalModelPlots">Marginal Model Plots</a>)</li>
<li>Outcome versus predictors, ignoring other predictors (<a href="#marginalModelPlots">Marginal Model Plots</a>)</li>
<li>Outcome versus predictors, controlling for other predictors (<a href="#addedVariablePlots">Added-Variable Plots</a>)</li>
</ul>
</div>
</div>
<div id="ways-to-handle" class="section level4" number="12.1.1.2">
<h4><span class="header-section-number">12.1.1.2</span> Ways to Handle</h4>
<ul>
<li>Transform outcome/predictor variables (Box-Cox transformations)</li>
<li>Semi-parametric regression models: Generalized additive models (GAM)</li>
<li>Non-parametric regression models: Nearest-Neighbor Kernel Regression</li>
</ul>
<div id="semi-parametric-or-non-parametric-regression-models" class="section level5" number="12.1.1.2.1">
<h5><span class="header-section-number">12.1.1.2.1</span> Semi-parametric or non-parametric regression models</h5>
<p><a href="http://www.lisa.stat.vt.edu/?q=node/7517" class="uri">http://www.lisa.stat.vt.edu/?q=node/7517</a></p>
<p>Note: using semi-parametric or non-parametric models increases fit in context of nonlinearity at the expense of added complexity. Make sure to avoid fitting an overly complex model (e.g., use k-fold cross validation). Often, the simpler (generalized) linear model is preferable to semi-paremetric or non-parametric approaches</p>
<div id="semi-parametric-generalized-additive-models" class="section level6" number="12.1.1.2.1.1">
<h6><span class="header-section-number">12.1.1.2.1.1</span> Semi-parametric: Generalized Additive Models</h6>
<p><a href="http://documents.software.dell.com/Statistics/Textbook/Generalized-Additive-Models" class="uri">http://documents.software.dell.com/Statistics/Textbook/Generalized-Additive-Models</a></p>
<pre class="r fold-show"><code>generalizedAdditiveModel &lt;- gam(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                family = gaussian(),
                                data = mydata, na.action = na.exclude)

summary(generalizedAdditiveModel)</code></pre>
<pre><code>
Family: gaussian 
Link function: identity 

Formula:
bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum

Parametric coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              1.19830    0.05983  20.029  &lt; 2e-16 ***
bpi_antisocialT1Sum      0.46553    0.01858  25.049  &lt; 2e-16 ***
bpi_anxiousDepressedSum  0.16075    0.02916   5.513 3.83e-08 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1


R-sq.(adj) =  0.261   Deviance explained = 26.2%
GCV = 3.9191  Scale est. = 3.915     n = 2874</code></pre>
<pre class="r fold-show"><code>confint(generalizedAdditiveModel)</code></pre>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>Warning in X[, nonA, drop = FALSE] %*% B0[nonA] + O: longer object length is not
a multiple of shorter object length</code></pre>
<pre><code>Error in glm.control(nthreads = 1, irls.reg = 0, epsilon = 1e-07, maxit = 200, : unused arguments (nthreads = 1, irls.reg = 0, mgcv.tol = 1e-07, mgcv.half = 15, rank.tol = 1.49011611938477e-08, nlm = list(7, 1e-06, 2, 1e-04, 200, FALSE), optim = list(1e+07), newton = list(1e-06, 5, 2, 30, FALSE), outerPIsteps = 0, idLinksBases = TRUE, scalePenalty = TRUE, efs.lspmax = 15, efs.tol = 0.1, keepData = FALSE, scale.est = &quot;fletcher&quot;, edge.correct = FALSE)</code></pre>
</div>
<div id="non-parametric-nearest-neighbor-kernel-regression" class="section level6" number="12.1.1.2.1.2">
<h6><span class="header-section-number">12.1.1.2.1.2</span> Non-parametric: Nearest-Neighbor Kernel Regression</h6>
</div>
</div>
</div>
</div>
<div id="exogeneity" class="section level3" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> 2. Exogeneity</h3>
<p>Exogeneity means that the association between predictors and outcome is fully causal and unrelated to other variables.</p>
<div id="ways-to-test-1" class="section level4" number="12.1.2.1">
<h4><span class="header-section-number">12.1.2.1</span> Ways to Test</h4>
<ul>
<li>Durbin-Wu-Hausman test of endogeneity</li>
</ul>
<div id="durbin-wu-hausman-test-of-endogeneity" class="section level5" number="12.1.2.1.1">
<h5><span class="header-section-number">12.1.2.1.1</span> Durbin-Wu-Hausman test of endogeneity</h5>
<p>The instrumental variables (2SLS) estimator is implemented in the <code>R</code> package <code>AER</code> as command:</p>
<pre class="r fold-show"><code>ivreg(y ~ x1 + x2 + w1 + w2 | z1 + z2 + z3 + w1 + w2)</code></pre>
<p>where <code>x1</code> and <code>x2</code> are endogenous regressors, <code>w1</code> and <code>w2</code> exogeneous regressors, and <code>z1</code> to <code>z3</code> are excluded instruments.</p>
<p>Durbin-Wu-Hausman test:</p>
<pre class="r fold-show"><code>hsng2 &lt;- read.dta(&quot;http://www.stata-press.com/data/r11/hsng2.dta&quot;)

fiv &lt;- ivreg(rent ~ hsngval + pcturban | pcturban + faminc + reg2 + reg3 + reg4, data = hsng2) #Housing values are likely endogeneous and therefore instrumented by median family income (faminc) and 3 regional dummies (reg2, reg4, reg4)

summary(fiv, diagnostics = TRUE)</code></pre>
<pre><code>
Call:
ivreg(formula = rent ~ hsngval + pcturban | pcturban + faminc + 
    reg2 + reg3 + reg4, data = hsng2)

Residuals:
     Min       1Q   Median       3Q      Max 
-84.1948 -11.6023  -0.5239   8.6583  73.6130 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 1.207e+02  1.571e+01   7.685 7.55e-10 ***
hsngval     2.240e-03  3.388e-04   6.612 3.17e-08 ***
pcturban    8.152e-02  3.082e-01   0.265    0.793    

Diagnostic tests:
                 df1 df2 statistic  p-value    
Weak instruments   4  44     13.30  3.5e-07 ***
Wu-Hausman         1  46     15.91 0.000236 ***
Sargan             3  NA     11.29 0.010268 *  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 22.86 on 47 degrees of freedom
Multiple R-Squared: 0.5989, Adjusted R-squared: 0.5818 
Wald test: 42.66 on 2 and 47 DF,  p-value: 2.731e-11 </code></pre>
<p>The Eicker-Huber-White covariance estimator which is robust to heteroscedastic error terms is reported after estimation with <code>vcov = sandwich</code> in <code>coeftest()</code></p>
<p>First stage results are reported by explicitly estimating them. For example:</p>
<pre class="r fold-show"><code>first &lt;- lm(hsngval ~ pcturban + faminc + reg2 + reg3 + reg4, data = hsng2)

summary(first)</code></pre>
<pre><code>
Call:
lm(formula = hsngval ~ pcturban + faminc + reg2 + reg3 + reg4, 
    data = hsng2)

Residuals:
   Min     1Q Median     3Q    Max 
-10504  -5223  -1162   2939  46756 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -1.867e+04  1.200e+04  -1.557 0.126736    
pcturban     1.822e+02  1.150e+02   1.584 0.120289    
faminc       2.731e+00  6.819e-01   4.006 0.000235 ***
reg2        -5.095e+03  4.122e+03  -1.236 0.223007    
reg3        -1.778e+03  4.073e+03  -0.437 0.664552    
reg4         1.341e+04  4.048e+03   3.314 0.001849 ** 
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 9253 on 44 degrees of freedom
Multiple R-squared:  0.6908,    Adjusted R-squared:  0.6557 
F-statistic: 19.66 on 5 and 44 DF,  p-value: 3.032e-10</code></pre>
<p>In case of a single endogenous variable (K = 1), the F-statistic to assess weak instruments is reported after estimating the first stage with, for example:</p>
<pre class="r fold-show"><code>waldtest(first, . ~ . - faminc - reg2 - reg3 - reg4)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Res.Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Df"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"44","2":"NA","3":"NA","4":"NA","_rn_":"1"},{"1":"48","2":"-4","3":"13.29778","4":"3.495112e-07","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>or in case of heteroscedatistic errors:</p>
<pre class="r fold-show"><code>waldtest(first, . ~ . - faminc - reg2 - reg3- reg4, vcov = sandwich)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Res.Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Df"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"44","2":"NA","3":"NA","4":"NA","_rn_":"1"},{"1":"48","2":"-4","3":"12.97475","4":"4.643466e-07","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="ways-to-handle-1" class="section level4" number="12.1.2.2">
<h4><span class="header-section-number">12.1.2.2</span> Ways to Handle</h4>
<ul>
<li>Conduct an experiment/RCT with random assignment</li>
<li>Instrumental variables</li>
</ul>
</div>
</div>
<div id="homoscedasticity-of-residuals" class="section level3" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> 3. Homoscedasticity of residuals</h3>
<p>Homoscedasticity of the residuals means that the variance of the residuals does not differ as a function of the outcome/predictors (i.e., the residuals show constant variance as a function of outcome/predictors).</p>
<div id="ways-to-test-2" class="section level4" number="12.1.3.1">
<h4><span class="header-section-number">12.1.3.1</span> Ways to Test</h4>
<ul>
<li>Plot residuals vs. outcome and predictor variables (<a href="#residualPlots">Residual Plots</a>)</li>
<li>Plot residuals vs. fitted values (<a href="#residualPlots">Residual Plots</a>)</li>
<li>Time Series data: Plot residuals vs. time</li>
<li>Spread-level plot</li>
<li>Breusch-Pagan test: <code>bptest()</code> function from <code>lmtest</code> package</li>
<li>Goldfeld-Quandt Test</li>
</ul>
<div id="residuals-vs.-outcome-and-predictor-variables" class="section level5" number="12.1.3.1.1">
<h5><span class="header-section-number">12.1.3.1.1</span> Residuals vs. outcome and predictor variables</h5>
<p>Plot residuals, or perhaps their absolute values, versus the outcome and predictor variables (<a href="#residualPlots">Residual Plots</a>). Examine whether residual variance is constant at all levels of other variables or whether it increases/decreases as a function of another variable (or shows some others structure, e.g., small variance at low and high levels of a predictor and high variance in the middle). Note that this is <em>different than whether the residuals show non-linearities</em>—i.e., a non-horizontal line, which would indicate a <a href="#linearAssociation">nonlinear association between variables</a> (see Assumption #1, above). Rather, here we are examining whether there is change in the variance as a function of another variable (e.g., a fan-shaped <a href="#residualPlots">Residual Plot</a>)</p>
</div>
<div id="spread-level-plot" class="section level5" number="12.1.3.1.2">
<h5><span class="header-section-number">12.1.3.1.2</span> Spread-level plot</h5>
<p>Examining whether level (e.g., mean) depends on spread (e.g., variance)—plot of log of the absolute Studentized residuals against the log of the fitted values</p>
<pre class="r fold-show"><code>spreadLevelPlot(multipleRegressionModel)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<pre><code>
Suggested power transformation:  0.5304728 </code></pre>
</div>
<div id="breusch-pagan-test" class="section level5" number="12.1.3.1.3">
<h5><span class="header-section-number">12.1.3.1.3</span> Breusch-Pagan test</h5>
<p><a href="http://www.inside-r.org/packages/cran/lmtest/docs/bptest" class="uri">http://www.inside-r.org/packages/cran/lmtest/docs/bptest</a></p>
<pre class="r fold-show"><code>bptest(multipleRegressionModel)</code></pre>
<pre><code>
    studentized Breusch-Pagan test

data:  multipleRegressionModel
BP = 94.638, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
<div id="goldfeld-quandt-test" class="section level5" number="12.1.3.1.4">
<h5><span class="header-section-number">12.1.3.1.4</span> Goldfeld-Quandt Test</h5>
<pre class="r fold-show"><code>gqtest(multipleRegressionModel)</code></pre>
<pre><code>
    Goldfeld-Quandt test

data:  multipleRegressionModel
GQ = 1.0755, df1 = 1434, df2 = 1434, p-value = 0.08417
alternative hypothesis: variance increases from segment 1 to 2</code></pre>
</div>
<div id="test-of-dependence-of-spread-on-level" class="section level5" number="12.1.3.1.5">
<h5><span class="header-section-number">12.1.3.1.5</span> Test of dependence of spread on level</h5>
<pre class="r fold-show"><code>ncvTest(multipleRegressionModel)</code></pre>
<pre><code>Non-constant Variance Score Test 
Variance formula: ~ fitted.values 
Chisquare = 232.1196, Df = 1, p = &lt; 2.22e-16</code></pre>
</div>
<div id="test-of-dependence-of-spread-on-predictors" class="section level5" number="12.1.3.1.6">
<h5><span class="header-section-number">12.1.3.1.6</span> Test of dependence of spread on predictors</h5>
<pre class="r fold-show"><code>ncvTest(multipleRegressionModel, ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum)</code></pre>
<pre><code>Non-constant Variance Score Test 
Variance formula: ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum 
Chisquare = 233.2878, Df = 2, p = &lt; 2.22e-16</code></pre>
</div>
</div>
<div id="ways-to-handle-2" class="section level4" number="12.1.3.2">
<h4><span class="header-section-number">12.1.3.2</span> Ways to Handle</h4>
<ul>
<li>If residual variance increases as a function of the fitted values, consider a poisson regression model (especially for count data), for which the variance does increase with the mean</li>
<li>If residual variance differs as a function of model predictors, consider adding interactions/product terms (the effect of one variable depends on the level of another variable)</li>
<li>Try transforming the outcome variable to be normally distributed (log-transform if the errors seem consistent in percentage rather than absolute terms)</li>
<li>If the error variance is proportional to a variable <span class="math inline">\(z\)</span>, then fit the model using Weighted Least Squares (WLS), with the weights given be <span class="math inline">\(1/z\)</span></li>
<li>Weighted least squares (WLS) using the “weights” argument of the <code>lm()</code> function; to get weights, see: <a href="https://stats.stackexchange.com/a/100410/20338" class="uri">https://stats.stackexchange.com/a/100410/20338</a></li>
<li>Huber-White standard errors (a.k.a. “Sandwich” estimates) from a heteroscedasticity-corrected covariance matrix
<ul>
<li><code>coeftest()</code> function from the <code>sandwich</code> package along with hccm sandwich estimates from the <code>car</code> package</li>
<li><code>robcov()</code> function from the <code>rms</code> package</li>
</ul></li>
<li>Time series data: ARCH (auto-regressive conditional heteroscedasticity) models</li>
<li>Time series data: seasonal patterns can be addressed by applying log transformation to outcome variable</li>
</ul>
<div id="huber-white-standard-errors" class="section level5" number="12.1.3.2.1">
<h5><span class="header-section-number">12.1.3.2.1</span> Huber-White standard errors</h5>
<p>Standard errors (SEs) on the diagonal increase</p>
<pre class="r fold-show"><code>vcov(multipleRegressionModel)</code></pre>
<pre><code>                          (Intercept) bpi_antisocialT1Sum
(Intercept)              0.0035795220       -0.0006533375
bpi_antisocialT1Sum     -0.0006533375        0.0003453814
bpi_anxiousDepressedSum -0.0003167540       -0.0002574524
                        bpi_anxiousDepressedSum
(Intercept)                       -0.0003167540
bpi_antisocialT1Sum               -0.0002574524
bpi_anxiousDepressedSum            0.0008501565</code></pre>
<pre class="r fold-show"><code>hccm(multipleRegressionModel)</code></pre>
<pre><code>Error in V %*% t(X) %*% apply(X, 2, &quot;*&quot;, (e^2)/factor): non-conformable arguments</code></pre>
<pre class="r fold-show"><code>summary(multipleRegressionModel)</code></pre>
<pre><code>
Call:
lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
    data = mydata, na.action = na.exclude)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.3755 -1.2337 -0.2212  0.9911 12.8017 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              1.19830    0.05983  20.029  &lt; 2e-16 ***
bpi_antisocialT1Sum      0.46553    0.01858  25.049  &lt; 2e-16 ***
bpi_anxiousDepressedSum  0.16075    0.02916   5.513 3.83e-08 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.979 on 2871 degrees of freedom
  (8656 observations deleted due to missingness)
Multiple R-squared:  0.262, Adjusted R-squared:  0.2615 
F-statistic: 509.6 on 2 and 2871 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r fold-show"><code>coeftest(multipleRegressionModel, vcov = sandwich)</code></pre>
<pre><code>
t test of coefficients:

                        Estimate Std. Error t value  Pr(&gt;|t|)    
(Intercept)             1.198300   0.062211 19.2618 &lt; 2.2e-16 ***
bpi_antisocialT1Sum     0.465529   0.022929 20.3030 &lt; 2.2e-16 ***
bpi_anxiousDepressedSum 0.160754   0.032991  4.8727  1.16e-06 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r fold-show"><code>coeftest(multipleRegressionModel, vcov = hccm)</code></pre>
<pre><code>Error in V %*% t(X) %*% apply(X, 2, &quot;*&quot;, (e^2)/factor): non-conformable arguments</code></pre>
<pre class="r fold-show"><code>robcov(ols(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
           data = mydata,
           x = TRUE,
           y = TRUE))</code></pre>
<pre><code>Frequencies of Missing Values Due to Each Variable
    bpi_antisocialT2Sum     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
                   7501                    7613                    7616 

Linear Regression Model
 
 ols(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
     data = mydata, x = TRUE, y = TRUE)
 
 
                 Model Likelihood    Discrimination    
                       Ratio Test           Indexes    
 Obs    2874    LR chi2    873.09    R2       0.262    
 sigma1.9786    d.f.            2    R2 adj   0.261    
 d.f.   2871    Pr(&gt; chi2) 0.0000    g        1.278    
 
 Residuals
 
     Min      1Q  Median      3Q     Max 
 -8.3755 -1.2337 -0.2212  0.9911 12.8017 
 
 
                         Coef   S.E.   t     Pr(&gt;|t|)
 Intercept               1.1983 0.0622 19.26 &lt;0.0001 
 bpi_antisocialT1Sum     0.4655 0.0229 20.30 &lt;0.0001 
 bpi_anxiousDepressedSum 0.1608 0.0330  4.87 &lt;0.0001 
 </code></pre>
<pre class="r fold-show"><code>robcov(ols(t_ext ~ m_ext + age,
           data = mydata,
           x = TRUE,
           y = TRUE),
       cluster = mydata$tcid) #account for nested data within subject</code></pre>
<pre><code>Error in eval(predvars, data, callenv): object &#39;t_ext&#39; not found</code></pre>
</div>
</div>
</div>
<div id="errors-are-independent" class="section level3" number="12.1.4">
<h3><span class="header-section-number">12.1.4</span> 4. Errors are independent</h3>
<p>Independent errors means that the errors are uncorrelated with each other.</p>
<div id="ways-to-test-3" class="section level4" number="12.1.4.1">
<h4><span class="header-section-number">12.1.4.1</span> Ways to Test</h4>
<ul>
<li>Plot residuals vs. predictors (<a href="#residualPlots">Residual Plots</a>)</li>
<li>Time Series data: Residual time series plot (residuals vs. row number)</li>
<li>Time Series data: Table or plot of residual autocorrelations</li>
<li>Time Series data: Durbin-Watson statistic for test of significant residual autocorrelation at lag 1</li>
</ul>
</div>
<div id="ways-to-handle-3" class="section level4" number="12.1.4.2">
<h4><span class="header-section-number">12.1.4.2</span> Ways to Handle</h4>
<ul>
<li>Generalized least squares (GLS) models are capable of handling correlated errors: <a href="https://stat.ethz.ch/R-manual/R-devel/library/nlme/html/gls.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/nlme/html/gls.html</a></li>
<li>Regression with cluster variable
<ul>
<li><code>robcov()</code> from <code>rms</code> package</li>
</ul></li>
<li><a href="hlm.html">Hierarchical linear modeling</a>
<ul>
<li><a href="hlm.html#linear">Linear mixed effects models</a></li>
<li><a href="hlm.html#generalized">Generalized linear mixed effects models</a></li>
<li><a href="hlm.html#nonlinear">Nonlinear mixed effects models</a></li>
</ul></li>
</ul>
</div>
</div>
<div id="no-multicollinearity" class="section level3" number="12.1.5">
<h3><span class="header-section-number">12.1.5</span> 5. No multicollinearity</h3>
<p>Multicollinearity occurs when the predictors are correlated with each other.</p>
<div id="ways-to-test-4" class="section level4" number="12.1.5.1">
<h4><span class="header-section-number">12.1.5.1</span> Ways to Test</h4>
<ul>
<li>Variance Inflation Factor (VIF)</li>
<li>Generalized Variance Inflation Factor (GVIF)—when models have related regressors (multiple polynomial terms or contrasts from same predictor)</li>
<li>Correlation</li>
<li>Tolerance</li>
<li>Condition Index</li>
</ul>
<div id="variance-inflation-factor-vif" class="section level5" number="12.1.5.1.1">
<h5><span class="header-section-number">12.1.5.1.1</span> Variance Inflation Factor (VIF)</h5>
<p><span class="math display">\[
\text{VIF} = 1/\text{Tolerance}
\]</span></p>
<p>If the variance inflation factor of a predictor variable were 5.27 (<span class="math inline">\(\sqrt{5.27} = 2.3\)</span>), this means that the standard error for the coefficient of that predictor variable is 2.3 times as large (i.e., confidence interval is 2.3 times wider) as it would be if that predictor variable were uncorrelated with the other predictor variables.</p>
<p>VIF = 1: Not correlated<br />
1 &lt; VIF &lt; 5: Moderately correlated<br />
VIF &gt; 5 to 10: Highly correlated (multicollinearity present)</p>
<pre class="r fold-show"><code>vif(multipleRegressionModel)</code></pre>
<pre><code>    bpi_antisocialT1Sum bpi_anxiousDepressedSum 
               1.291545                1.291545 </code></pre>
</div>
<div id="generalized-variance-inflation-factor-gvif" class="section level5" number="12.1.5.1.2">
<h5><span class="header-section-number">12.1.5.1.2</span> Generalized Variance Inflation Factor (GVIF)</h5>
<p>Useful when models have related regressors (multiple polynomial terms or contrasts from same predictor)</p>
</div>
<div id="correlation" class="section level5" number="12.1.5.1.3">
<h5><span class="header-section-number">12.1.5.1.3</span> Correlation</h5>
<p>correlation among all independent variables the correlation coefficients should be smaller than .08</p>
<pre class="r fold-show"><code>cor(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_anxiousDepressedSum&quot;)], use = &quot;pairwise.complete.obs&quot;)</code></pre>
<pre><code>                        bpi_antisocialT1Sum bpi_anxiousDepressedSum
bpi_antisocialT1Sum                1.000000                0.497279
bpi_anxiousDepressedSum            0.497279                1.000000</code></pre>
</div>
<div id="tolerance" class="section level5" number="12.1.5.1.4">
<h5><span class="header-section-number">12.1.5.1.4</span> Tolerance</h5>
<p>The tolerance is an index of the influence of one independent variable on all other independent variables. With T &lt; 0.2, there might be multicollinearity in the data and with T &lt; 0.01, there certainly is multicollinearity.</p>
<p><span class="math display">\[
\text{tolerance} = 1/\text{VIF}
\]</span></p>
<p>T &lt; 0.2: there might be multicollinearity in the data<br />
T &lt; 0.01: there certainly is multicollinarity in the data</p>
</div>
<div id="condition-index" class="section level5" number="12.1.5.1.5">
<h5><span class="header-section-number">12.1.5.1.5</span> Condition Index</h5>
<p>The condition index is calculated using a factor analysis on the independent variables. Values of 10-30 indicate a mediocre multicollinearity in the regression variables. Values &gt; 30 indicate strong multicollinearity.</p>
<p>For how to interpret, see here: <a href="https://stats.stackexchange.com/a/87610/20338" class="uri">https://stats.stackexchange.com/a/87610/20338</a></p>
<pre class="r fold-show"><code>ols_eigen_cindex(multipleRegressionModel)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Eigenvalue"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Condition Index"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["intercept"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["bpi_antisocialT1Sum"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["bpi_anxiousDepressedSum"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"2.4393975","2":"1.000000","3":"0.05150939","4":"0.04435009","5":"0.05806627"},{"1":"0.3575629","2":"2.611951","3":"0.40330814","4":"0.01600701","5":"0.75801976"},{"1":"0.2030395","2":"3.466179","3":"0.54518247","4":"0.93964290","5":"0.18391397"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="ways-to-handle-4" class="section level4" number="12.1.5.2">
<h4><span class="header-section-number">12.1.5.2</span> Ways to Handle</h4>
<ul>
<li>Remove highly correlated (i.e., redundant) predictors</li>
<li>Average the correlated predictors</li>
<li><a href="pca.html">Principal Component Analysis</a> for data reduction</li>
<li>Standardize predictors</li>
<li>Center the data (deduct the mean)</li>
<li>Singular-value decomposition of the model matrix or the mean-centered model matrix</li>
<li>Conduct a <a href="#factorAnalysis.html">factor analysis</a> and rotate the factors to ensure independence of the factors</li>
</ul>
</div>
</div>
<div id="errors-are-normally-distributed" class="section level3" number="12.1.6">
<h3><span class="header-section-number">12.1.6</span> 6. Errors are normally distributed</h3>
<div id="ways-to-test-5" class="section level4" number="12.1.6.1">
<h4><span class="header-section-number">12.1.6.1</span> Ways to Test</h4>
<ul>
<li>Probability Plots
<ul>
<li><a href="#qqPlot">Normal Quantile (QQ) Plots</a> (based on non-cumulative distribution of residuals)</li>
<li><a href="#ppPlot">Normal Probability (PP) Plots</a> (based on cumulative distribution of residuals)</li>
</ul></li>
<li><a href="#densityPlotResiduals">Density Plot of Residuals</a></li>
<li>Statistical Tests
<ul>
<li>Kolmogorov-Smirnov test</li>
<li>Shapiro-Wilk test</li>
<li>Jarque-Bera test</li>
<li>Anderson-Darling test (best test)</li>
</ul></li>
<li>Examine influence of outliers</li>
</ul>
</div>
<div id="ways-to-handle-5" class="section level4" number="12.1.6.2">
<h4><span class="header-section-number">12.1.6.2</span> Ways to Handle</h4>
<ul>
<li>Apply a transformation to the predictor or outcome variable</li>
<li>Exclude outliers</li>
<li>Robust regression
<ul>
<li>Best when no outliers: MM-type regression estimator
<ul>
<li><code>lmrob()</code>/<code>glmrob()</code> function of <code>robustbase</code> package</li>
<li>Iteratively reweighted least squares (IRLS): <code>rlm(, method = "MM")</code> function of <code>MASS</code> package: <a href="http://www.ats.ucla.edu/stat/r/dae/rreg.htm" class="uri">http://www.ats.ucla.edu/stat/r/dae/rreg.htm</a></li>
</ul></li>
<li>Most resistant to outliers: Least trimmed squares (LTS)—but not good as a standalone estimator, better for identifying outliers
<ul>
<li><code>ltsReg()</code> function of <code>robustbase</code> package (best)</li>
</ul></li>
<li>Best when single predictor: Theil-Sen estimator
<ul>
<li><code>mblm(, repeated = FALSE)</code> function of <code>mblm</code> package</li>
</ul></li>
<li>Robust correlation
<ul>
<li>Spearman’s rho: <code>cor(, method = "spearman")</code></li>
<li>Percentage bend correlation</li>
<li>Minimum vollume ellipsoid</li>
<li>Minimum covariance determinant:</li>
<li>Winsorized correlation</li>
<li>Biweight midcorrelation</li>
</ul></li>
<li>Not great options:
<ul>
<li>Quantile (L1) regression: <code>rq()</code> function of <code>quantreg</code> package</li>
</ul></li>
</ul></li>
</ul>
<div id="transformations-of-outcome-variable" class="section level5" number="12.1.6.2.1">
<h5><span class="header-section-number">12.1.6.2.1</span> Transformations of Outcome Variable</h5>
<div id="box-cox-transformation" class="section level6" number="12.1.6.2.1.1">
<h6><span class="header-section-number">12.1.6.2.1.1</span> Box-Cox Transformation</h6>
<p>Useful if the outcome is strictly positive (or add a constant to outcome to make it strictly positive)</p>
<p>lambda = -1: inverse transformation lambda = -0.5: 1/sqrt(Y) lambda = 0: log transformation lambda = 0.5: square root lambda = 0.333: cube root lambda = 1: no transformation lambda = 2: squared</p>
<div id="add-constant-to-outcome-to-make-it-strictly-positive" class="section level7" number="12.1.6.2.1.1.1">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.1</span> Add constant to outcome to make it strictly positive</p>
<pre class="r fold-show"><code>strictlyPositiveDV &lt;- lm(bpi_antisocialT2Sum + 1 ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                         data = mydata,
                         na.action = na.exclude)</code></pre>
</div>
<div id="identify-best-power-transformation-lambda" class="section level7" number="12.1.6.2.1.1.2">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.2</span> Identify best power transformation (lambda)</p>
<p>Consider rounding the power to a common value (square root = .5; cube root = .333; squared = 2)</p>
<pre class="r fold-show"><code>boxCox(strictlyPositiveDV)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<pre class="r fold-show"><code>powerTransform(strictlyPositiveDV) </code></pre>
<pre><code>Estimated transformation parameter 
      Y1 
0.234032 </code></pre>
<pre class="r fold-show"><code>summary(transformedDV &lt;- powerTransform(strictlyPositiveDV))</code></pre>
<pre><code>bcPower Transformation to Normality 
   Est Power Rounded Pwr Wald Lwr Bnd Wald Upr Bnd
Y1     0.234        0.23       0.1825       0.2856

Likelihood ratio test that transformation parameter is equal to 0
 (log transformation)
                           LRT df       pval
LR test, lambda = (0) 78.04052  1 &lt; 2.22e-16

Likelihood ratio test that no transformation is needed
                           LRT df       pval
LR test, lambda = (1) 853.8675  1 &lt; 2.22e-16</code></pre>
<pre class="r fold-show"><code>mydata$bpi_antisocialT2SumTransformed &lt;- bcPower(mydata$bpi_antisocialT2Sum + 1, coef(transformedDV))</code></pre>
</div>
<div id="compare-residuals-from-model-with-and-without-transformation" class="section level7" number="12.1.6.2.1.1.3">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.3</span> Compare residuals from model with and without transformation</p>
<div id="model-without-transformation" class="section level8" number="12.1.6.2.1.1.3.1">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.3.1</span> Model without transformation</p>
<pre class="r fold-show"><code>summary(modelWithoutTransformation &lt;- lm(bpi_antisocialT2Sum + 1 ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                         data = mydata,
                         na.action = na.exclude))</code></pre>
<pre><code>
Call:
lm(formula = bpi_antisocialT2Sum + 1 ~ bpi_antisocialT1Sum + 
    bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.3755 -1.2337 -0.2212  0.9911 12.8017 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              2.19830    0.05983  36.743  &lt; 2e-16 ***
bpi_antisocialT1Sum      0.46553    0.01858  25.049  &lt; 2e-16 ***
bpi_anxiousDepressedSum  0.16075    0.02916   5.513 3.83e-08 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.979 on 2871 degrees of freedom
  (8656 observations deleted due to missingness)
Multiple R-squared:  0.262, Adjusted R-squared:  0.2615 
F-statistic: 509.6 on 2 and 2871 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r fold-show"><code>plot(density(na.omit(studres(modelWithoutTransformation))))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
</div>
<div id="model-with-transformation" class="section level8" number="12.1.6.2.1.1.3.2">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.3.2</span> Model with transformation</p>
<pre class="r fold-show"><code>summary(modelWithTransformation &lt;- lm(bpi_antisocialT2SumTransformed ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                      data = mydata,
                                      na.action = na.exclude))</code></pre>
<pre><code>
Call:
lm(formula = bpi_antisocialT2SumTransformed ~ bpi_antisocialT1Sum + 
    bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.3429 -0.4868  0.0096  0.4922  2.9799 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)             0.800373   0.022024  36.342  &lt; 2e-16 ***
bpi_antisocialT1Sum     0.165476   0.006841  24.189  &lt; 2e-16 ***
bpi_anxiousDepressedSum 0.055910   0.010733   5.209 2.03e-07 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.7283 on 2871 degrees of freedom
  (8656 observations deleted due to missingness)
Multiple R-squared:  0.2477,    Adjusted R-squared:  0.2472 
F-statistic: 472.7 on 2 and 2871 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r fold-show"><code>plot(density(na.omit(studres(modelWithTransformation))))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
</div>
</div>
<div id="constructed-variable-test-plot" class="section level7" number="12.1.6.2.1.1.4">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.4</span> Constructed Variable Test &amp; Plot</p>
<pre class="r fold-show"><code>multipleRegressionModel_constructedVariable &lt;- update(multipleRegressionModel, . ~ . + boxCoxVariable(bpi_antisocialT1Sum + 1))
summary(multipleRegressionModel_constructedVariable)$coef[&quot;boxCoxVariable(bpi_antisocialT1Sum + 1)&quot;, , drop = FALSE] #significant p-value indicates strong need to transform variable</code></pre>
<pre><code>                                           Estimate Std. Error   t value
boxCoxVariable(bpi_antisocialT1Sum + 1) -0.06064732 0.04683415 -1.294938
                                         Pr(&gt;|t|)
boxCoxVariable(bpi_antisocialT1Sum + 1) 0.1954457</code></pre>
<pre class="r fold-show"><code>avPlots(multipleRegressionModel_constructedVariable, &quot;boxCoxVariable(bpi_antisocialT1Sum + 1)&quot;) #suggests need for transformation is spread through data, and not just dependent on a small fraction of observations</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
</div>
<div id="inverse-response-plot" class="section level7" number="12.1.6.2.1.1.5">
<p class="heading"><span class="header-section-number">12.1.6.2.1.1.5</span> Inverse Response Plot</p>
<pre class="r fold-show"><code>inverseResponsePlot(strictlyPositiveDV, lambda = c(-1,-0.5,0,1/3,.5,1,2)) #black line is best fitting power transformation</code></pre>
<img src="regression_files/figure-html/unnamed-chunk-54-1.png" width="672" />
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["lambda"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RSS"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.8481126","2":"2940.938"},{"1":"-1.0000000","2":"3329.131"},{"1":"-0.5000000","2":"3189.376"},{"1":"0.0000000","2":"3052.679"},{"1":"0.3333333","2":"2984.003"},{"1":"0.5000000","2":"2960.827"},{"1":"1.0000000","2":"2944.657"},{"1":"2.0000000","2":"3116.590"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="yeo-johnson-transformations" class="section level6" number="12.1.6.2.1.2">
<h6><span class="header-section-number">12.1.6.2.1.2</span> Yeo-Johnson Transformations</h6>
<p>Useful if the outcome is not strictly positive.</p>
<pre class="r fold-show"><code>yjPower(DV, lambda)</code></pre>
</div>
</div>
<div id="transformations-of-predictor-variable" class="section level5" number="12.1.6.2.2">
<h5><span class="header-section-number">12.1.6.2.2</span> Transformations of Predictor Variable</h5>
<div id="component-plus-residual-plots-partial-residual-plots" class="section level6" number="12.1.6.2.2.1">
<h6><span class="header-section-number">12.1.6.2.2.1</span> Component-Plus-Residual Plots (Partial Residual Plots)</h6>
<pre class="r fold-show"><code>crPlots(multipleRegressionModelNoMissing, order = 1) #linear</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<pre class="r fold-show"><code>crPlots(multipleRegressionModelNoMissing, order = 2) #quadratic</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-56-2.png" width="672" /></p>
<pre class="r fold-show"><code>multipleRegressionModel_quadratic &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + I(bpi_antisocialT1Sum^2) + bpi_anxiousDepressedSum,
                                        data = mydata,
                                        na.action = na.exclude)

summary(multipleRegressionModel_quadratic)</code></pre>
<pre><code>
Call:
lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + I(bpi_antisocialT1Sum^2) + 
    bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)

Residuals:
    Min      1Q  Median      3Q     Max 
-7.6238 -1.2610 -0.2484  0.9923 12.9008 

Coefficients:
                          Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)               1.099237   0.076509  14.367  &lt; 2e-16 ***
bpi_antisocialT1Sum       0.547680   0.043723  12.526  &lt; 2e-16 ***
I(bpi_antisocialT1Sum^2) -0.010221   0.004925  -2.075    0.038 *  
bpi_anxiousDepressedSum   0.161734   0.029144   5.549 3.13e-08 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.977 on 2870 degrees of freedom
  (8656 observations deleted due to missingness)
Multiple R-squared:  0.2631,    Adjusted R-squared:  0.2623 
F-statistic: 341.5 on 3 and 2870 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r fold-show"><code>anova(multipleRegressionModel_quadratic, multipleRegressionModel)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Res.Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RSS"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Df"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Sum of Sq"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"2870","2":"11223.01","3":"NA","4":"NA","5":"NA","6":"NA","_rn_":"1"},{"1":"2871","2":"11239.86","3":"-1","4":"-16.84449","5":"4.307551","6":"0.03803241","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r fold-show"><code>crPlots(multipleRegressionModel_quadratic, order = 1)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-56-3.png" width="672" /></p>
</div>
<div id="ceres-plot-combining-conditional-expectations-and-residuals" class="section level6" number="12.1.6.2.2.2">
<h6><span class="header-section-number">12.1.6.2.2.2</span> CERES Plot (Combining conditional Expectations and RESiduals)</h6>
<p>Useful when nonlinear associations among the predictors are very strong (component-plus-residual plots may appear nonlinear even though the true partial regression is linear, a phenonomen called leakage)</p>
<pre class="r fold-show"><code>ceresPlots(multipleRegressionModel)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<pre class="r fold-show"><code>ceresPlots(multipleRegressionModel_quadratic)</code></pre>
<pre><code>Warning in ceresPlots.default(multipleRegressionModel_quadratic): Factors
skipped in drawing CERES plots.</code></pre>
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
<pre><code>Error in plot.window(...): need finite &#39;ylim&#39; values</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-57-2.png" width="672" /></p>
</div>
<div id="box-tidwell-method-for-choosing-predictor-transformations" class="section level6" number="12.1.6.2.2.3">
<h6><span class="header-section-number">12.1.6.2.2.3</span> Box-Tidwell Method for Choosing Predictor Transformations</h6>
<p>predictors must be strictly positive (or add a constant to make it strictly positive)</p>
<pre class="r fold-show"><code>boxTidwell(bpi_antisocialT2Sum ~ I(bpi_antisocialT1Sum + 1) + I(bpi_anxiousDepressedSum + 1),
           other.x = NULL, #list variables not to be transformed in other.x
           data = mydata,
           na.action = na.exclude)</code></pre>
<pre><code>                               MLE of lambda Score Statistic (z) Pr(&gt;|z|)
I(bpi_antisocialT1Sum + 1)           0.90820             -1.0591   0.2896
I(bpi_anxiousDepressedSum + 1)       0.36689             -1.0650   0.2869

iterations =  4 </code></pre>
</div>
<div id="constructed-variables-plot" class="section level6" number="12.1.6.2.2.4">
<h6><span class="header-section-number">12.1.6.2.2.4</span> Constructed-Variables Plot</h6>
<pre class="r fold-show"><code>multipleRegressionModel_cv &lt;- lm(bpi_antisocialT2Sum ~ I(bpi_antisocialT1Sum + 1) + I(bpi_anxiousDepressedSum + 1) + I(bpi_antisocialT1Sum * log(bpi_antisocialT1Sum)) + I(bpi_anxiousDepressedSum * log(bpi_anxiousDepressedSum)),
                              data = mydata,
                              na.action = na.exclude)

summary(multipleRegressionModel_cv)$coef[&quot;I(bpi_antisocialT1Sum * log(bpi_antisocialT1Sum))&quot;, , drop = FALSE]</code></pre>
<pre><code>                                                    Estimate Std. Error
I(bpi_antisocialT1Sum * log(bpi_antisocialT1Sum)) -0.1691003 0.06887107
                                                    t value   Pr(&gt;|t|)
I(bpi_antisocialT1Sum * log(bpi_antisocialT1Sum)) -2.455317 0.01418393</code></pre>
<pre class="r fold-show"><code>summary(multipleRegressionModel_cv)$coef[&quot;I(bpi_anxiousDepressedSum * log(bpi_anxiousDepressedSum))&quot;, , drop = FALSE]</code></pre>
<pre><code>                                                            Estimate Std. Error
I(bpi_anxiousDepressedSum * log(bpi_anxiousDepressedSum)) 0.00828867  0.1384918
                                                             t value  Pr(&gt;|t|)
I(bpi_anxiousDepressedSum * log(bpi_anxiousDepressedSum)) 0.05984953 0.9522831</code></pre>
<pre class="r fold-show"><code>avPlots(multipleRegressionModel_cv, &quot;I(bpi_antisocialT1Sum * log(bpi_antisocialT1Sum))&quot;)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<pre class="r fold-show"><code>avPlots(multipleRegressionModel_cv, &quot;I(bpi_anxiousDepressedSum * log(bpi_anxiousDepressedSum))&quot;)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-59-2.png" width="672" /></p>
</div>
</div>
<div id="robust-models" class="section level5" number="12.1.6.2.3">
<h5><span class="header-section-number">12.1.6.2.3</span> Robust models</h5>
<p>Resources</p>
<ul>
<li>For comparison of methods, see Book: “Modern Methods for Robust Regression”</li>
<li><a href="http://www.ats.ucla.edu/stat/r/dae/rreg.htm" class="uri">http://www.ats.ucla.edu/stat/r/dae/rreg.htm</a></li>
<li><a href="http://stats.stackexchange.com/a/46234/20338" class="uri">http://stats.stackexchange.com/a/46234/20338</a></li>
<li><a href="http://cran.r-project.org/web/views/Robust.html" class="uri">http://cran.r-project.org/web/views/Robust.html</a></li>
</ul>
<div id="robust-correlation" class="section level6" number="12.1.6.2.3.1">
<h6><span class="header-section-number">12.1.6.2.3.1</span> Robust correlation</h6>
<div id="spearmans-rho" class="section level7" number="12.1.6.2.3.1.1">
<p class="heading"><span class="header-section-number">12.1.6.2.3.1.1</span> Spearman’s rho</p>
<p>Spearman’s rho is a non-parametric correlation.</p>
<pre class="r fold-show"><code>cor.test(mydata$bpi_antisocialT1Sum, mydata$bpi_antisocialT2Sum) #Pearson r, correlation that is sensitive to outliers</code></pre>
<pre><code>
    Pearson&#39;s product-moment correlation

data:  mydata$bpi_antisocialT1Sum and mydata$bpi_antisocialT2Sum
t = 31.274, df = 2873, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.4761758 0.5307381
sample estimates:
      cor 
0.5039595 </code></pre>
<pre class="r fold-show"><code>cor.test(mydata$bpi_antisocialT1Sum, mydata$bpi_antisocialT2Sum, method = &quot;spearman&quot;) #Spearman&#39;s rho, a rank correlation that is less sensitive to outliers</code></pre>
<pre><code>Warning in cor.test.default(mydata$bpi_antisocialT1Sum,
mydata$bpi_antisocialT2Sum, : Cannot compute exact p-value with ties</code></pre>
<pre><code>
    Spearman&#39;s rank correlation rho

data:  mydata$bpi_antisocialT1Sum and mydata$bpi_antisocialT2Sum
S = 1997347186, p-value &lt; 2.2e-16
alternative hypothesis: true rho is not equal to 0
sample estimates:
      rho 
0.4956973 </code></pre>
</div>
<div id="minimum-vollume-ellipsoid" class="section level7" number="12.1.6.2.3.1.2">
<p class="heading"><span class="header-section-number">12.1.6.2.3.1.2</span> Minimum vollume ellipsoid</p>
<pre class="r fold-show"><code>cov.mve(na.omit(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)]), cor = TRUE)</code></pre>
<pre><code>$center
bpi_antisocialT1Sum bpi_antisocialT2Sum 
           2.358634            2.260083 

$cov
                    bpi_antisocialT1Sum bpi_antisocialT2Sum
bpi_antisocialT1Sum            2.941881            1.912069
bpi_antisocialT2Sum            1.912069            3.033242

$msg
[1] &quot;147 singular samples of size 3 out of 1500&quot;

$crit
[1] 4.000278

$best
   [1]    1    3    8    9   10   12   13   14   15   16   17   18   19   21
  [15]   22   23   26   32   36   39   40   42   43   44   46   47   48   50
  [29]   51   55   56   57   60   61   65   67   70   71   73   76   79   80
  [43]   81   86   87   88   90   93   94   95   97   98   99  101  102  104
  [57]  105  106  107  108  116  117  119  121  123  124  129  130  132  133
  [71]  134  140  142  143  145  146  148  149  150  153  154  155  157  161
  [85]  163  164  165  168  170  176  177  178  179  180  182  183  184  185
  [99]  187  188  190  191  192  193  194  195  196  197  198  200  201  205
 [113]  206  207  213  214  217  227  228  229  231  232  233  234  235  236
 [127]  237  238  239  241  242  243  244  245  248  249  251  253  255  256
 [141]  257  261  263  265  268  272  275  282  284  288  289  290  293  294
 [155]  295  296  297  298  299  300  301  302  304  307  310  313  315  320
 [169]  325  326  329  330  331  332  333  334  335  339  341  342  345  357
 [183]  364  367  370  371  374  376  379  380  381  382  386  387  388  389
 [197]  390  391  397  398  399  403  404  407  408  409  410  411  416  419
 [211]  421  422  423  425  426  430  431  432  433  438  440  441  442  443
 [225]  444  445  448  449  450  451  452  453  454  455  459  461  463  464
 [239]  465  466  468  469  473  477  478  483  484  486  495  497  498  499
 [253]  501  502  503  504  505  509  510  511  513  518  519  521  522  523
 [267]  524  525  526  527  528  529  531  532  533  534  535  536  537  538
 [281]  539  541  543  545  546  550  553  554  557  559  564  566  568  572
 [295]  577  579  582  583  585  599  600  605  608  610  611  615  616  617
 [309]  618  619  620  621  622  623  625  626  627  631  633  634  635  636
 [323]  637  639  641  642  643  645  646  647  648  649  650  660  661  662
 [337]  667  670  673  674  675  676  679  680  681  682  683  685  687  691
 [351]  693  696  701  705  706  707  710  713  714  715  717  718  719  720
 [365]  721  722  723  728  730  732  733  734  737  741  742  743  744  745
 [379]  746  747  751  752  756  758  760  762  763  772  774  779  780  783
 [393]  785  786  789  791  798  799  801  803  805  809  810  811  812  813
 [407]  814  815  817  818  819  822  824  826  827  828  829  832  834  836
 [421]  837  838  839  840  847  848  849  854  857  858  859  860  862  865
 [435]  867  868  869  871  872  873  874  880  881  888  892  895  897  898
 [449]  899  900  901  902  903  904  905  906  909  912  913  918  919  920
 [463]  923  925  926  927  928  931  932  933  934  935  936  937  938  939
 [477]  940  943  944  950  951  954  955  956  957  960  962  964  965  966
 [491]  967  968  969  970  972  974  975  976  977  980  983  985  987  988
 [505]  989  990  994  996  998 1001 1002 1003 1004 1005 1006 1007 1013 1014
 [519] 1015 1016 1017 1021 1023 1024 1025 1026 1027 1029 1030 1032 1034 1037
 [533] 1040 1043 1044 1047 1050 1051 1055 1057 1058 1061 1062 1064 1065 1066
 [547] 1067 1072 1074 1075 1076 1079 1081 1086 1087 1091 1094 1095 1096 1097
 [561] 1101 1105 1106 1109 1111 1112 1113 1115 1119 1121 1123 1124 1125 1128
 [575] 1129 1130 1132 1138 1139 1144 1145 1146 1147 1148 1149 1150 1151 1152
 [589] 1153 1154 1156 1158 1160 1162 1164 1165 1166 1170 1172 1176 1177 1178
 [603] 1179 1180 1181 1182 1184 1185 1186 1187 1188 1189 1197 1198 1200 1201
 [617] 1203 1205 1206 1207 1208 1214 1215 1216 1218 1219 1220 1223 1225 1229
 [631] 1230 1232 1233 1234 1235 1242 1243 1244 1245 1246 1247 1248 1249 1250
 [645] 1251 1254 1255 1259 1261 1262 1263 1265 1266 1267 1269 1271 1272 1274
 [659] 1276 1280 1282 1283 1284 1285 1287 1288 1290 1291 1292 1293 1294 1295
 [673] 1296 1297 1299 1301 1303 1304 1306 1311 1312 1315 1316 1318 1319 1320
 [687] 1322 1323 1324 1325 1326 1333 1334 1336 1337 1338 1339 1343 1344 1346
 [701] 1347 1349 1350 1352 1353 1354 1355 1357 1358 1359 1360 1361 1362 1363
 [715] 1364 1365 1366 1369 1370 1371 1372 1373 1374 1375 1377 1381 1383 1386
 [729] 1387 1388 1389 1390 1391 1395 1396 1397 1398 1399 1401 1404 1405 1408
 [743] 1409 1412 1413 1414 1417 1419 1421 1422 1423 1428 1430 1432 1433 1434
 [757] 1438 1439 1440 1441 1444 1445 1448 1449 1453 1455 1456 1458 1459 1464
 [771] 1467 1469 1471 1479 1483 1484 1485 1486 1489 1493 1495 1499 1500 1502
 [785] 1503 1506 1508 1513 1514 1515 1516 1518 1519 1521 1522 1524 1527 1531
 [799] 1532 1533 1534 1535 1536 1537 1539 1540 1541 1542 1543 1544 1545 1547
 [813] 1548 1549 1560 1561 1562 1563 1565 1566 1569 1571 1572 1574 1575 1576
 [827] 1577 1583 1585 1586 1588 1589 1590 1591 1592 1593 1594 1595 1596 1597
 [841] 1600 1602 1603 1604 1605 1610 1611 1612 1613 1614 1617 1621 1622 1623
 [855] 1625 1626 1627 1634 1640 1641 1644 1649 1651 1653 1655 1656 1657 1664
 [869] 1672 1673 1674 1675 1677 1678 1686 1687 1689 1690 1691 1692 1694 1695
 [883] 1701 1707 1708 1710 1711 1713 1714 1716 1719 1721 1722 1724 1731 1732
 [897] 1738 1742 1750 1753 1754 1757 1759 1760 1761 1763 1764 1765 1766 1767
 [911] 1770 1771 1772 1775 1778 1780 1781 1791 1795 1797 1798 1801 1802 1803
 [925] 1804 1806 1807 1809 1812 1816 1817 1818 1820 1822 1824 1827 1833 1834
 [939] 1835 1836 1837 1840 1842 1846 1847 1848 1849 1850 1852 1855 1856 1859
 [953] 1861 1863 1864 1866 1868 1870 1879 1881 1884 1888 1890 1892 1902 1904
 [967] 1915 1921 1924 1925 1926 1927 1932 1933 1935 1936 1938 1943 1948 1950
 [981] 1951 1954 1955 1956 1957 1960 1961 1962 1963 1967 1970 1971 1972 1973
 [995] 1974 1982 1984 1985 1986 1989 1990 1991 1992 1993 1994 1995 1999 2002
[1009] 2005 2006 2009 2011 2012 2013 2017 2019 2021 2022 2024 2025 2027 2029
[1023] 2031 2032 2034 2035 2036 2037 2038 2042 2043 2045 2048 2049 2053 2054
[1037] 2055 2059 2061 2062 2067 2068 2071 2073 2074 2076 2077 2078 2079 2080
[1051] 2081 2082 2083 2084 2085 2086 2087 2088 2089 2091 2094 2096 2097 2099
[1065] 2100 2101 2102 2104 2105 2106 2108 2110 2113 2114 2116 2117 2118 2119
[1079] 2123 2124 2125 2127 2129 2130 2131 2137 2138 2139 2140 2142 2143 2145
[1093] 2151 2157 2158 2160 2161 2165 2166 2167 2169 2170 2174 2175 2176 2177
[1107] 2178 2179 2180 2181 2183 2188 2189 2190 2191 2200 2201 2202 2203 2204
[1121] 2205 2206 2207 2208 2210 2212 2215 2219 2221 2223 2225 2226 2227 2231
[1135] 2232 2234 2235 2236 2237 2238 2239 2241 2248 2249 2254 2257 2258 2259
[1149] 2260 2261 2262 2264 2265 2271 2272 2273 2274 2280 2282 2283 2291 2294
[1163] 2297 2298 2299 2300 2301 2302 2306 2307 2310 2311 2316 2319 2320 2322
[1177] 2323 2324 2325 2326 2328 2329 2331 2332 2334 2336 2337 2338 2340 2341
[1191] 2342 2343 2345 2348 2349 2350 2351 2352 2353 2364 2367 2368 2369 2371
[1205] 2373 2377 2378 2379 2383 2384 2385 2387 2390 2398 2400 2402 2410 2411
[1219] 2414 2415 2416 2418 2420 2421 2424 2425 2428 2429 2431 2434 2437 2442
[1233] 2445 2447 2448 2449 2450 2451 2452 2462 2463 2464 2465 2466 2470 2473
[1247] 2476 2477 2479 2481 2483 2489 2490 2491 2495 2498 2499 2500 2503 2504
[1261] 2506 2507 2508 2510 2511 2512 2519 2520 2522 2523 2526 2527 2528 2529
[1275] 2530 2531 2532 2533 2535 2536 2537 2539 2542 2543 2546 2554 2561 2562
[1289] 2563 2564 2565 2566 2571 2573 2575 2578 2582 2583 2584 2585 2588 2591
[1303] 2595 2597 2598 2599 2607 2613 2614 2615 2617 2618 2619 2621 2627 2629
[1317] 2636 2638 2639 2642 2643 2644 2645 2646 2647 2653 2655 2656 2657 2658
[1331] 2659 2662 2663 2664 2667 2668 2670 2673 2674 2676 2677 2679 2680 2682
[1345] 2685 2686 2687 2688 2689 2692 2693 2694 2695 2698 2699 2700 2701 2703
[1359] 2708 2709 2711 2713 2714 2718 2721 2722 2723 2724 2729 2733 2736 2738
[1373] 2739 2740 2746 2748 2752 2753 2757 2759 2760 2763 2764 2765 2766 2769
[1387] 2773 2776 2777 2778 2779 2781 2783 2784 2786 2787 2788 2789 2790 2794
[1401] 2795 2799 2800 2803 2804 2806 2807 2809 2810 2813 2817 2818 2819 2821
[1415] 2822 2825 2831 2832 2834 2836 2838 2839 2844 2846 2847 2849 2850 2851
[1429] 2852 2855 2856 2857 2862 2863 2864 2867 2868 2869 2870 2871 2873

$cor
                    bpi_antisocialT1Sum bpi_antisocialT2Sum
bpi_antisocialT1Sum           1.0000000           0.6400848
bpi_antisocialT2Sum           0.6400848           1.0000000

$n.obs
[1] 2875</code></pre>
</div>
<div id="minimum-covariance-determinant" class="section level7" number="12.1.6.2.3.1.3">
<p class="heading"><span class="header-section-number">12.1.6.2.3.1.3</span> Minimum covariance determinant</p>
<pre class="r fold-show"><code>cov.mcd(na.omit(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)]), cor = TRUE)</code></pre>
<pre><code>$center
bpi_antisocialT1Sum bpi_antisocialT2Sum 
           2.181181            2.094954 

$cov
                    bpi_antisocialT1Sum bpi_antisocialT2Sum
bpi_antisocialT1Sum            2.379036            1.096437
bpi_antisocialT2Sum            1.096437            2.482409

$msg
[1] &quot;155 singular samples of size 3 out of 1500&quot;

$crit
[1] -0.3839279

$best
   [1]    1    3    8    9   10   12   13   14   15   16   17   18   19   21
  [15]   22   23   24   39   40   42   43   44   46   48   50   55   56   57
  [29]   60   61   63   65   67   69   70   76   79   80   81   82   86   87
  [43]   88   93   95   97   98   99  102  104  105  106  107  108  116  117
  [57]  119  120  121  122  123  124  129  130  131  132  133  134  138  139
  [71]  140  141  142  143  145  148  149  150  153  154  155  160  161  166
  [85]  168  169  170  176  177  178  179  180  181  182  183  184  187  188
  [99]  190  191  192  194  195  196  197  198  200  201  202  205  206  207
 [113]  209  212  213  214  227  228  231  232  233  234  235  237  238  239
 [127]  240  241  242  243  244  245  246  247  249  251  253  254  255  256
 [141]  261  262  265  268  269  272  275  281  282  284  289  290  291  293
 [155]  294  295  296  297  298  299  300  301  304  307  308  310  313  315
 [169]  329  330  331  332  333  334  335  339  341  342  343  345  346  350
 [183]  355  356  357  359  364  367  370  371  376  379  380  381  382  386
 [197]  387  388  389  390  391  397  399  401  403  404  407  408  409  410
 [211]  411  413  416  421  422  423  425  426  430  431  432  435  437  438
 [225]  440  441  442  443  445  448  449  450  451  453  455  456  458  459
 [239]  461  462  463  464  466  467  468  469  471  473  474  476  477  478
 [253]  480  482  483  484  486  493  494  495  496  497  498  499  500  501
 [267]  502  503  504  505  506  507  509  510  513  518  519  520  521  522
 [281]  523  524  525  527  528  529  531  532  533  534  535  536  537  538
 [295]  539  541  543  545  546  550  553  554  557  558  562  564  566  568
 [309]  572  575  578  579  582  583  585  599  600  601  605  608  609  610
 [323]  615  616  617  618  619  620  621  622  623  625  626  627  628  631
 [337]  633  634  635  636  637  639  641  642  643  646  647  648  649  650
 [351]  657  660  662  667  670  672  673  674  675  676  679  680  681  682
 [365]  683  685  686  687  690  691  693  696  701  704  705  706  707  710
 [379]  713  714  715  717  718  719  720  721  722  723  728  730  732  733
 [393]  734  736  737  740  741  742  743  744  745  746  747  751  752  758
 [407]  762  763  764  765  769  772  774  776  779  780  782  783  786  789
 [421]  791  798  799  801  802  803  805  806  808  809  810  811  812  813
 [435]  814  817  818  819  822  824  826  827  828  832  834  836  837  838
 [449]  839  840  842  843  847  848  849  852  855  857  858  859  860  861
 [463]  862  865  866  867  868  869  871  872  873  874  877  880  881  882
 [477]  888  889  892  893  895  898  899  900  901  902  903  905  906  907
 [491]  909  912  913  914  918  920  921  923  925  926  927  928  931  932
 [505]  933  934  935  936  937  939  940  941  943  944  945  946  949  950
 [519]  951  954  955  956  957  959  960  962  964  965  967  970  972  973
 [533]  974  975  976  977  980  983  985  987  988  990  992  995  998 1000
 [547] 1001 1002 1003 1004 1005 1006 1007 1008 1013 1014 1015 1016 1017 1019
 [561] 1021 1022 1023 1024 1025 1026 1027 1029 1030 1032 1034 1036 1037 1041
 [575] 1043 1044 1046 1047 1049 1050 1051 1053 1054 1055 1057 1058 1059 1061
 [589] 1064 1066 1067 1070 1072 1075 1076 1079 1083 1086 1087 1088 1091 1094
 [603] 1095 1097 1101 1105 1109 1111 1112 1113 1114 1115 1119 1121 1123 1124
 [617] 1125 1128 1129 1132 1135 1136 1138 1139 1144 1145 1146 1147 1148 1149
 [631] 1150 1152 1154 1158 1160 1162 1163 1164 1165 1171 1176 1177 1178 1179
 [645] 1180 1181 1182 1184 1185 1186 1187 1188 1189 1190 1191 1197 1198 1200
 [659] 1201 1203 1205 1206 1207 1208 1209 1214 1215 1216 1217 1218 1219 1220
 [673] 1221 1223 1224 1229 1230 1231 1232 1233 1234 1235 1242 1243 1244 1245
 [687] 1246 1247 1248 1249 1250 1251 1254 1255 1259 1261 1262 1263 1265 1266
 [701] 1267 1269 1271 1272 1273 1274 1275 1276 1280 1281 1282 1283 1284 1285
 [715] 1286 1287 1288 1289 1290 1291 1292 1293 1294 1296 1299 1301 1302 1303
 [729] 1304 1306 1309 1310 1311 1312 1314 1315 1316 1318 1319 1320 1322 1323
 [743] 1325 1326 1333 1334 1336 1337 1338 1339 1341 1343 1344 1347 1348 1349
 [757] 1350 1352 1353 1354 1355 1356 1357 1358 1359 1360 1361 1362 1363 1365
 [771] 1366 1367 1368 1369 1370 1371 1372 1373 1374 1375 1376 1377 1380 1381
 [785] 1382 1383 1387 1388 1389 1390 1391 1395 1396 1397 1398 1399 1400 1401
 [799] 1402 1405 1408 1412 1413 1414 1417 1419 1421 1422 1423 1424 1426 1428
 [813] 1430 1432 1433 1434 1438 1439 1440 1444 1445 1447 1448 1449 1456 1458
 [827] 1459 1464 1467 1468 1469 1470 1471 1483 1485 1486 1489 1495 1499 1500
 [841] 1502 1504 1505 1506 1508 1513 1514 1515 1516 1517 1518 1519 1521 1522
 [855] 1524 1525 1527 1531 1532 1533 1534 1535 1536 1537 1539 1540 1541 1542
 [869] 1543 1544 1545 1546 1547 1548 1549 1551 1553 1554 1560 1561 1563 1565
 [883] 1569 1571 1572 1575 1576 1577 1583 1584 1585 1586 1588 1589 1590 1591
 [897] 1592 1593 1594 1595 1596 1597 1598 1600 1602 1604 1605 1606 1611 1612
 [911] 1613 1614 1617 1621 1623 1624 1625 1626 1627 1634 1640 1641 1644 1652
 [925] 1656 1657 1661 1664 1665 1672 1674 1675 1686 1687 1689 1690 1691 1692
 [939] 1694 1699 1701 1705 1706 1708 1709 1710 1711 1712 1714 1716 1718 1719
 [953] 1721 1722 1723 1724 1731 1732 1738 1739 1742 1750 1753 1754 1757 1759
 [967] 1760 1761 1763 1764 1765 1766 1772 1774 1775 1776 1777 1778 1781 1791
 [981] 1795 1797 1798 1801 1802 1803 1804 1806 1807 1809 1810 1812 1813 1815
 [995] 1817 1818 1821 1824 1827 1834 1835 1836 1837 1840 1842 1846 1847 1848
[1009] 1849 1850 1851 1852 1855 1858 1859 1860 1861 1863 1864 1866 1867 1868
[1023] 1870 1881 1884 1885 1888 1890 1892 1902 1904 1910 1915 1921 1922 1923
[1037] 1924 1925 1926 1927 1932 1933 1935 1936 1938 1940 1941 1943 1947 1948
[1051] 1950 1951 1954 1955 1956 1957 1960 1961 1962 1963 1966 1967 1969 1970
[1065] 1971 1972 1973 1974 1979 1981 1984 1986 1988 1990 1992 1993 1994 1995
[1079] 1999 2002 2005 2006 2009 2011 2012 2017 2019 2021 2022 2027 2029 2032
[1093] 2034 2036 2038 2042 2043 2045 2049 2051 2053 2054 2055 2059 2061 2062
[1107] 2063 2068 2069 2070 2071 2073 2074 2077 2078 2079 2080 2081 2082 2083
[1121] 2084 2085 2086 2087 2088 2089 2094 2096 2097 2098 2099 2100 2101 2102
[1135] 2104 2105 2108 2110 2112 2113 2114 2116 2117 2118 2119 2123 2124 2125
[1149] 2126 2127 2129 2130 2131 2137 2138 2139 2143 2145 2151 2157 2158 2160
[1163] 2161 2163 2166 2167 2168 2169 2171 2174 2175 2176 2177 2178 2179 2180
[1177] 2181 2183 2185 2188 2189 2190 2191 2200 2201 2202 2203 2205 2206 2207
[1191] 2208 2210 2212 2215 2219 2221 2222 2223 2225 2226 2227 2228 2231 2232
[1205] 2234 2236 2237 2238 2239 2241 2242 2245 2248 2249 2253 2255 2257 2258
[1219] 2259 2260 2261 2262 2264 2269 2271 2272 2273 2274 2275 2280 2283 2285
[1233] 2290 2291 2297 2298 2299 2301 2302 2305 2306 2307 2311 2314 2316 2317
[1247] 2319 2320 2322 2323 2324 2325 2326 2328 2329 2330 2331 2332 2334 2336
[1261] 2337 2338 2340 2341 2342 2343 2344 2345 2348 2349 2350 2351 2352 2354
[1275] 2356 2359 2362 2364 2367 2368 2369 2371 2373 2377 2378 2379 2380 2384
[1289] 2385 2386 2388 2398 2400 2402 2410 2411 2414 2415 2416 2418 2420 2424
[1303] 2425 2428 2429 2437 2442 2443 2444 2445 2446 2447 2448 2449 2450 2451
[1317] 2452 2453 2454 2462 2463 2464 2465 2466 2467 2469 2472 2473 2475 2477
[1331] 2481 2483 2485 2489 2490 2491 2492 2495 2496 2497 2498 2499 2500 2503
[1345] 2504 2506 2507 2508 2509 2510 2511 2512 2513 2520 2522 2523 2525 2526
[1359] 2527 2528 2529 2530 2531 2532 2533 2535 2536 2539 2541 2543 2545 2546
[1373] 2547 2554 2561 2562 2563 2564 2565 2566 2570 2571 2572 2573 2575 2577
[1387] 2578 2581 2582 2583 2584 2585 2588 2590 2591 2597 2598 2599 2603 2604
[1401] 2605 2606 2607 2608 2613 2614 2615 2617 2618 2619 2620 2621 2627 2634
[1415] 2635 2636 2638 2639 2640 2641 2642 2643 2644 2645 2647 2653 2655 2656
[1429] 2657 2658 2659 2663 2664 2667 2668 2669 2670 2672 2673 2674 2676 2677
[1443] 2678 2679 2680 2682 2685 2686 2687 2688 2689 2692 2693 2694 2695 2698
[1457] 2700 2701 2702 2703 2704 2707 2709 2711 2713 2714 2717 2718 2721 2722
[1471] 2723 2724 2727 2728 2729 2731 2733 2736 2738 2739 2740 2741 2742 2746
[1485] 2748 2753 2757 2759 2760 2763 2764 2765 2766 2771 2773 2776 2777 2778
[1499] 2781 2783 2784 2786 2788 2789 2790 2792 2797 2799 2800 2803 2804 2806
[1513] 2807 2808 2809 2810 2813 2814 2817 2819 2821 2825 2826 2831 2832 2834
[1527] 2838 2839 2844 2846 2847 2848 2849 2850 2851 2852 2855 2856 2857 2862
[1541] 2863 2868 2869 2870 2871 2872 2873

$cor
                    bpi_antisocialT1Sum bpi_antisocialT2Sum
bpi_antisocialT1Sum           1.0000000           0.4511764
bpi_antisocialT2Sum           0.4511764           1.0000000

$n.obs
[1] 2875</code></pre>
</div>
<div id="winsorized-correlation" class="section level7" number="12.1.6.2.3.1.4">
<p class="heading"><span class="header-section-number">12.1.6.2.3.1.4</span> Winsorized correlation</p>
<pre class="r fold-show"><code>correlation(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)], winsorize = 0.2, p_adjust = &quot;none&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Parameter1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Parameter2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["r"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["int"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Method"],"name":[10],"type":["chr"],"align":["left"]},{"label":["n_Obs"],"name":[11],"type":["int"],"align":["right"]}],"data":[{"1":"bpi_antisocialT1Sum","2":"bpi_antisocialT2Sum","3":"0.4651836","4":"0.95","5":"0.4360424","6":"0.4933503","7":"28.16721","8":"2873","9":"2.369015e-154","10":"Winsorized Pearson correlation","11":"2875","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="percentage-bend-correlation" class="section level7" number="12.1.6.2.3.1.5">
<p class="heading"><span class="header-section-number">12.1.6.2.3.1.5</span> Percentage bend correlation</p>
<pre class="r fold-show"><code>correlation(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)], method = &quot;percentage&quot;, p_adjust = &quot;none&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Parameter1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Parameter2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["r"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Method"],"name":[10],"type":["chr"],"align":["left"]},{"label":["n_Obs"],"name":[11],"type":["int"],"align":["right"]}],"data":[{"1":"bpi_antisocialT1Sum","2":"bpi_antisocialT2Sum","3":"0.4837302","4":"0.95","5":"0.4552238","6":"0.511246","7":"29.62478","8":"2873","9":"1.536055e-168","10":"Percentage Bend correlation","11":"2875","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="biweight-midcorrelation" class="section level7" number="12.1.6.2.3.1.6">
<p class="heading"><span class="header-section-number">12.1.6.2.3.1.6</span> Biweight midcorrelation</p>
<pre class="r fold-show"><code>correlation(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)], method = &quot;biweight&quot;, p_adjust = &quot;none&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Parameter1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Parameter2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["r"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CI"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["CI_low"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["CI_high"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["t"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["df_error"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["p"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Method"],"name":[10],"type":["chr"],"align":["left"]},{"label":["n_Obs"],"name":[11],"type":["int"],"align":["right"]}],"data":[{"1":"bpi_antisocialT1Sum","2":"bpi_antisocialT2Sum","3":"0.4792883","4":"0.95","5":"0.465104","6":"0.4932265","7":"58.63389","8":"2873","9":"0","10":"Biweight correlation","11":"2875","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="robust-regression-with-a-single-predictor" class="section level6" number="12.1.6.2.3.2">
<h6><span class="header-section-number">12.1.6.2.3.2</span> Robust regression with a single predictor</h6>
<div id="theil-sen-estimator" class="section level7" number="12.1.6.2.3.2.1">
<p class="heading"><span class="header-section-number">12.1.6.2.3.2.1</span> Theil-Sen estimator</p>
<pre class="r fold-show"><code>mydata_subset &lt;- na.omit(mydata[,c(&quot;bpi_antisocialT1Sum&quot;,&quot;bpi_antisocialT2Sum&quot;)])[1:400,]
mblm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum, dataframe = mydata_subset, repeated = FALSE) #Theil-Sen single median estimator, robust to outliers; have to remove missing values first</code></pre>
<pre><code>
Call:
mblm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum, dataframe = mydata_subset, 
    repeated = FALSE)

Coefficients:
        (Intercept)  bpi_antisocialT1Sum  
                1.0                  0.6  </code></pre>
</div>
</div>
<div id="robust-multiple-regression" class="section level6" number="12.1.6.2.3.3">
<h6><span class="header-section-number">12.1.6.2.3.3</span> Robust multiple regression</h6>
<p>Best when no outliers: MM-type regression estimator</p>
<div id="robust-linear-regression" class="section level7" number="12.1.6.2.3.3.1">
<p class="heading"><span class="header-section-number">12.1.6.2.3.3.1</span> Robust linear regression</p>
<p>Best:</p>
<pre class="r fold-show"><code>lmrob(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
   data = mydata,
   na.action = na.exclude)</code></pre>
<pre><code>
Call:
lmrob(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,     data = mydata, na.action = na.exclude)
 \--&gt; method = &quot;MM&quot;
Coefficients:
            (Intercept)      bpi_antisocialT1Sum  bpi_anxiousDepressedSum  
                 0.9440                   0.4914                   0.1577  </code></pre>
<p>Iteratively reweighted least squares (IRLS): <a href="http://www.ats.ucla.edu/stat/r/dae/rreg.htm" class="uri">http://www.ats.ucla.edu/stat/r/dae/rreg.htm</a></p>
<pre class="r fold-show"><code>rlm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
    data = mydata,
    na.action = na.exclude)</code></pre>
<pre><code>Call:
rlm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
    data = mydata, na.action = na.exclude)
Converged in 6 iterations

Coefficients:
            (Intercept)     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
              0.9838033               0.4873118               0.1620020 

Degrees of freedom: 2874 total; 2871 residual
  (8656 observations deleted due to missingness)
Scale estimate: 1.62 </code></pre>
</div>
<div id="robust-generalized-regression-1" class="section level7" number="12.1.6.2.3.3.2">
<p class="heading"><span class="header-section-number">12.1.6.2.3.3.2</span> Robust generalized regression</p>
<pre class="r fold-show"><code>glmrob(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
    data = mydata,
    family = &quot;poisson&quot;,
    na.action = &quot;na.exclude&quot;)</code></pre>
<pre><code>
Call:  glmrob(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum +      bpi_anxiousDepressedSum, family = &quot;poisson&quot;, data = mydata,      na.action = &quot;na.exclude&quot;) 

Coefficients:
            (Intercept)      bpi_antisocialT1Sum  bpi_anxiousDepressedSum  
                0.37281                  0.15589                  0.05026  

Number of observations: 2874 
Fitted by method  &#39;Mqle&#39; </code></pre>
<p>Most resistant to outliers: Least trimmed squares (LTS)—but not good as a standalone estimator, better for identifying outliers</p>
<pre class="r fold-show"><code>ltsReg(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
       data = mydata,
       na.action = na.exclude)</code></pre>
<pre><code>
Call:
ltsReg.formula(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum +     bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)

Coefficients:
              Intercept      bpi_antisocialT1Sum  bpi_anxiousDepressedSum  
                 0.7493                   0.5434                   0.1383  

Scale estimate 1.756 </code></pre>
<div id="not-great-options" class="section level8" number="12.1.6.2.3.3.2.1">
<p class="heading"><span class="header-section-number">12.1.6.2.3.3.2.1</span> Not great options:</p>
<p>Quantile (L1) regression: <code>rq()</code> function of quantreg package</p>
<pre class="r fold-show"><code>rq(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
   data = mydata,
   na.action = na.exclude)</code></pre>
<pre><code>Call:
rq(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum, 
    data = mydata, na.action = na.exclude)

Coefficients:
            (Intercept)     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
                   0.88                    0.52                    0.12 

Degrees of freedom: 11530 total; 11527 residual</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="examining-model-assumptions" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Examining Model Assumptions</h2>
<div id="distribution-of-residuals" class="section level3" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Distribution of Residuals</h3>
<div id="qqPlot" class="section level4" number="12.2.1.1">
<h4><span class="header-section-number">12.2.1.1</span> QQ plots</h4>
<p><a href="http://www.ucd.ie/ecomodel/Resources/QQplots_WebVersion.html" class="uri">http://www.ucd.ie/ecomodel/Resources/QQplots_WebVersion.html</a></p>
<pre class="r fold-show"><code>qqPlot(multipleRegressionModel, main=&quot;QQ Plot&quot;, id.n = 2)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<pre><code>[1] 8955 8956</code></pre>
<pre class="r fold-show"><code>qqPlot(multipleRegressionModel, main=&quot;QQ Plot&quot;, id.n = &quot;noteworthy&quot;)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-2.png" width="672" /></p>
<pre><code>[1] 8955 8956</code></pre>
<pre class="r fold-show"><code>qqnorm(resid(multipleRegressionModel))
qqnorm(resid(rmsMultipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-3.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(resid(robustLinearRegression))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-4.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(resid(ltsRegression))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-5.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(resid(generalizedRegressionModel))
qqnorm(resid(rmsGeneralizedRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-6.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(resid(robustGeneralizedRegression))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-73-7.png" width="672" /></p>
<pre class="r fold-show"><code>qqnorm(resid(multilevelRegressionModel))</code></pre>
<pre><code>Error in resid(multilevelRegressionModel): object &#39;multilevelRegressionModel&#39; not found</code></pre>
</div>
<div id="ppPlot" class="section level4" number="12.2.1.2">
<h4><span class="header-section-number">12.2.1.2</span> PP plots</h4>
<pre class="r fold-show"><code>ppPlot(multipleRegressionModel)
ppPlot(rmsMultipleRegressionModel)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<pre class="r fold-show"><code>ppPlot(robustLinearRegression)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-74-2.png" width="672" /></p>
<pre class="r fold-show"><code>ppPlot(ltsRegression)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-74-3.png" width="672" /></p>
<pre class="r fold-show"><code>ppPlot(generalizedRegressionModel)
ppPlot(rmsGeneralizedRegressionModel)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-74-4.png" width="672" /></p>
<pre class="r fold-show"><code>ppPlot(robustGeneralizedRegression)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-74-5.png" width="672" /></p>
</div>
<div id="densityPlotResiduals" class="section level4" number="12.2.1.3">
<h4><span class="header-section-number">12.2.1.3</span> Density Plot of Residuals</h4>
<pre class="r fold-show"><code>studentizedResiduals &lt;- na.omit(rstudent(multipleRegressionModel))
plot(density(studentizedResiduals), col=&quot;red&quot;)
xfit &lt;- seq(min(studentizedResiduals, na.rm=TRUE), max(studentizedResiduals, na.rm=TRUE), length=40)
lines(xfit, dnorm(xfit), col=&quot;gray&quot;) #compare to normal distribution</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
</div>
</div>
<div id="residualPlots" class="section level3" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> Residual Plots</h3>
<p>Residual plots are plots of the residuals versus observed/fitted values.</p>
<p>Includes plots of a) model residuals versus observed values on predictors and b) model residuals versus model fitted values.</p>
<p>Note: have to remove <code>na.action = na.exclude</code></p>
<p>Tests include:</p>
<ul>
<li>lack-of-fit test for every numeric predictor, t-test for the regressor, added to the model, indicating no lack-of-fit for this type</li>
<li>Tukey’s test for nonadditivity: adding the squares of the fitted values to the model and refitting (evaluates adequacy of model fit)</li>
</ul>
<pre class="r fold-show"><code>residualPlots(multipleRegressionModelNoMissing, id = TRUE)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<pre><code>                        Test stat Pr(&gt;|Test stat|)  
bpi_antisocialT1Sum       -2.0755          0.03803 *
bpi_anxiousDepressedSum   -1.2769          0.20175  
Tukey test                -2.3351          0.01954 *
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<div id="marginalModelPlots" class="section level3" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> Marginal Model Plots</h3>
<p>Marginal model plots are plots of the outcome versus predictors/fitted values.</p>
<p>Includes plots of a) observed outcome values versus values on predictors (ignoring the other predictors) and b) observed outcome values versus model fitted values.</p>
<pre class="r fold-show"><code>marginalModelPlots(multipleRegressionModel, sd = TRUE, id = TRUE)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
</div>
<div id="addedVariablePlots" class="section level3" number="12.2.4">
<h3><span class="header-section-number">12.2.4</span> Added-Variable Plots</h3>
<p>Added-variable plots are plots of the partial association between the outcome and each predictor, controlling for all other predictors.</p>
<p>Useful for identifying jointly influential observations and studying the impact of observations on the regression coefficients.</p>
<p>y-axis: residuals from model with all predictors excluding the predictor of interest</p>
<p>x-axis: residuals from model regressing predictor of interest on all other predictors</p>
<pre class="r fold-show"><code>avPlots(multipleRegressionModel, id = TRUE)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-78-1.png" width="672" /></p>
<div id="refit-model-removing-jointly-influential-observations" class="section level4" number="12.2.4.1">
<h4><span class="header-section-number">12.2.4.1</span> Refit model removing jointly influential observations</h4>
<pre class="r fold-show"><code>multipleRegressionModel_removeJointlyInfluentialObs &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                                          data = mydata,
                                                          na.action = na.exclude,
                                                          subset = -c(6318,6023,4022,4040))

avPlots(multipleRegressionModel_removeJointlyInfluentialObs, id = TRUE)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<pre class="r fold-show"><code>compareCoefs(multipleRegressionModel, multipleRegressionModel_removeJointlyInfluentialObs)</code></pre>
<pre><code>Calls:
1: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)
2: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(6318, 6023, 4022, 4040),
   na.action = na.exclude)

                        Model 1 Model 2
(Intercept)              1.1983  1.1949
SE                       0.0598  0.0599
                                       
bpi_antisocialT1Sum      0.4655  0.4649
SE                       0.0186  0.0188
                                       
bpi_anxiousDepressedSum  0.1608  0.1665
SE                       0.0292  0.0295
                                       </code></pre>
</div>
</div>
<div id="outlier-test" class="section level3" number="12.2.5">
<h3><span class="header-section-number">12.2.5</span> Outlier test</h3>
<p>Locates the largest Studentized residuals in absolute value and computes the Bonferroni-corrected p-values based on a t-test for linear models.</p>
<p>Test of outlyingness, i.e., how likely one would have a residual of a given magnitude in a normal distribution with the same sample size</p>
<p>Note: it does not test how extreme an observation is relative to its distribution (i.e., leverage)</p>
<pre class="r fold-show"><code>outlierTest(multipleRegressionModel)</code></pre>
<pre><code>     rstudent unadjusted p-value Bonferroni p
8955 6.519574         8.2999e-11   2.3854e-07
8956 6.519574         8.2999e-11   2.3854e-07
8957 6.182195         7.2185e-10   2.0746e-06
2560 4.914941         9.3800e-07   2.6958e-03
1385 4.573975         4.9884e-06   1.4337e-02</code></pre>
</div>
<div id="observations-with-high-leverage" class="section level3" number="12.2.6">
<h3><span class="header-section-number">12.2.6</span> Observations with high leverage</h3>
<p>Identifies observations with high leverage (i.e., high hat values)</p>
<p>hat values are an index of leverage (observations that are far from the center of the regressor space and have greater influence on OLS regression coefficients)</p>
<pre class="r fold-show"><code>hist(hatvalues(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<pre class="r fold-show"><code>plot(hatvalues(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-81-2.png" width="672" /></p>
<pre class="r fold-show"><code>influenceIndexPlot(multipleRegressionModel, id = TRUE)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-81-3.png" width="672" /></p>
<pre class="r fold-show"><code>influencePlot(multipleRegressionModel, id = TRUE) # circle size is proportional to Cook&#39;s Distance</code></pre>
<img src="regression_files/figure-html/unnamed-chunk-81-4.png" width="672" />
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["StudRes"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Hat"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CookD"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"-3.940128","2":"0.006990052","3":"0.03624388","_rn_":"5286"},{"1":"-4.264903","2":"0.009024093","3":"0.05488391","_rn_":"10898"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r fold-show"><code>leveragePlots(multipleRegressionModel, id = TRUE)</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-81-5.png" width="672" /></p>
</div>
<div id="observations-with-high-influence-on-ols-regression-coefficients" class="section level3" number="12.2.7">
<h3><span class="header-section-number">12.2.7</span> Observations with high influence (on OLS regression coefficients)</h3>
<p><a href="https://cran.r-project.org/web/packages/olsrr/vignettes/influence_measures.html" class="uri">https://cran.r-project.org/web/packages/olsrr/vignettes/influence_measures.html</a></p>
<pre class="r fold-show"><code>head(influence.measures(multipleRegressionModel)$infmat)</code></pre>
<pre><code>        dfb.1_     dfb.b_T1     dfb.b_DS       dffit     cov.r       cook.d
1  0.000000000  0.000000000  0.000000000          NA 1.0000000           NA
2  0.000000000  0.000000000  0.000000000          NA 1.0000000           NA
3 -0.006546394  0.008357248 -0.006308529 -0.01004886 1.0024362 0.0000336708
4  0.042862749 -0.025185789 -0.007782877  0.04286275 0.9998621 0.0006121902
5  0.000000000  0.000000000  0.000000000          NA 1.0000000           NA
6 -0.018327367  0.010769006  0.003327823 -0.01832737 1.0015775 0.0001119888
           hat
1 0.0000000000
2 0.0000000000
3 0.0014593072
4 0.0009143185
5 0.0000000000
6 0.0009143185</code></pre>
</div>
<div id="dfbeta" class="section level3" number="12.2.8">
<h3><span class="header-section-number">12.2.8</span> DFBETA</h3>
<pre class="r fold-show"><code>head(dfbeta(multipleRegressionModel))</code></pre>
<pre><code>    (Intercept) bpi_antisocialT1Sum bpi_anxiousDepressedSum
1  0.0000000000        0.0000000000            0.000000e+00
2  0.0000000000        0.0000000000            0.000000e+00
3 -0.0003917284        0.0001553400           -1.839704e-04
4  0.0025639901       -0.0004679817           -2.268890e-04
5  0.0000000000        0.0000000000            0.000000e+00
6 -0.0010966309        0.0002001580            9.704151e-05</code></pre>
<pre class="r fold-show"><code>hist(dfbeta(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<pre class="r fold-show"><code>dfbetasPlots(multipleRegressionModel, id = TRUE)</code></pre>
<pre><code>Error in dfbetasPlots.lm(multipleRegressionModel, id = TRUE): argument 2 matches multiple formal arguments</code></pre>
</div>
<div id="dffits" class="section level3" number="12.2.9">
<h3><span class="header-section-number">12.2.9</span> DFFITS</h3>
<pre class="r fold-show"><code>head(dffits(multipleRegressionModel)[order(dffits(multipleRegressionModel), decreasing = TRUE)])</code></pre>
<pre><code>     8472      4468      1917      8955      8956      1986 
0.2664075 0.2428065 0.2237760 0.1972271 0.1972271 0.1923034 </code></pre>
<pre class="r fold-show"><code>hist(dffits(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<pre class="r fold-show"><code>plot(dffits(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-84-2.png" width="672" /></p>
<pre class="r fold-show"><code>plot(dffits(multipleRegressionModel)[order(dffits(multipleRegressionModel), decreasing = TRUE)])</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-84-3.png" width="672" /></p>
</div>
<div id="cooksDistance" class="section level3" number="12.2.10">
<h3><span class="header-section-number">12.2.10</span> Cook’s Distance</h3>
<p>Observations that are both outlying (have a high residual from the regression line) and have high leverage (are far from the center of the regressor space) have high influence on the OLS regression coefficients. An observation will have less influence if it lies on the regression line (not an outlier, i.e., has a low residual) or if it has low leverage (i.e., has a value near the center of a predictor’s distribution).</p>
<pre class="r fold-show"><code>head(cooks.distance(multipleRegressionModel)[order(cooks.distance(multipleRegressionModel), decreasing = TRUE)])</code></pre>
<pre><code>      2765       1371       2767       8472       6170       6023 
0.05488391 0.03624388 0.03624388 0.02358305 0.02323282 0.02315496 </code></pre>
<pre class="r fold-show"><code>hist(cooks.distance(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<pre class="r fold-show"><code>plot(cooks.distance(multipleRegressionModel))</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-85-2.png" width="672" /></p>
<pre class="r fold-show"><code>plot(cooks.distance(multipleRegressionModel)[order(cooks.distance(multipleRegressionModel), decreasing = TRUE)])</code></pre>
<p><img src="regression_files/figure-html/unnamed-chunk-85-3.png" width="672" /></p>
<div id="refit-model-removing-values-with-high-cooks-distance" class="section level4" number="12.2.10.1">
<h4><span class="header-section-number">12.2.10.1</span> Refit model removing values with high cook’s distance</h4>
<pre class="r fold-show"><code>multipleRegressionModel_2 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude,
                                subset = -c(2765,1371))

multipleRegressionModel_3 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude,
                                subset = -c(2765,1371,2767))

multipleRegressionModel_4 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude,
                                subset = -c(2765,1371,2767,8472))

multipleRegressionModel_5 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude,
                                subset = -c(2765,1371,2767,8472,6170))

multipleRegressionModel_6 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude,
                                subset = -c(2765,1371,2767,8472,6170,6023))

multipleRegressionModel_7 &lt;- lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
                                data = mydata,
                                na.action = na.exclude,
                                subset = -c(2765,1371,2767,8472,6170,6023,2766))</code></pre>
<div id="examine-how-much-regression-coefficients-change-when-excluding-influential-observations" class="section level5" number="12.2.10.1.1">
<h5><span class="header-section-number">12.2.10.1.1</span> Examine how much regression coefficients change when excluding influential observations</h5>
<pre class="r fold-show"><code>compareCoefs(multipleRegressionModel, multipleRegressionModel_2, multipleRegressionModel_3, multipleRegressionModel_4, multipleRegressionModel_5, multipleRegressionModel_6, multipleRegressionModel_7)</code></pre>
<pre><code>Calls:
1: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, na.action = na.exclude)
2: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(2765, 1371), na.action =
   na.exclude)
3: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(2765, 1371, 2767), 
  na.action = na.exclude)
4: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(2765, 1371, 2767, 8472),
   na.action = na.exclude)
5: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(2765, 1371, 2767, 8472, 
  6170), na.action = na.exclude)
6: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(2765, 1371, 2767, 8472, 
  6170, 6023), na.action = na.exclude)
7: lm(formula = bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + 
  bpi_anxiousDepressedSum, data = mydata, subset = -c(2765, 1371, 2767, 8472, 
  6170, 6023, 2766), na.action = na.exclude)

                        Model 1 Model 2 Model 3 Model 4 Model 5 Model 6 Model 7
(Intercept)              1.1983  1.1704  1.1577  1.1676  1.1620  1.1537  1.1439
SE                       0.0598  0.0597  0.0596  0.0596  0.0596  0.0595  0.0595
                                                                               
bpi_antisocialT1Sum      0.4655  0.4739  0.4779  0.4748  0.4744  0.4793  0.4836
SE                       0.0186  0.0185  0.0185  0.0185  0.0185  0.0185  0.0185
                                                                               
bpi_anxiousDepressedSum  0.1608  0.1691  0.1726  0.1699  0.1770  0.1742  0.1743
SE                       0.0292  0.0290  0.0290  0.0289  0.0290  0.0290  0.0289
                                                                               </code></pre>
</div>
</div>
<div id="examine-how-much-regression-coefficients-change-when-using-least-trimmed-squares-lts-that-is-resistant-to-outliers" class="section level4" number="12.2.10.2">
<h4><span class="header-section-number">12.2.10.2</span> Examine how much regression coefficients change when using least trimmed squares (LTS) that is resistant to outliers</h4>
<pre class="r fold-show"><code>coef(lm(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
        data = mydata,
        na.action=&quot;na.exclude&quot;))</code></pre>
<pre><code>            (Intercept)     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
              1.1983004               0.4655286               0.1607541 </code></pre>
<pre class="r fold-show"><code>coef(ltsReg(bpi_antisocialT2Sum ~ bpi_antisocialT1Sum + bpi_anxiousDepressedSum,
            data = mydata,
            na.action = &quot;na.exclude&quot;))</code></pre>
<pre><code>              Intercept     bpi_antisocialT1Sum bpi_anxiousDepressedSum 
              0.7493194               0.5433818               0.1382566 </code></pre>
</div>
</div>
<div id="resources" class="section level3" number="12.2.11">
<h3><span class="header-section-number">12.2.11</span> Resources</h3>
<p>Book: An R Companion to Applied Regression</p>
<p><a href="http://people.duke.edu/~rnau/testing.htm" class="uri">http://people.duke.edu/~rnau/testing.htm</a></p>
<p><a href="http://www.statmethods.net/stats/rdiagnostics.html" class="uri">http://www.statmethods.net/stats/rdiagnostics.html</a></p>
<p><a href="http://socserv.socsci.mcmaster.ca/jfox/Courses/Brazil-2009/index.html" class="uri">http://socserv.socsci.mcmaster.ca/jfox/Courses/Brazil-2009/index.html</a></p>
<p><a href="https://en.wikipedia.org/wiki/Ordinary_least_squares#Assumptions" class="uri">https://en.wikipedia.org/wiki/Ordinary_least_squares#Assumptions</a></p>
</div>
</div>
</div>
<div id="session-info" class="section level1" number="13">
<h1><span class="header-section-number">13</span> Session Info</h1>
<pre class="r fold-hide"><code>sessionInfo()</code></pre>
<pre><code>R version 4.2.0 (2022-04-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 20.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] correlation_0.8.1      effects_4.2-1          mblm_0.12.1           
 [4] quantreg_5.93          olsrr_0.5.3            foreign_0.8-82        
 [7] AER_1.2-9              sandwich_3.0-1         lmtest_0.9-40         
[10] zoo_1.8-10             mgcv_1.8-40            nlme_3.1-157          
[13] car_3.0-13             carData_3.0-5          cvTools_0.3.2         
[16] brms_2.17.0            Rcpp_1.0.8.3           robustbase_0.95-0     
[19] rms_6.3-0              SparseM_1.81           Hmisc_4.7-0           
[22] Formula_1.2-4          survival_3.3-1         lattice_0.20-45       
[25] psych_2.2.5            forcats_0.5.1          stringr_1.4.0         
[28] dplyr_1.0.9            purrr_0.3.4            readr_2.1.2           
[31] tidyr_1.2.0            tibble_3.1.7           ggplot2_3.3.6         
[34] tidyverse_1.3.1        MASS_7.3-56            petersenlab_0.1.2-9006

loaded via a namespace (and not attached):
  [1] utf8_1.2.2           tidyselect_1.1.2     lme4_1.1-29         
  [4] htmlwidgets_1.5.4    grid_4.2.0           munsell_0.5.0       
  [7] codetools_0.2-18     DT_0.23              miniUI_0.1.1.1      
 [10] withr_2.5.0          Brobdingnag_1.2-7    colorspace_2.0-3    
 [13] highr_0.9            knitr_1.39           rstudioapi_0.13     
 [16] stats4_4.2.0         bayesplot_1.9.0      rstan_2.26.11       
 [19] mnormt_2.1.0         datawizard_0.4.1     farver_2.1.0        
 [22] bridgesampling_1.1-2 coda_0.19-4          vctrs_0.4.1         
 [25] generics_0.1.2       TH.data_1.1-1        xfun_0.31           
 [28] R6_2.5.1             markdown_1.1         assertthat_0.2.1    
 [31] promises_1.2.0.1     scales_1.2.0         multcomp_1.4-19     
 [34] nnet_7.3-17          gtable_0.3.0         processx_3.6.0      
 [37] goftest_1.2-3        rlang_1.0.2          MatrixModels_0.5-0  
 [40] splines_4.2.0        broom_0.8.0          checkmate_2.1.0     
 [43] inline_0.3.19        yaml_2.3.5           reshape2_1.4.4      
 [46] abind_1.4-5          modelr_0.1.8         threejs_0.3.3       
 [49] crosstalk_1.2.0      backports_1.4.1      httpuv_1.6.5        
 [52] tensorA_0.36.2       tools_4.2.0          lavaan_0.6-11       
 [55] ellipsis_0.3.2       jquerylib_0.1.4      posterior_1.2.2     
 [58] RColorBrewer_1.1-3   ggridges_0.5.3       plyr_1.8.7          
 [61] base64enc_0.1-3      ps_1.7.0             prettyunits_1.1.1   
 [64] rpart_4.1.16         haven_2.5.0          cluster_2.1.3       
 [67] fs_1.5.2             survey_4.1-1         magrittr_2.0.3      
 [70] data.table_1.14.2    colourpicker_1.1.1   reprex_2.0.1        
 [73] mvtnorm_1.1-3        matrixStats_0.62.0   hms_1.1.1           
 [76] shinyjs_2.1.0        mime_0.12            evaluate_0.15       
 [79] xtable_1.8-4         shinystan_2.6.0      jpeg_0.1-9          
 [82] readxl_1.4.0         gridExtra_2.3        rstantools_2.2.0    
 [85] compiler_4.2.0       V8_4.2.0             crayon_1.5.1        
 [88] minqa_1.2.4          StanHeaders_2.26.11  htmltools_0.5.2     
 [91] later_1.3.0          tzdb_0.3.0           RcppParallel_5.1.5  
 [94] lubridate_1.8.0      DBI_1.1.2            dbplyr_2.2.0        
 [97] boot_1.3-28          Matrix_1.4-1         cli_3.3.0           
[100] mitools_2.4          insight_0.17.1       parallel_4.2.0      
[103] igraph_1.3.1         pkgconfig_2.0.3      xml2_1.3.3          
[106] dygraphs_1.1.1.6     pbivnorm_0.6.0       bslib_0.3.1         
[109] estimability_1.3     rvest_1.0.2          distributional_0.3.0
[112] callr_3.7.0          digest_0.6.29        rmarkdown_2.14      
[115] cellranger_1.1.0     htmlTable_2.4.0      nortest_1.0-4       
[118] curl_4.3.2           shiny_1.7.1          gtools_3.9.2.1      
[121] nloptr_2.0.3         lifecycle_1.0.1      jsonlite_1.8.0      
[124] viridisLite_0.4.0    fansi_1.0.3          pillar_1.7.0        
[127] loo_2.5.1            fastmap_1.1.0        httr_1.4.3          
[130] DEoptimR_1.0-11      pkgbuild_1.3.1       glue_1.6.2          
[133] xts_0.12.1           bayestestR_0.12.1    mix_1.0-11          
[136] png_0.1-7            shinythemes_1.2.0    stringi_1.7.6       
[139] sass_0.4.1           polspline_1.1.20     latticeExtra_0.6-29 </code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUmVncmVzc2lvbiIKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZSA9IEZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzcy5zb3VyY2UgPSAiZm9sZC1zaG93IikKYGBgCgojIFByZWFtYmxlCgojIyBJbnN0YWxsIExpYnJhcmllcwoKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICJmb2xkLWhpZGUifQojaW5zdGFsbC5wYWNrYWdlcygicmVtb3RlcyIpCiNyZW1vdGVzOjppbnN0YWxsX2dpdCgiaHR0cHM6Ly9yZXNlYXJjaC1naXQudWlvd2EuZWR1L1BldGVyc2VuTGFiL3BldGVyc2VubGFiLmdpdCIpCmBgYAoKIyMgTG9hZCBMaWJyYXJpZXMKCmBgYHtyLCBtZXNzYWdlID0gRkFMU0UsIHdhcm5pbmcgPSBGQUxTRSwgY2xhc3Muc291cmNlID0gImZvbGQtaGlkZSJ9CmxpYnJhcnkoInBldGVyc2VubGFiIikKbGlicmFyeSgiTUFTUyIpCmxpYnJhcnkoInRpZHl2ZXJzZSIpCmxpYnJhcnkoInBzeWNoIikKbGlicmFyeSgicm1zIikKbGlicmFyeSgicm9idXN0YmFzZSIpCmxpYnJhcnkoImJybXMiKQpsaWJyYXJ5KCJjdlRvb2xzIikKbGlicmFyeSgiY2FyIikKbGlicmFyeSgibWdjdiIpCmxpYnJhcnkoIkFFUiIpCmxpYnJhcnkoImZvcmVpZ24iKQpsaWJyYXJ5KCJvbHNyciIpCmxpYnJhcnkoImFzYmlvIikKbGlicmFyeSgicXVhbnRyZWciKQpsaWJyYXJ5KCJtYmxtIikKbGlicmFyeSgiZWZmZWN0cyIpCmxpYnJhcnkoImNvcnJlbGF0aW9uIikKbGlicmFyeSgiaW50ZXJhY3Rpb25zIikKYGBgCgojIEltcG9ydCBkYXRhCgpgYGB7ciwgY2xhc3Muc291cmNlID0gImZvbGQtaGlkZSJ9Cm15ZGF0YSA8LSByZWFkLmNzdigiaHR0cHM6Ly9vc2YuaW8vOHN5cDUvZG93bmxvYWQiKQpgYGAKCiMgRGF0YSBwcmVwYXJhdGlvbgoKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICJmb2xkLWhpZGUifQpteWRhdGEkY291bnRWYXJpYWJsZSA8LSBhcy5pbnRlZ2VyKG15ZGF0YSRicGlfYW50aXNvY2lhbFQyU3VtKQpteWRhdGEkb3JkZXJlZFZhcmlhYmxlIDwtIGZhY3RvcihteWRhdGEkY291bnRWYXJpYWJsZSwgb3JkZXJlZCA9IFRSVUUpCgpteWRhdGEkZmVtYWxlIDwtIE5BCm15ZGF0YSRmZW1hbGVbd2hpY2gobXlkYXRhJHNleCA9PSAibWFsZSIpXSA8LSAwCm15ZGF0YSRmZW1hbGVbd2hpY2gobXlkYXRhJHNleCA9PSAiZmVtYWxlIildIDwtIDEKYGBgCgojIExpbmVhciBSZWdyZXNzaW9uCgojIyBMaW5lYXIgcmVncmVzc2lvbiBtb2RlbAoKYGBge3J9Cm11bHRpcGxlUmVncmVzc2lvbk1vZGVsIDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCgpzdW1tYXJ5KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpjb25maW50KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpgYGAKCiMjIyBSZW1vdmUgTWlzc2luZyBEYXRhCgpgYGB7cn0KbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxOb01pc3NpbmcgPC0gbG0oYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEub21pdCkKCm11bHRpcGxlUmVncmVzc2lvbk1vZGVsTm9NaXNzaW5nIDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEgJT4lIHNlbGVjdChicGlfYW50aXNvY2lhbFQyU3VtLCBicGlfYW50aXNvY2lhbFQxU3VtLCBicGlfYW54aW91c0RlcHJlc3NlZFN1bSkgJT4lIG5hLm9taXQpCmBgYAoKIyMgTGluZWFyIHJlZ3Jlc3Npb24gbW9kZWwgb24gY29ycmVsYXRpb24vY292YXJpYW5jZSBtYXRyaXggKGZvciBwYWlyd2lzZSBkZWxldGlvbikKCkFsc28gc2VlIGhlcmU6IGh0dHBzOi8vc3RhdHMuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzE1ODM2Ni9maXQtbXVsdGlwbGUtcmVncmVzc2lvbi1tb2RlbC13aXRoLXBhaXJ3aXNlLWRlbGV0aW9uLW9yLW9uLWEtY29ycmVsYXRpb24tY292YXJpLzE3MzAwMiMxNzMwMDIKCmBgYHtyLCB3YXJuaW5nID0gRkFMU0V9Cm11bHRpcGxlUmVncmVzc2lvbk1vZGVsUGFpcndpc2UgPC0gc2V0Q29yKHkgPSAiYnBpX2FudGlzb2NpYWxUMlN1bSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBjKCJicGlfYW50aXNvY2lhbFQxU3VtIiwiYnBpX2FueGlvdXNEZXByZXNzZWRTdW0iKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGNvdihteWRhdGFbLGMoImJwaV9hbnRpc29jaWFsVDJTdW0iLCJicGlfYW50aXNvY2lhbFQxU3VtIiwiYnBpX2FueGlvdXNEZXByZXNzZWRTdW0iKV0sIHVzZSA9ICJwYWlyd2lzZS5jb21wbGV0ZS5vYnMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5vYnMgPSBucm93KG15ZGF0YSkpCgpzdW1tYXJ5KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsUGFpcndpc2UpCm11bHRpcGxlUmVncmVzc2lvbk1vZGVsUGFpcndpc2VbYygiY29lZmZpY2llbnRzIiwic2UiLCJQcm9iYWJpbGl0eSIsIlIyIiwic2hydW5rZW5SMiIpXQpgYGAKCiMjIExpbmVhciByZWdyZXNzaW9uIG1vZGVsIHdpdGggcm9idXN0IGNvdmFyaWFuY2UgbWF0cml4IChybXMpCgpgYGB7cn0Kcm1zTXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwgPC0gcm9iY292KG9scyhicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IFRSVUUpKQoKcm1zTXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwKY29uZmludChybXNNdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKYGBgCgojIyBSb2J1c3QgbGluZWFyIHJlZ3Jlc3Npb24gKE1NLXR5cGUgaXRlcmF0aXZlbHkgcmV3ZWlnaHRlZCBsZWFzdCBzcXVhcmVzIHJlZ3Jlc3Npb24pCgpgYGB7cn0Kcm9idXN0TGluZWFyUmVncmVzc2lvbiA8LSBsbXJvYihicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkKCnN1bW1hcnkocm9idXN0TGluZWFyUmVncmVzc2lvbikKY29uZmludChyb2J1c3RMaW5lYXJSZWdyZXNzaW9uKQpgYGAKCiMjIExlYXN0IHRyaW1tZWQgc3F1YXJlcyByZWdyZXNzaW9uIChmb3IgcmVtb3Zpbmcgb3V0bGllcnMpCgpgYGB7cn0KbHRzUmVncmVzc2lvbiA8LSBsdHNSZWcoYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkKCnN1bW1hcnkobHRzUmVncmVzc2lvbikKYGBgCgojIyBCYXllc2lhbiBsaW5lYXIgcmVncmVzc2lvbgoKYGBge3IsIG1lc3NhZ2UgPSBGQUxTRSwgd2FybmluZyA9IEZBTFNFLCByZXN1bHRzID0gRkFMU0V9CmJheWVzaWFuUmVndWxhcml6ZWRSZWdyZXNzaW9uIDwtIGJybShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWlucyA9IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyID0gMjAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWQgPSA1MjI0MikKCnN1bW1hcnkoYmF5ZXNpYW5SZWd1bGFyaXplZFJlZ3Jlc3Npb24pCmBgYAoKIyBHZW5lcmFsaXplZCBMaW5lYXIgUmVncmVzc2lvbgoKIyMgR2VuZXJhbGl6ZWQgcmVncmVzc2lvbiBtb2RlbAoKSW4gdGhpcyBleGFtcGxlLCB3ZSBwcmVkaWN0IGEgY291bnQgdmFyaWFibGUgdGhhdCBoYXMgYSBwb2lzc29uIGRpc3RyaWJ1dGlvbi4KV2UgY291bGQgY2hhbmdlIHRoZSBkaXN0cmlidXRpb24uCgpgYGB7cn0KZ2VuZXJhbGl6ZWRSZWdyZXNzaW9uTW9kZWwgPC0gZ2xtKGNvdW50VmFyaWFibGUgfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gInBvaXNzb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkKCnN1bW1hcnkoZ2VuZXJhbGl6ZWRSZWdyZXNzaW9uTW9kZWwpCmNvbmZpbnQoZ2VuZXJhbGl6ZWRSZWdyZXNzaW9uTW9kZWwpCmBgYAoKIyMgR2VuZXJhbGl6ZWQgcmVncmVzc2lvbiBtb2RlbCAocm1zKQoKSW4gdGhpcyBleGFtcGxlLCB3ZSBwcmVkaWN0IGEgY291bnQgdmFyaWFibGUgdGhhdCBoYXMgYSBwb2lzc29uIGRpc3RyaWJ1dGlvbi4KV2UgY291bGQgY2hhbmdlIHRoZSBkaXN0cmlidXRpb24uCgpgYGB7cn0Kcm1zR2VuZXJhbGl6ZWRSZWdyZXNzaW9uTW9kZWwgPC0gR2xtKGNvdW50VmFyaWFibGUgfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gVFJVRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9ICJwb2lzc29uIikKCnJtc0dlbmVyYWxpemVkUmVncmVzc2lvbk1vZGVsCmNvbmZpbnQocm1zR2VuZXJhbGl6ZWRSZWdyZXNzaW9uTW9kZWwpCmBgYAoKIyMgQmF5ZXNpYW4gZ2VuZXJhbGl6ZWQgbGluZWFyIG1vZGVsCgpJbiB0aGlzIGV4YW1wbGUsIHdlIHByZWRpY3QgYSBjb3VudCB2YXJpYWJsZSB0aGF0IGhhcyBhIHBvaXNzb24gZGlzdHJpYnV0aW9uLgpXZSBjb3VsZCBjaGFuZ2UgdGhlIGRpc3RyaWJ1dGlvbi4KRm9yIGV4YW1wbGUsIHdlIGNvdWxkIHVzZSBHYW1tYSByZWdyZXNzaW9uLCBgZmFtaWx5ID0gR2FtbWFgLCB3aGVuIHRoZSByZXNwb25zZSB2YXJpYWJsZSBpcyBjb250aW51b3VzIGFuZCBwb3NpdGl2ZSwgYW5kIHRoZSBjb2VmZmljaWVudCBvZiB2YXJpYXRpb24tLXJhdGhlciB0aGFuIHRoZSB2YXJpYW5jZS0taXMgY29uc3RhbnQuCgpgYGB7ciwgbWVzc2FnZSA9IEZBTFNFLCB3YXJuaW5nID0gRkFMU0UsIHJlc3VsdHMgPSBGQUxTRX0KYmF5ZXNpYW5HZW5lcmFsaXplZExpbmVhclJlZ3Jlc3Npb24gPC0gYnJtKGNvdW50VmFyaWFibGUgfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gcG9pc3NvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWlucyA9IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWVkID0gNTIyNDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyID0gMjAwMCkKCnN1bW1hcnkoYmF5ZXNpYW5HZW5lcmFsaXplZExpbmVhclJlZ3Jlc3Npb24pCmBgYAoKIyMgUm9idXN0IGdlbmVyYWxpemVkIHJlZ3Jlc3Npb24KCmBgYHtyfQpyb2J1c3RHZW5lcmFsaXplZFJlZ3Jlc3Npb24gPC0gZ2xtcm9iKGNvdW50VmFyaWFibGUgfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHkgPSAicG9pc3NvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkKCnN1bW1hcnkocm9idXN0R2VuZXJhbGl6ZWRSZWdyZXNzaW9uKQpjb25maW50KHJvYnVzdEdlbmVyYWxpemVkUmVncmVzc2lvbikKYGBgCgojIyBPcmRpbmFsIHJlZ3Jlc3Npb24gbW9kZWwgKHJtcykKCmBgYHtyfQpvcmRpbmFsUmVncmVzc2lvbk1vZGVsIDwtIHJvYmNvdihvcm0ob3JkZXJlZFZhcmlhYmxlIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBUUlVFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IFRSVUUpKQoKb3JkaW5hbFJlZ3Jlc3Npb25Nb2RlbApjb25maW50KG9yZGluYWxSZWdyZXNzaW9uTW9kZWwpCmBgYAoKIyMgQmF5ZXNpYW4gb3JkaW5hbCByZWdyZXNzaW9uIG1vZGVsCgpgYGB7ciwgbWVzc2FnZSA9IEZBTFNFLCB3YXJuaW5nID0gRkFMU0UsIHJlc3VsdHMgPSBGQUxTRX0KYmF5ZXNpYW5PcmRpbmFsUmVncmVzc2lvbiA8LSBicm0ob3JkZXJlZFZhcmlhYmxlIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHkgPSBjdW11bGF0aXZlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWlucyA9IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWQgPSA1MjI0MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlciA9IDIwMDApCgpzdW1tYXJ5KGJheWVzaWFuT3JkaW5hbFJlZ3Jlc3Npb24pCmBgYAoKIyMgQmF5ZXNpYW4gY291bnQgcmVncmVzc2lvbiBtb2RlbAoKYGBge3IsIG1lc3NhZ2UgPSBGQUxTRSwgd2FybmluZyA9IEZBTFNFLCByZXN1bHRzID0gRkFMU0V9CmJheWVzaWFuQ291bnRSZWdyZXNzaW9uIDwtIGJybShjb3VudFZhcmlhYmxlIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9ICJwb2lzc29uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWlucyA9IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWVkID0gNTIyNDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyID0gMjAwMCkKCnN1bW1hcnkoYmF5ZXNpYW5Db3VudFJlZ3Jlc3Npb24pCmBgYAoKIyMgTG9naXN0aWMgcmVncmVzc2lvbiBtb2RlbCAocm1zKQoKYGBge3J9CmxvZ2lzdGljUmVncmVzc2lvbk1vZGVsIDwtIHJvYmNvdihscm0oZmVtYWxlIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IFRSVUUpKQoKbG9naXN0aWNSZWdyZXNzaW9uTW9kZWwKY29uZmludChsb2dpc3RpY1JlZ3Jlc3Npb25Nb2RlbCkKYGBgCgojIyBCYXllc2lhbiBsb2dpc3RpYyByZWdyZXNzaW9uIG1vZGVsCgpgYGB7ciwgbWVzc2FnZSA9IEZBTFNFLCB3YXJuaW5nID0gRkFMU0UsIHJlc3VsdHMgPSBGQUxTRX0KYmF5ZXNpYW5Mb2dpc3RpY1JlZ3Jlc3Npb24gPC0gYnJtKGZlbWFsZSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHkgPSBiZXJub3VsbGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbnMgPSA0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZCA9IDUyMjQyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlciA9IDIwMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApzdW1tYXJ5KGJheWVzaWFuTG9naXN0aWNSZWdyZXNzaW9uKQpgYGAKCiMgSGllcmFyY2hpY2FsIExpbmVhciBSZWdyZXNzaW9uCgpgYGB7cn0KbW9kZWwxIDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtLAogICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSAlPiUgc2VsZWN0KGJwaV9hbnRpc29jaWFsVDJTdW0sIGJwaV9hbnRpc29jaWFsVDFTdW0sIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtKSAlPiUgbmEub21pdCwKICAgICAgICAgICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCgptb2RlbDIgPC0gbG0oYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEgJT4lIHNlbGVjdChicGlfYW50aXNvY2lhbFQyU3VtLCBicGlfYW50aXNvY2lhbFQxU3VtLCBicGlfYW54aW91c0RlcHJlc3NlZFN1bSkgJT4lIG5hLm9taXQsCiAgICAgICAgICAgICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlKQoKc3VtbWFyeShtb2RlbDIpJGFkai5yLnNxdWFyZWQKCmFub3ZhKG1vZGVsMSwgbW9kZWwyKQpzdW1tYXJ5KG1vZGVsMikkYWRqLnIuc3F1YXJlZCAtIHN1bW1hcnkobW9kZWwxKSRhZGouci5zcXVhcmVkCmBgYAoKIyBNb2RlcmF0ZWQgTXVsdGlwbGUgUmVncmVzc2lvbiB7I21vZGVyYXRpb259CgpodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvaW50ZXJhY3Rpb25zL3ZpZ25ldHRlcy9pbnRlcmFjdGlvbnMuaHRtbAoKTWFrZSBzdXJlIHRvIG1lYW4tY2VudGVyIG9yIG9ydGhvZ29uYWxpemUgcHJlZGljdG9ycyBiZWZvcmUgY29tcHV0aW5nIHRoZSBpbnRlcmFjdGlvbiB0ZXJtLgoKIyMgTW9kZWwKCmBgYHtyfQpzdGF0ZXMgPC0gYXMuZGF0YS5mcmFtZShzdGF0ZS54NzcpCmludGVyYWN0aW9uTW9kZWwgPC0gbG0oSW5jb21lIH4gSWxsaXRlcmFjeSAqIE11cmRlciArIGBIUyBHcmFkYCwgZGF0YSA9IHN0YXRlcykKYGBgCgojIyBQbG90cwoKYGBge3J9CmludGVyYWN0X3Bsb3QoaW50ZXJhY3Rpb25Nb2RlbCwgcHJlZCA9IElsbGl0ZXJhY3ksIG1vZHggPSBNdXJkZXIpCmludGVyYWN0X3Bsb3QoaW50ZXJhY3Rpb25Nb2RlbCwgcHJlZCA9IElsbGl0ZXJhY3ksIG1vZHggPSBNdXJkZXIsIHBsb3QucG9pbnRzID0gVFJVRSkKaW50ZXJhY3RfcGxvdChpbnRlcmFjdGlvbk1vZGVsLCBwcmVkID0gSWxsaXRlcmFjeSwgbW9keCA9IE11cmRlciwgaW50ZXJ2YWwgPSBUUlVFKQoKam9obnNvbl9uZXltYW4oaW50ZXJhY3Rpb25Nb2RlbCwgcHJlZCA9IElsbGl0ZXJhY3ksIG1vZHggPSBNdXJkZXIsIGFscGhhID0gLjA1KQpgYGAKCiMjIFNpbXBsZSBTbG9wZXMgQW5hbHlzaXMKCmBgYHtyfQpzaW1fc2xvcGVzKGludGVyYWN0aW9uTW9kZWwsIHByZWQgPSBJbGxpdGVyYWN5LCBtb2R4ID0gTXVyZGVyLCBqb2huc29uX25leW1hbiA9IEZBTFNFKQpzaW1fc2xvcGVzKGludGVyYWN0aW9uTW9kZWwsCiAgICAgICAgICAgcHJlZCA9IElsbGl0ZXJhY3ksCiAgICAgICAgICAgbW9keCA9IE11cmRlciwKICAgICAgICAgICBtb2R4LnZhbHVlcyA9IGMoMCwgNSwgMTApLAogICAgICAgICAgIGpvaG5zb25fbmV5bWFuID0gRkFMU0UpCmBgYAoKIyMgSm9obnNvbi1OZXltYW4gaW50ZXJ2YWxzCgpJbmRpY2F0ZXMgYWxsIHRoZSB2YWx1ZXMgb2YgdGhlIG1vZGVyYXRvciBmb3Igd2hpY2ggdGhlIHNsb3BlIG9mIHRoZSBwcmVkaWN0b3IgaXMgc3RhdGlzdGljYWxseSBzaWduaWZpY2FudC4KCmBgYHtyfQpzaW1fc2xvcGVzKGludGVyYWN0aW9uTW9kZWwsIHByZWQgPSBJbGxpdGVyYWN5LCBtb2R4ID0gTXVyZGVyLCBqb2huc29uX25leW1hbiA9IFRSVUUpCgpwcm9iZV9pbnRlcmFjdGlvbihpbnRlcmFjdGlvbk1vZGVsLAogICAgICAgICAgICAgICAgICBwcmVkID0gSWxsaXRlcmFjeSwKICAgICAgICAgICAgICAgICAgbW9keCA9IE11cmRlciwKICAgICAgICAgICAgICAgICAgY29uZC5pbnQgPSBUUlVFLAogICAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IFRSVUUsCiAgICAgICAgICAgICAgICAgIGpucGxvdCA9IFRSVUUpCmBgYAoKIyBNb2RlbCBCdWlsZGluZyBTdGVwcwoKMS4gRXhhbWluZSBleHRlbnQgYW5kIHR5cGUgb2YgbWlzc2luZyBkYXRhLCBjb25zaWRlciBob3cgdG8gaGFuZGxlIG1pc3NpbmcgdmFsdWVzIChtdWx0aXBsZSBpbXB1dGF0aW9uLCBGSU1MLCBwYWlyd2lzZSBkZWxldGlvbiwgbGlzdHdpc2UgZGVsZXRpb24pCiAgICAtIExpdHRsZSdzIE1DQVIgdGVzdCBmcm9tIGBtY2FyX3Rlc3QoKWAgZnVuY3Rpb24gb2YgdGhlIGBuanRpZXJuZXkvbmFuaWFyYCBwYWNrYWdlCiAgICAtIEJheWVzaWFuIGhhbmRsaW5nIG9mIG1pc3NpbmcgZGF0YTogaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvd2ViL3BhY2thZ2VzL2JybXMvdmlnbmV0dGVzL2JybXNfbWlzc2luZ3MuaHRtbAoxLiBFeGFtaW5lIGRlc2NyaXB0aXZlIHN0YXRpc3RpY3MsIGNvbnNpZGVyIHZhcmlhYmxlIHRyYW5zZm9ybWF0aW9ucwoxLiBFeGFtaW5lIHNjYXR0ZXJwbG90IG1hdHJpeCB0byBleGFtaW5lIHdoZXRoZXIgYXNzb2NpYXRpb25zIGJldHdlZW4gcHJlZGljdG9yIGFuZCBvdXRjb21lcyBhcmUgbGluZWFyIG9yIG5vbmxpbmVhcgoxLiBNb2RlbCBidWlsZGluZzogdGhlb3J5IGFuZCBlbXBpcmljaXNtIChzdGVwd2lzZSByZWdyZXNzaW9uLCBsaWtlbGlob29kIHJhdGlvIHRlc3RzLCBrLWZvbGQgY3Jvc3MgdmFsaWRhdGlvbiB0byBjaGVjayBmb3Igb3Zlci1maXR0aW5nIGNvbXBhcmVkIHRvIHNpbXBsZXIgbW9kZWwpCjEuIFRlc3QgYXNzdW1wdGlvbnMKICAgIC0gRXhhbWluZSB3aGV0aGVyIHByZWRpY3RvcnMgaGF2ZSBsaW5lYXIgYXNzb2NpYXRpb24gd2l0aCBvdXRjb21lIChSZXNpZHVhbCBQbG90cywgTWFyZ2luYWwgTW9kZWwgUGxvdHMsIEFkZGVkLVZhcmlhYmxlIFBsb3Rz4oCUY2hlY2sgZm9yIG5vbi1ob3Jpem9udGFsIGxpbmVzKQogICAgLSBFeGFtaW5lIHdoZXRoZXIgcmVzaWR1YWxzIGhhdmUgY29uc3RhbnQgdmFyaWFuY2UgYWNyb3NzIGxldmVscyBvZiBvdXRjb21lIGFuZCBwcmVkaWN0b3JzIFJlc2lkdWFsIFBsb3RzLCBTcHJlYWQtTGV2ZWwgUGxvdHPigJRjaGVjayBmb3IgZmFuLXNoYXBlZCBwbG90IG9yIG90aGVyIGluY3JlYXNpbmcvZGVjcmVhc2luZyBzdHJ1Y3R1cmUpCiAgICAtIEV4YW1pbmUgd2hldGhlciBwcmVkaWN0b3JzIHNob3cgbXVsdGljb2xsaW5lYXJpdHkgKFZJRikKICAgIC0gRXhhbWluZSB3aGV0aGVyIHJlc2lkdWFscyBhcmUgbm9ybWFsbHkgZGlzdHJpYnV0ZWQgKFFRIHBsb3QgYW5kIGRlbnNpdHkgcGxvdCkKICAgIC0gRXhhbWluZSBpbmZsdWVuY2Ugb2YgaW5mbHVlbnRpYWwgb2JzZXJ2YXRpb25zIChoaWdoIG91dGx5aW5nbmVzcyBhbmQgbGV2ZXJhZ2UpIG9uIHBhcmFtZXRlciBzdGltYXRlcyBieSBpdGVyYXRpdmVseSByZW1vdmluZyBpbmZsdWVudGlhbCBvYnNlcnZhdGlvbnMgYW5kIHJlZml0dGluZyAoQWRkZWQtVmFyaWFibGUgUGxvdHMpCjEuIEhhbmRsZSB2aW9sYXRlZCBhc3N1bXB0aW9ucywgc2VsZWN0IGZpbmFsIHNldCBvZiBwcmVkaWN0b3JzL291dGNvbWVzIGFuZCB0cmFuc2Zvcm1hdGlvbiBvZiBlYWNoCjEuIFVzZSBrLWZvbGQgY3Jvc3MgdmFsaWRhdGlvbiB0byBpZGVudGlmeSB0aGUgYmVzdCBlc3RpbWF0aW9uIHByb2NlZHVyZSAoT0xTLCBNTSwgb3IgTFRTKSBvbiB0aGUgZmluYWwgbW9kZWwKMS4gVXNlIGlkZW50aWZpZWQgZXN0aW1hdGlvbiBwcm9jZWR1cmUgdG8gZml0IGZpbmFsIG1vZGVsIGFuZCBkZXRlcm1pbmUgdGhlIGJlc3QgcGFyYW1ldGVyIHBvaW50IGVzdGltYXRlcwoxLiBDYWxjdWxhdGUgYm9vdHN0cmFwcGVkIGVzdGltYXRlcyB0byBkZXRlcm1pbmUgdGhlIGNvbmZpZGVuY2UgaW50ZXJ2YWxzIGFyb3VuZCB0aGUgcGFyYW1ldGVyIGVzdGltYXRlcyBvZiB0aGUgZmluYWwgbW9kZWwKCiMgQm9vdHN0cmFwcGVkIEVzdGltYXRlcwoKVG8gZGV0ZXJtaW5lIHRoZSBjb25maWRlbmNlIGludGVydmFscyBvZiBwYXJhbWV0ZXIgZXN0aW1hdGVzCgojIyBMaW5lYXIgUmVncmVzc2lvbgoKYGBge3J9Cm11bHRpcGxlUmVncmVzc2lvbk1vZGVsQm9vdHN0cmFwcGVkIDwtIEJvb3QobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxOb01pc3NpbmcsIFIgPSAxMDAwKQpzdW1tYXJ5KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsQm9vdHN0cmFwcGVkKQpjb25maW50KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsQm9vdHN0cmFwcGVkLCBsZXZlbCA9IC45NSwgdHlwZSA9ICJiY2EiKQpoaXN0KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsQm9vdHN0cmFwcGVkKQpgYGAKCiMjIEdlbmVyYWxpemVkIFJlZ3Jlc3Npb24KCmBgYHtyfQpnZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbEJvb3RzdHJhcHBlZCA8LSBCb290KGdlbmVyYWxpemVkUmVncmVzc2lvbk1vZGVsLCBSID0gMTAwMCkKc3VtbWFyeShnZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbEJvb3RzdHJhcHBlZCkKY29uZmludChnZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbEJvb3RzdHJhcHBlZCwgbGV2ZWwgPSAuOTUsIHR5cGUgPSAiYmNhIikKaGlzdChnZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbEJvb3RzdHJhcHBlZCkKYGBgCgojIENyb3NzIFZhbGlkYXRpb24KClRvIGV4YW1pbmUgZGVncmVlIG9mIHByZWRpY3Rpb24gZXJyb3IgYW5kIG92ZXItZml0dGluZyB0byBkZXRlcm1pbmUgYmVzdCBtb2RlbApodHRwczovL3N0YXRzLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8xMDM0NTkvaG93LWRvLWkta25vdy13aGljaC1tZXRob2Qtb2YtY3Jvc3MtdmFsaWRhdGlvbi1pcy1iZXN0CgojIyBLLWZvbGQgY3Jvc3MgdmFsaWRhdGlvbgoKYGBge3J9CmtGb2xkcyA8LSAxMApyZXBsaWNhdGlvbnMgPC0gMjAKCmZvbGRzIDwtIGN2Rm9sZHMobnJvdyhteWRhdGEpLCBLID0ga0ZvbGRzLCBSID0gcmVwbGljYXRpb25zKQoKZml0TG0gPC0gbG0oYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgbmEuYWN0aW9uID0gIm5hLmV4Y2x1ZGUiKQoKZml0TG1yb2IgPC0gbG1yb2IoYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gIm5hLmV4Y2x1ZGUiKQoKZml0THRzIDwtIGx0c1JlZyhicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gIm5hLmV4Y2x1ZGUiKQoKY3ZGaXRMbSA8LSBjdkxtKGZpdExtLCBLID0ga0ZvbGRzLCBSID0gcmVwbGljYXRpb25zKQoKY3ZGaXRMbXJvYiA8LSBjdkxtcm9iKGZpdExtcm9iLCBLID0ga0ZvbGRzLCBSID0gcmVwbGljYXRpb25zKQpjdkZpdEx0cyA8LSBjdkx0cyhmaXRMdHMsIEsgPSBrRm9sZHMsIFIgPSByZXBsaWNhdGlvbnMpCgpjdkZpdHMgPC0gY3ZTZWxlY3QoT0xTID0gY3ZGaXRMbSwgTU0gPSBjdkZpdExtcm9iLCBMVFMgPSBjdkZpdEx0cykKY3ZGaXRzCgpid3Bsb3QoY3ZGaXRzLCB4bGFiID0gIlJvb3QgTWVhbiBTcXVhcmUgRXJyb3IiLCB4bGltPSBjKDAsIG1heChjdkZpdHMkY3YkQ1YpICsgMC4yKSkKYGBgCgojIEV4YW1pbmluZyBNb2RlbCBGaXRzCgojIyBFZmZlY3QgUGxvdHMKCmBgYHtyfQphbGxFZmZlY3RzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpwbG90KGFsbEVmZmVjdHMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpKQpgYGAKCiMjIENvbmZpZGVuY2UgRWxsaXBzZXMKCmBgYHtyfQpjb25maWRlbmNlRWxsaXBzZShtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCwgbGV2ZWxzID0gYygwLjUsIC45NSkpCmBgYAoKIyMgRGF0YSBFbGxpcHNlCgpgYGB7cn0KbXlkYXRhX25vbWlzc2luZyA8LSBuYS5vbWl0KG15ZGF0YVssYygiYnBpX2FudGlzb2NpYWxUMVN1bSIsImJwaV9hbnRpc29jaWFsVDJTdW0iKV0pCmRhdGFFbGxpcHNlKG15ZGF0YV9ub21pc3NpbmckYnBpX2FudGlzb2NpYWxUMVN1bSwgbXlkYXRhX25vbWlzc2luZyRicGlfYW50aXNvY2lhbFQyU3VtLCBsZXZlbHMgPSBjKDAuNSwgLjk1KSkKYGBgCgojIERpYWdub3N0aWNzCgojIyBBc3N1bXB0aW9ucwoKIyMjIDEuIExpbmVhciByZWxhdGlvbiBiZXR3ZWVuIHByZWRpY3RvcnMgYW5kIG91dGNvbWUgeyNsaW5lYXJBc3NvY2lhdGlvbn0KCiMjIyMgV2F5cyB0byBUZXN0CgojIyMjIyBCZWZvcmUgTW9kZWwgRml0dGluZwoKLSBzY2F0dGVycGxvdCBtYXRyaXgKLSBkaXN0YW5jZSBjb3JyZWxhdGlvbgoKIyMjIyMjIFNjYXR0ZXJwbG90IE1hdHJpeAoKYGBge3J9CnNjYXR0ZXJwbG90TWF0cml4KH4gYnBpX2FudGlzb2NpYWxUMlN1bSArIGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwgZGF0YSA9IG15ZGF0YSkKYGBgCgojIyMjIyMgRGlzdGFuY2UgY29ycmVsYXRpb24KClRoZSBkaXN0YW5jZSBjb3JyZWxhdGlvbiBpcyBhbiBpbmRleCBvZiB0aGUgZGVncmVlIG9mIHRoZSBsaW5lYXIgYW5kIG5vbi1saW5lYXIgYXNzb2NpYXRpb24gYmV0d2VlbiB0d28gdmFyaWFibGVzLgoKYGBge3J9CmNvcnJlbGF0aW9uKG15ZGF0YVssYygiYnBpX2FudGlzb2NpYWxUMVN1bSIsImJwaV9hbnRpc29jaWFsVDJTdW0iKV0sIG1ldGhvZCA9ICJkaXN0YW5jZSIsIHBfYWRqdXN0ID0gIm5vbmUiKQpgYGAKCiMjIyMjIEFmdGVyIE1vZGVsIEZpdHRpbmcKCkNoZWNrIGZvciBub25saW5lYXJpdGllcyAobm9uLWhvcml6b250YWwgbGluZSkgaW4gcGxvdHMgb2Y6CgotIFJlc2lkdWFscyB2ZXJzdXMgZml0dGVkIHZhbHVlcyAoW1Jlc2lkdWFsIFBsb3RzXSgjcmVzaWR1YWxQbG90cykp4oCUYmVzdAotIFJlc2lkdWFscyB2ZXJzdXMgcHJlZGljdG9ycyAoW1Jlc2lkdWFsIFBsb3RzXSgjcmVzaWR1YWxQbG90cykpCi0gT3V0Y29tZSB2ZXJzdXMgZml0dGVkIHZhbHVlcyAoW01hcmdpbmFsIE1vZGVsIFBsb3RzXSgjbWFyZ2luYWxNb2RlbFBsb3RzKSkKLSBPdXRjb21lIHZlcnN1cyBwcmVkaWN0b3JzLCBpZ25vcmluZyBvdGhlciBwcmVkaWN0b3JzIChbTWFyZ2luYWwgTW9kZWwgUGxvdHNdKCNtYXJnaW5hbE1vZGVsUGxvdHMpKQotIE91dGNvbWUgdmVyc3VzIHByZWRpY3RvcnMsIGNvbnRyb2xsaW5nIGZvciBvdGhlciBwcmVkaWN0b3JzIChbQWRkZWQtVmFyaWFibGUgUGxvdHNdKCNhZGRlZFZhcmlhYmxlUGxvdHMpKQoKIyMjIyBXYXlzIHRvIEhhbmRsZQoKLSBUcmFuc2Zvcm0gb3V0Y29tZS9wcmVkaWN0b3IgdmFyaWFibGVzIChCb3gtQ294IHRyYW5zZm9ybWF0aW9ucykKLSBTZW1pLXBhcmFtZXRyaWMgcmVncmVzc2lvbiBtb2RlbHM6IEdlbmVyYWxpemVkIGFkZGl0aXZlIG1vZGVscyAoR0FNKQotIE5vbi1wYXJhbWV0cmljIHJlZ3Jlc3Npb24gbW9kZWxzOiBOZWFyZXN0LU5laWdoYm9yIEtlcm5lbCBSZWdyZXNzaW9uCgojIyMjIyBTZW1pLXBhcmFtZXRyaWMgb3Igbm9uLXBhcmFtZXRyaWMgcmVncmVzc2lvbiBtb2RlbHMKCmh0dHA6Ly93d3cubGlzYS5zdGF0LnZ0LmVkdS8/cT1ub2RlLzc1MTcKCk5vdGU6IHVzaW5nIHNlbWktcGFyYW1ldHJpYyBvciBub24tcGFyYW1ldHJpYyBtb2RlbHMgaW5jcmVhc2VzIGZpdCBpbiBjb250ZXh0IG9mIG5vbmxpbmVhcml0eSBhdCB0aGUgZXhwZW5zZSBvZiBhZGRlZCBjb21wbGV4aXR5LgpNYWtlIHN1cmUgdG8gYXZvaWQgZml0dGluZyBhbiBvdmVybHkgY29tcGxleCBtb2RlbCAoZS5nLiwgdXNlIGstZm9sZCBjcm9zcyB2YWxpZGF0aW9uKS4KT2Z0ZW4sIHRoZSBzaW1wbGVyIChnZW5lcmFsaXplZCkgbGluZWFyIG1vZGVsIGlzIHByZWZlcmFibGUgdG8gc2VtaS1wYXJlbWV0cmljIG9yIG5vbi1wYXJhbWV0cmljIGFwcHJvYWNoZXMKCiMjIyMjIyBTZW1pLXBhcmFtZXRyaWM6IEdlbmVyYWxpemVkIEFkZGl0aXZlIE1vZGVscwoKaHR0cDovL2RvY3VtZW50cy5zb2Z0d2FyZS5kZWxsLmNvbS9TdGF0aXN0aWNzL1RleHRib29rL0dlbmVyYWxpemVkLUFkZGl0aXZlLU1vZGVscwoKYGBge3J9CmdlbmVyYWxpemVkQWRkaXRpdmVNb2RlbCA8LSBnYW0oYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHkgPSBnYXVzc2lhbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCgpzdW1tYXJ5KGdlbmVyYWxpemVkQWRkaXRpdmVNb2RlbCkKY29uZmludChnZW5lcmFsaXplZEFkZGl0aXZlTW9kZWwpCmBgYAoKIyMjIyMjIE5vbi1wYXJhbWV0cmljOiBOZWFyZXN0LU5laWdoYm9yIEtlcm5lbCBSZWdyZXNzaW9uCgojIyMgMi4gRXhvZ2VuZWl0eQoKRXhvZ2VuZWl0eSBtZWFucyB0aGF0IHRoZSBhc3NvY2lhdGlvbiBiZXR3ZWVuIHByZWRpY3RvcnMgYW5kIG91dGNvbWUgaXMgZnVsbHkgY2F1c2FsIGFuZCB1bnJlbGF0ZWQgdG8gb3RoZXIgdmFyaWFibGVzLgoKIyMjIyBXYXlzIHRvIFRlc3QKCi0gRHVyYmluLVd1LUhhdXNtYW4gdGVzdCBvZiBlbmRvZ2VuZWl0eQoKIyMjIyMgRHVyYmluLVd1LUhhdXNtYW4gdGVzdCBvZiBlbmRvZ2VuZWl0eQoKVGhlIGluc3RydW1lbnRhbCB2YXJpYWJsZXMgKDJTTFMpIGVzdGltYXRvciBpcyBpbXBsZW1lbnRlZCBpbiB0aGUgYFJgIHBhY2thZ2UgYEFFUmAgYXMgY29tbWFuZDoKCmBgYHtyLCBldmFsID0gRkFMU0V9Cml2cmVnKHkgfiB4MSArIHgyICsgdzEgKyB3MiB8IHoxICsgejIgKyB6MyArIHcxICsgdzIpCmBgYAoKd2hlcmUgYHgxYCBhbmQgYHgyYCBhcmUgZW5kb2dlbm91cyByZWdyZXNzb3JzLCBgdzFgIGFuZCBgdzJgIGV4b2dlbmVvdXMgcmVncmVzc29ycywgYW5kIGB6MWAgdG8gYHozYCBhcmUgZXhjbHVkZWQgaW5zdHJ1bWVudHMuCgpEdXJiaW4tV3UtSGF1c21hbiB0ZXN0OgoKYGBge3J9CmhzbmcyIDwtIHJlYWQuZHRhKCJodHRwOi8vd3d3LnN0YXRhLXByZXNzLmNvbS9kYXRhL3IxMS9oc25nMi5kdGEiKQoKZml2IDwtIGl2cmVnKHJlbnQgfiBoc25ndmFsICsgcGN0dXJiYW4gfCBwY3R1cmJhbiArIGZhbWluYyArIHJlZzIgKyByZWczICsgcmVnNCwgZGF0YSA9IGhzbmcyKSAjSG91c2luZyB2YWx1ZXMgYXJlIGxpa2VseSBlbmRvZ2VuZW91cyBhbmQgdGhlcmVmb3JlIGluc3RydW1lbnRlZCBieSBtZWRpYW4gZmFtaWx5IGluY29tZSAoZmFtaW5jKSBhbmQgMyByZWdpb25hbCBkdW1taWVzIChyZWcyLCByZWc0LCByZWc0KQoKc3VtbWFyeShmaXYsIGRpYWdub3N0aWNzID0gVFJVRSkKYGBgCgpUaGUgRWlja2VyLUh1YmVyLVdoaXRlIGNvdmFyaWFuY2UgZXN0aW1hdG9yIHdoaWNoIGlzIHJvYnVzdCB0byBoZXRlcm9zY2VkYXN0aWMgZXJyb3IgdGVybXMgaXMgcmVwb3J0ZWQgYWZ0ZXIgZXN0aW1hdGlvbiB3aXRoIGB2Y292ID0gc2FuZHdpY2hgIGluIGBjb2VmdGVzdCgpYAoKRmlyc3Qgc3RhZ2UgcmVzdWx0cyBhcmUgcmVwb3J0ZWQgYnkgZXhwbGljaXRseSBlc3RpbWF0aW5nIHRoZW0uCkZvciBleGFtcGxlOgoKYGBge3J9CmZpcnN0IDwtIGxtKGhzbmd2YWwgfiBwY3R1cmJhbiArIGZhbWluYyArIHJlZzIgKyByZWczICsgcmVnNCwgZGF0YSA9IGhzbmcyKQoKc3VtbWFyeShmaXJzdCkKYGBgCgpJbiBjYXNlIG9mIGEgc2luZ2xlIGVuZG9nZW5vdXMgdmFyaWFibGUgKEsgPSAxKSwgdGhlIEYtc3RhdGlzdGljIHRvIGFzc2VzcyB3ZWFrIGluc3RydW1lbnRzIGlzIHJlcG9ydGVkIGFmdGVyIGVzdGltYXRpbmcgdGhlIGZpcnN0IHN0YWdlIHdpdGgsIGZvciBleGFtcGxlOgoKYGBge3J9CndhbGR0ZXN0KGZpcnN0LCAuIH4gLiAtIGZhbWluYyAtIHJlZzIgLSByZWczIC0gcmVnNCkKYGBgCgpvciBpbiBjYXNlIG9mIGhldGVyb3NjZWRhdGlzdGljIGVycm9yczoKCmBgYHtyfQp3YWxkdGVzdChmaXJzdCwgLiB+IC4gLSBmYW1pbmMgLSByZWcyIC0gcmVnMy0gcmVnNCwgdmNvdiA9IHNhbmR3aWNoKQpgYGAKCiMjIyMgV2F5cyB0byBIYW5kbGUKCi0gQ29uZHVjdCBhbiBleHBlcmltZW50L1JDVCB3aXRoIHJhbmRvbSBhc3NpZ25tZW50Ci0gSW5zdHJ1bWVudGFsIHZhcmlhYmxlcwoKIyMjIDMuIEhvbW9zY2VkYXN0aWNpdHkgb2YgcmVzaWR1YWxzCgpIb21vc2NlZGFzdGljaXR5IG9mIHRoZSByZXNpZHVhbHMgbWVhbnMgdGhhdCB0aGUgdmFyaWFuY2Ugb2YgdGhlIHJlc2lkdWFscyBkb2VzIG5vdCBkaWZmZXIgYXMgYSBmdW5jdGlvbiBvZiB0aGUgb3V0Y29tZS9wcmVkaWN0b3JzIChpLmUuLCB0aGUgcmVzaWR1YWxzIHNob3cgY29uc3RhbnQgdmFyaWFuY2UgYXMgYSBmdW5jdGlvbiBvZiBvdXRjb21lL3ByZWRpY3RvcnMpLgoKIyMjIyBXYXlzIHRvIFRlc3QKCi0gUGxvdCByZXNpZHVhbHMgdnMuIG91dGNvbWUgYW5kIHByZWRpY3RvciB2YXJpYWJsZXMgKFtSZXNpZHVhbCBQbG90c10oI3Jlc2lkdWFsUGxvdHMpKQotIFBsb3QgcmVzaWR1YWxzIHZzLiBmaXR0ZWQgdmFsdWVzIChbUmVzaWR1YWwgUGxvdHNdKCNyZXNpZHVhbFBsb3RzKSkKLSBUaW1lIFNlcmllcyBkYXRhOiBQbG90IHJlc2lkdWFscyB2cy4gdGltZQotIFNwcmVhZC1sZXZlbCBwbG90Ci0gQnJldXNjaC1QYWdhbiB0ZXN0OiBgYnB0ZXN0KClgIGZ1bmN0aW9uIGZyb20gYGxtdGVzdGAgcGFja2FnZQotIEdvbGRmZWxkLVF1YW5kdCBUZXN0CgojIyMjIyBSZXNpZHVhbHMgdnMuIG91dGNvbWUgYW5kIHByZWRpY3RvciB2YXJpYWJsZXMKClBsb3QgcmVzaWR1YWxzLCBvciBwZXJoYXBzIHRoZWlyIGFic29sdXRlIHZhbHVlcywgdmVyc3VzIHRoZSBvdXRjb21lIGFuZCBwcmVkaWN0b3IgdmFyaWFibGVzIChbUmVzaWR1YWwgUGxvdHNdKCNyZXNpZHVhbFBsb3RzKSkuCkV4YW1pbmUgd2hldGhlciByZXNpZHVhbCB2YXJpYW5jZSBpcyBjb25zdGFudCBhdCBhbGwgbGV2ZWxzIG9mIG90aGVyIHZhcmlhYmxlcyBvciB3aGV0aGVyIGl0IGluY3JlYXNlcy9kZWNyZWFzZXMgYXMgYSBmdW5jdGlvbiBvZiBhbm90aGVyIHZhcmlhYmxlIChvciBzaG93cyBzb21lIG90aGVycyBzdHJ1Y3R1cmUsIGUuZy4sIHNtYWxsIHZhcmlhbmNlIGF0IGxvdyBhbmQgaGlnaCBsZXZlbHMgb2YgYSBwcmVkaWN0b3IgYW5kIGhpZ2ggdmFyaWFuY2UgaW4gdGhlIG1pZGRsZSkuCk5vdGUgdGhhdCB0aGlzIGlzICpkaWZmZXJlbnQgdGhhbiB3aGV0aGVyIHRoZSByZXNpZHVhbHMgc2hvdyBub24tbGluZWFyaXRpZXMq4oCUaS5lLiwgYSBub24taG9yaXpvbnRhbCBsaW5lLCB3aGljaCB3b3VsZCBpbmRpY2F0ZSBhIFtub25saW5lYXIgYXNzb2NpYXRpb24gYmV0d2VlbiB2YXJpYWJsZXNdKCNsaW5lYXJBc3NvY2lhdGlvbikgKHNlZSBBc3N1bXB0aW9uICMxLCBhYm92ZSkuClJhdGhlciwgaGVyZSB3ZSBhcmUgZXhhbWluaW5nIHdoZXRoZXIgdGhlcmUgaXMgY2hhbmdlIGluIHRoZSB2YXJpYW5jZSBhcyBhIGZ1bmN0aW9uIG9mIGFub3RoZXIgdmFyaWFibGUgKGUuZy4sIGEgZmFuLXNoYXBlZCBbUmVzaWR1YWwgUGxvdF0oI3Jlc2lkdWFsUGxvdHMpKQoKIyMjIyMgU3ByZWFkLWxldmVsIHBsb3QKCkV4YW1pbmluZyB3aGV0aGVyIGxldmVsIChlLmcuLCBtZWFuKSBkZXBlbmRzIG9uIHNwcmVhZCAoZS5nLiwgdmFyaWFuY2Up4oCUcGxvdCBvZiBsb2cgb2YgdGhlIGFic29sdXRlIFN0dWRlbnRpemVkIHJlc2lkdWFscyBhZ2FpbnN0IHRoZSBsb2cgb2YgdGhlIGZpdHRlZCB2YWx1ZXMKCmBgYHtyfQpzcHJlYWRMZXZlbFBsb3QobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpCmBgYAoKIyMjIyMgQnJldXNjaC1QYWdhbiB0ZXN0CgpodHRwOi8vd3d3Lmluc2lkZS1yLm9yZy9wYWNrYWdlcy9jcmFuL2xtdGVzdC9kb2NzL2JwdGVzdAoKYGBge3J9CmJwdGVzdChtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKYGBgCgojIyMjIyBHb2xkZmVsZC1RdWFuZHQgVGVzdAoKYGBge3J9CmdxdGVzdChtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKYGBgCgojIyMjIyBUZXN0IG9mIGRlcGVuZGVuY2Ugb2Ygc3ByZWFkIG9uIGxldmVsCgpgYGB7cn0KbmN2VGVzdChtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKYGBgCgojIyMjIyBUZXN0IG9mIGRlcGVuZGVuY2Ugb2Ygc3ByZWFkIG9uIHByZWRpY3RvcnMKCmBgYHtyfQpuY3ZUZXN0KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSkKYGBgCgojIyMjIFdheXMgdG8gSGFuZGxlCgotIElmIHJlc2lkdWFsIHZhcmlhbmNlIGluY3JlYXNlcyBhcyBhIGZ1bmN0aW9uIG9mIHRoZSBmaXR0ZWQgdmFsdWVzLCBjb25zaWRlciBhIHBvaXNzb24gcmVncmVzc2lvbiBtb2RlbCAoZXNwZWNpYWxseSBmb3IgY291bnQgZGF0YSksIGZvciB3aGljaCB0aGUgdmFyaWFuY2UgZG9lcyBpbmNyZWFzZSB3aXRoIHRoZSBtZWFuCi0gSWYgcmVzaWR1YWwgdmFyaWFuY2UgZGlmZmVycyBhcyBhIGZ1bmN0aW9uIG9mIG1vZGVsIHByZWRpY3RvcnMsIGNvbnNpZGVyIGFkZGluZyBpbnRlcmFjdGlvbnMvcHJvZHVjdCB0ZXJtcyAodGhlIGVmZmVjdCBvZiBvbmUgdmFyaWFibGUgZGVwZW5kcyBvbiB0aGUgbGV2ZWwgb2YgYW5vdGhlciB2YXJpYWJsZSkKLSBUcnkgdHJhbnNmb3JtaW5nIHRoZSBvdXRjb21lIHZhcmlhYmxlIHRvIGJlIG5vcm1hbGx5IGRpc3RyaWJ1dGVkIChsb2ctdHJhbnNmb3JtIGlmIHRoZSBlcnJvcnMgc2VlbSBjb25zaXN0ZW50IGluIHBlcmNlbnRhZ2UgcmF0aGVyIHRoYW4gYWJzb2x1dGUgdGVybXMpCi0gSWYgdGhlIGVycm9yIHZhcmlhbmNlIGlzIHByb3BvcnRpb25hbCB0byBhIHZhcmlhYmxlICR6JCwgdGhlbiBmaXQgdGhlIG1vZGVsIHVzaW5nIFdlaWdodGVkIExlYXN0IFNxdWFyZXMgKFdMUyksIHdpdGggdGhlIHdlaWdodHMgZ2l2ZW4gYmUgJDEveiQKLSBXZWlnaHRlZCBsZWFzdCBzcXVhcmVzIChXTFMpIHVzaW5nIHRoZSAid2VpZ2h0cyIgYXJndW1lbnQgb2YgdGhlIGBsbSgpYCBmdW5jdGlvbjsgdG8gZ2V0IHdlaWdodHMsIHNlZTogaHR0cHM6Ly9zdGF0cy5zdGFja2V4Y2hhbmdlLmNvbS9hLzEwMDQxMC8yMDMzOAotIEh1YmVyLVdoaXRlIHN0YW5kYXJkIGVycm9ycyAoYS5rLmEuICJTYW5kd2ljaCIgZXN0aW1hdGVzKSBmcm9tIGEgaGV0ZXJvc2NlZGFzdGljaXR5LWNvcnJlY3RlZCBjb3ZhcmlhbmNlIG1hdHJpeAogICAgLSBgY29lZnRlc3QoKWAgZnVuY3Rpb24gZnJvbSB0aGUgYHNhbmR3aWNoYCBwYWNrYWdlIGFsb25nIHdpdGggaGNjbSBzYW5kd2ljaCBlc3RpbWF0ZXMgZnJvbSB0aGUgYGNhcmAgcGFja2FnZSAKICAgIC0gYHJvYmNvdigpYCBmdW5jdGlvbiBmcm9tIHRoZSBgcm1zYCBwYWNrYWdlCi0gVGltZSBzZXJpZXMgZGF0YTogQVJDSCAoYXV0by1yZWdyZXNzaXZlIGNvbmRpdGlvbmFsIGhldGVyb3NjZWRhc3RpY2l0eSkgbW9kZWxzCi0gVGltZSBzZXJpZXMgZGF0YTogc2Vhc29uYWwgcGF0dGVybnMgY2FuIGJlIGFkZHJlc3NlZCBieSBhcHBseWluZyBsb2cgdHJhbnNmb3JtYXRpb24gdG8gb3V0Y29tZSB2YXJpYWJsZQoKIyMjIyMgSHViZXItV2hpdGUgc3RhbmRhcmQgZXJyb3JzCgpTdGFuZGFyZCBlcnJvcnMgKFNFcykgb24gdGhlIGRpYWdvbmFsIGluY3JlYXNlCgpgYGB7cn0KdmNvdihtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKaGNjbShtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKCnN1bW1hcnkobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpCmNvZWZ0ZXN0KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCB2Y292ID0gc2FuZHdpY2gpCmNvZWZ0ZXN0KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCB2Y292ID0gaGNjbSkKCnJvYmNvdihvbHMoYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgIHggPSBUUlVFLAogICAgICAgICAgIHkgPSBUUlVFKSkKCnJvYmNvdihvbHModF9leHQgfiBtX2V4dCArIGFnZSwKICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgIHggPSBUUlVFLAogICAgICAgICAgIHkgPSBUUlVFKSwKICAgICAgIGNsdXN0ZXIgPSBteWRhdGEkdGNpZCkgI2FjY291bnQgZm9yIG5lc3RlZCBkYXRhIHdpdGhpbiBzdWJqZWN0CmBgYAoKIyMjIDQuIEVycm9ycyBhcmUgaW5kZXBlbmRlbnQKCkluZGVwZW5kZW50IGVycm9ycyBtZWFucyB0aGF0IHRoZSBlcnJvcnMgYXJlIHVuY29ycmVsYXRlZCB3aXRoIGVhY2ggb3RoZXIuCgojIyMjIFdheXMgdG8gVGVzdAoKLSBQbG90IHJlc2lkdWFscyB2cy4gcHJlZGljdG9ycyAoW1Jlc2lkdWFsIFBsb3RzXSgjcmVzaWR1YWxQbG90cykpCi0gVGltZSBTZXJpZXMgZGF0YTogUmVzaWR1YWwgdGltZSBzZXJpZXMgcGxvdCAocmVzaWR1YWxzIHZzLiByb3cgbnVtYmVyKQotIFRpbWUgU2VyaWVzIGRhdGE6IFRhYmxlIG9yIHBsb3Qgb2YgcmVzaWR1YWwgYXV0b2NvcnJlbGF0aW9ucwotIFRpbWUgU2VyaWVzIGRhdGE6IER1cmJpbi1XYXRzb24gc3RhdGlzdGljIGZvciB0ZXN0IG9mIHNpZ25pZmljYW50IHJlc2lkdWFsIGF1dG9jb3JyZWxhdGlvbiBhdCBsYWcgMQoKIyMjIyBXYXlzIHRvIEhhbmRsZQoKLSBHZW5lcmFsaXplZCBsZWFzdCBzcXVhcmVzIChHTFMpIG1vZGVscyBhcmUgY2FwYWJsZSBvZiBoYW5kbGluZyBjb3JyZWxhdGVkIGVycm9yczogaHR0cHM6Ly9zdGF0LmV0aHouY2gvUi1tYW51YWwvUi1kZXZlbC9saWJyYXJ5L25sbWUvaHRtbC9nbHMuaHRtbAotIFJlZ3Jlc3Npb24gd2l0aCBjbHVzdGVyIHZhcmlhYmxlCiAgICAtIGByb2Jjb3YoKWAgZnJvbSBgcm1zYCBwYWNrYWdlCi0gW0hpZXJhcmNoaWNhbCBsaW5lYXIgbW9kZWxpbmddKGhsbS5odG1sKQogICAgLSBbTGluZWFyIG1peGVkIGVmZmVjdHMgbW9kZWxzXShobG0uaHRtbCNsaW5lYXIpCiAgICAtIFtHZW5lcmFsaXplZCBsaW5lYXIgbWl4ZWQgZWZmZWN0cyBtb2RlbHNdKGhsbS5odG1sI2dlbmVyYWxpemVkKQogICAgLSBbTm9ubGluZWFyIG1peGVkIGVmZmVjdHMgbW9kZWxzXShobG0uaHRtbCNub25saW5lYXIpCgojIyMgNS4gTm8gbXVsdGljb2xsaW5lYXJpdHkKCk11bHRpY29sbGluZWFyaXR5IG9jY3VycyB3aGVuIHRoZSBwcmVkaWN0b3JzIGFyZSBjb3JyZWxhdGVkIHdpdGggZWFjaCBvdGhlci4KCiMjIyMgV2F5cyB0byBUZXN0CgotIFZhcmlhbmNlIEluZmxhdGlvbiBGYWN0b3IgKFZJRikKLSBHZW5lcmFsaXplZCBWYXJpYW5jZSBJbmZsYXRpb24gRmFjdG9yIChHVklGKeKAlHdoZW4gbW9kZWxzIGhhdmUgcmVsYXRlZCByZWdyZXNzb3JzIChtdWx0aXBsZSBwb2x5bm9taWFsIHRlcm1zIG9yIGNvbnRyYXN0cyBmcm9tIHNhbWUgcHJlZGljdG9yKQotIENvcnJlbGF0aW9uCi0gVG9sZXJhbmNlCi0gQ29uZGl0aW9uIEluZGV4CgojIyMjIyBWYXJpYW5jZSBJbmZsYXRpb24gRmFjdG9yIChWSUYpCgokJApcdGV4dHtWSUZ9ID0gMS9cdGV4dHtUb2xlcmFuY2V9CiQkCgoKSWYgdGhlIHZhcmlhbmNlIGluZmxhdGlvbiBmYWN0b3Igb2YgYSBwcmVkaWN0b3IgdmFyaWFibGUgd2VyZSA1LjI3ICgkXHNxcnR7NS4yN30gPSAyLjMkKSwgdGhpcyBtZWFucyB0aGF0IHRoZSBzdGFuZGFyZCBlcnJvciBmb3IgdGhlIGNvZWZmaWNpZW50IG9mIHRoYXQgcHJlZGljdG9yIHZhcmlhYmxlIGlzIDIuMyB0aW1lcyBhcyBsYXJnZSAoaS5lLiwgY29uZmlkZW5jZSBpbnRlcnZhbCBpcyAyLjMgdGltZXMgd2lkZXIpIGFzIGl0IHdvdWxkIGJlIGlmIHRoYXQgcHJlZGljdG9yIHZhcmlhYmxlIHdlcmUgdW5jb3JyZWxhdGVkIHdpdGggdGhlIG90aGVyIHByZWRpY3RvciB2YXJpYWJsZXMuCgpWSUYgPSAxOiBOb3QgY29ycmVsYXRlZFwKMSA8IFZJRiA8IDU6IE1vZGVyYXRlbHkgY29ycmVsYXRlZFwKVklGID4gNSB0byAxMDogSGlnaGx5IGNvcnJlbGF0ZWQgKG11bHRpY29sbGluZWFyaXR5IHByZXNlbnQpCgpgYGB7cn0KdmlmKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpgYGAKCiMjIyMjIEdlbmVyYWxpemVkIFZhcmlhbmNlIEluZmxhdGlvbiBGYWN0b3IgKEdWSUYpCgpVc2VmdWwgd2hlbiBtb2RlbHMgaGF2ZSByZWxhdGVkIHJlZ3Jlc3NvcnMgKG11bHRpcGxlIHBvbHlub21pYWwgdGVybXMgb3IgY29udHJhc3RzIGZyb20gc2FtZSBwcmVkaWN0b3IpCgojIyMjIyBDb3JyZWxhdGlvbgoKY29ycmVsYXRpb24gYW1vbmcgYWxsIGluZGVwZW5kZW50IHZhcmlhYmxlcyB0aGUgY29ycmVsYXRpb24gY29lZmZpY2llbnRzIHNob3VsZCBiZSBzbWFsbGVyIHRoYW4gLjA4CgpgYGB7cn0KY29yKG15ZGF0YVssYygiYnBpX2FudGlzb2NpYWxUMVN1bSIsImJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtIildLCB1c2UgPSAicGFpcndpc2UuY29tcGxldGUub2JzIikKYGBgCgojIyMjIyBUb2xlcmFuY2UKClRoZSB0b2xlcmFuY2UgaXMgYW4gaW5kZXggb2YgdGhlIGluZmx1ZW5jZSBvZiBvbmUgaW5kZXBlbmRlbnQgdmFyaWFibGUgb24gYWxsIG90aGVyIGluZGVwZW5kZW50IHZhcmlhYmxlcy4KV2l0aCBUIDwgMC4yLCB0aGVyZSBtaWdodCBiZSBtdWx0aWNvbGxpbmVhcml0eSBpbiB0aGUgZGF0YSBhbmQgd2l0aCBUIDwgMC4wMSwgdGhlcmUgY2VydGFpbmx5IGlzIG11bHRpY29sbGluZWFyaXR5LgoKJCQKXHRleHR7dG9sZXJhbmNlfSA9IDEvXHRleHR7VklGfQokJAoKClQgPCAwLjI6IHRoZXJlIG1pZ2h0IGJlIG11bHRpY29sbGluZWFyaXR5IGluIHRoZSBkYXRhXApUIDwgMC4wMTogdGhlcmUgY2VydGFpbmx5IGlzIG11bHRpY29sbGluYXJpdHkgaW4gdGhlIGRhdGEKCiMjIyMjIENvbmRpdGlvbiBJbmRleAoKVGhlIGNvbmRpdGlvbiBpbmRleCBpcyBjYWxjdWxhdGVkIHVzaW5nIGEgZmFjdG9yIGFuYWx5c2lzIG9uIHRoZSBpbmRlcGVuZGVudCB2YXJpYWJsZXMuClZhbHVlcyBvZiAxMC0zMCBpbmRpY2F0ZSBhIG1lZGlvY3JlIG11bHRpY29sbGluZWFyaXR5IGluIHRoZSByZWdyZXNzaW9uIHZhcmlhYmxlcy4KVmFsdWVzID4gMzAgaW5kaWNhdGUgc3Ryb25nIG11bHRpY29sbGluZWFyaXR5LgoKRm9yIGhvdyB0byBpbnRlcnByZXQsIHNlZSBoZXJlOiBodHRwczovL3N0YXRzLnN0YWNrZXhjaGFuZ2UuY29tL2EvODc2MTAvMjAzMzgKCmBgYHtyfQpvbHNfZWlnZW5fY2luZGV4KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpgYGAKCiMjIyMgV2F5cyB0byBIYW5kbGUKCi0gUmVtb3ZlIGhpZ2hseSBjb3JyZWxhdGVkIChpLmUuLCByZWR1bmRhbnQpIHByZWRpY3RvcnMKLSBBdmVyYWdlIHRoZSBjb3JyZWxhdGVkIHByZWRpY3RvcnMKLSBbUHJpbmNpcGFsIENvbXBvbmVudCBBbmFseXNpc10ocGNhLmh0bWwpIGZvciBkYXRhIHJlZHVjdGlvbgotIFN0YW5kYXJkaXplIHByZWRpY3RvcnMKLSBDZW50ZXIgdGhlIGRhdGEgKGRlZHVjdCB0aGUgbWVhbikKLSBTaW5ndWxhci12YWx1ZSBkZWNvbXBvc2l0aW9uIG9mIHRoZSBtb2RlbCBtYXRyaXggb3IgdGhlIG1lYW4tY2VudGVyZWQgbW9kZWwgbWF0cml4Ci0gQ29uZHVjdCBhIFtmYWN0b3IgYW5hbHlzaXNdKCNmYWN0b3JBbmFseXNpcy5odG1sKSBhbmQgcm90YXRlIHRoZSBmYWN0b3JzIHRvIGVuc3VyZSBpbmRlcGVuZGVuY2Ugb2YgdGhlIGZhY3RvcnMKCiMjIyA2LiBFcnJvcnMgYXJlIG5vcm1hbGx5IGRpc3RyaWJ1dGVkCgojIyMjIFdheXMgdG8gVGVzdAoKLSBQcm9iYWJpbGl0eSBQbG90cwogICAgLSBbTm9ybWFsIFF1YW50aWxlIChRUSkgUGxvdHNdKCNxcVBsb3QpIChiYXNlZCBvbiBub24tY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb2YgcmVzaWR1YWxzKQogICAgLSBbTm9ybWFsIFByb2JhYmlsaXR5IChQUCkgUGxvdHNdKCNwcFBsb3QpIChiYXNlZCBvbiBjdW11bGF0aXZlIGRpc3RyaWJ1dGlvbiBvZiByZXNpZHVhbHMpCi0gW0RlbnNpdHkgUGxvdCBvZiBSZXNpZHVhbHNdKCNkZW5zaXR5UGxvdFJlc2lkdWFscykKLSBTdGF0aXN0aWNhbCBUZXN0cwogICAgLSBLb2xtb2dvcm92LVNtaXJub3YgdGVzdAogICAgLSBTaGFwaXJvLVdpbGsgdGVzdAogICAgLSBKYXJxdWUtQmVyYSB0ZXN0CiAgICAtIEFuZGVyc29uLURhcmxpbmcgdGVzdCAoYmVzdCB0ZXN0KQotIEV4YW1pbmUgaW5mbHVlbmNlIG9mIG91dGxpZXJzCgojIyMjIFdheXMgdG8gSGFuZGxlCgotIEFwcGx5IGEgdHJhbnNmb3JtYXRpb24gdG8gdGhlIHByZWRpY3RvciBvciBvdXRjb21lIHZhcmlhYmxlCi0gRXhjbHVkZSBvdXRsaWVycwotIFJvYnVzdCByZWdyZXNzaW9uCiAgICAtIEJlc3Qgd2hlbiBubyBvdXRsaWVyczogTU0tdHlwZSByZWdyZXNzaW9uIGVzdGltYXRvcgogICAgICAgIC0gYGxtcm9iKClgL2BnbG1yb2IoKWAgZnVuY3Rpb24gb2YgYHJvYnVzdGJhc2VgIHBhY2thZ2UKICAgICAgICAtIEl0ZXJhdGl2ZWx5IHJld2VpZ2h0ZWQgbGVhc3Qgc3F1YXJlcyAoSVJMUyk6IGBybG0oLCBtZXRob2QgPSAiTU0iKWAgZnVuY3Rpb24gb2YgYE1BU1NgIHBhY2thZ2U6IGh0dHA6Ly93d3cuYXRzLnVjbGEuZWR1L3N0YXQvci9kYWUvcnJlZy5odG0KICAgIC0gTW9zdCByZXNpc3RhbnQgdG8gb3V0bGllcnM6IExlYXN0IHRyaW1tZWQgc3F1YXJlcyAoTFRTKeKAlGJ1dCBub3QgZ29vZCBhcyBhIHN0YW5kYWxvbmUgZXN0aW1hdG9yLCBiZXR0ZXIgZm9yIGlkZW50aWZ5aW5nIG91dGxpZXJzCiAgICAgICAgLSBgbHRzUmVnKClgIGZ1bmN0aW9uIG9mIGByb2J1c3RiYXNlYCBwYWNrYWdlIChiZXN0KQogICAgLSBCZXN0IHdoZW4gc2luZ2xlIHByZWRpY3RvcjogVGhlaWwtU2VuIGVzdGltYXRvcgogICAgICAgIC0gYG1ibG0oLCByZXBlYXRlZCA9IEZBTFNFKWAgZnVuY3Rpb24gb2YgYG1ibG1gIHBhY2thZ2UKICAgIC0gUm9idXN0IGNvcnJlbGF0aW9uCiAgICAgICAgLSBTcGVhcm1hbidzIHJobzogYGNvcigsIG1ldGhvZCA9ICJzcGVhcm1hbiIpYAogICAgICAgIC0gUGVyY2VudGFnZSBiZW5kIGNvcnJlbGF0aW9uCiAgICAgICAgLSBNaW5pbXVtIHZvbGx1bWUgZWxsaXBzb2lkCiAgICAgICAgLSBNaW5pbXVtIGNvdmFyaWFuY2UgZGV0ZXJtaW5hbnQ6CiAgICAgICAgLSBXaW5zb3JpemVkIGNvcnJlbGF0aW9uCiAgICAgICAgLSBCaXdlaWdodCBtaWRjb3JyZWxhdGlvbgogICAgLSBOb3QgZ3JlYXQgb3B0aW9uczoKICAgICAgICAtIFF1YW50aWxlIChMMSkgcmVncmVzc2lvbjogYHJxKClgIGZ1bmN0aW9uIG9mIGBxdWFudHJlZ2AgcGFja2FnZQoKIyMjIyMgVHJhbnNmb3JtYXRpb25zIG9mIE91dGNvbWUgVmFyaWFibGUKCiMjIyMjIyBCb3gtQ294IFRyYW5zZm9ybWF0aW9uCgpVc2VmdWwgaWYgdGhlIG91dGNvbWUgaXMgc3RyaWN0bHkgcG9zaXRpdmUgKG9yIGFkZCBhIGNvbnN0YW50IHRvIG91dGNvbWUgdG8gbWFrZSBpdCBzdHJpY3RseSBwb3NpdGl2ZSkKCmxhbWJkYSA9IC0xOiBpbnZlcnNlIHRyYW5zZm9ybWF0aW9uCmxhbWJkYSA9IC0wLjU6IDEvc3FydChZKQpsYW1iZGEgPSAwOiBsb2cgdHJhbnNmb3JtYXRpb24KbGFtYmRhID0gMC41OiBzcXVhcmUgcm9vdApsYW1iZGEgPSAwLjMzMzogY3ViZSByb290CmxhbWJkYSA9IDE6IG5vIHRyYW5zZm9ybWF0aW9uCmxhbWJkYSA9IDI6IHNxdWFyZWQKCiMjIyMjIyMgQWRkIGNvbnN0YW50IHRvIG91dGNvbWUgdG8gbWFrZSBpdCBzdHJpY3RseSBwb3NpdGl2ZQoKYGBge3J9CnN0cmljdGx5UG9zaXRpdmVEViA8LSBsbShicGlfYW50aXNvY2lhbFQyU3VtICsgMSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlKQpgYGAKCiMjIyMjIyMgSWRlbnRpZnkgYmVzdCBwb3dlciB0cmFuc2Zvcm1hdGlvbiAobGFtYmRhKQoKQ29uc2lkZXIgcm91bmRpbmcgdGhlIHBvd2VyIHRvIGEgY29tbW9uIHZhbHVlIChzcXVhcmUgcm9vdCA9IC41OyBjdWJlIHJvb3QgPSAuMzMzOyBzcXVhcmVkID0gMikKCmBgYHtyfQpib3hDb3goc3RyaWN0bHlQb3NpdGl2ZURWKQpwb3dlclRyYW5zZm9ybShzdHJpY3RseVBvc2l0aXZlRFYpIApzdW1tYXJ5KHRyYW5zZm9ybWVkRFYgPC0gcG93ZXJUcmFuc2Zvcm0oc3RyaWN0bHlQb3NpdGl2ZURWKSkKCm15ZGF0YSRicGlfYW50aXNvY2lhbFQyU3VtVHJhbnNmb3JtZWQgPC0gYmNQb3dlcihteWRhdGEkYnBpX2FudGlzb2NpYWxUMlN1bSArIDEsIGNvZWYodHJhbnNmb3JtZWREVikpCmBgYAoKIyMjIyMjIyBDb21wYXJlIHJlc2lkdWFscyBmcm9tIG1vZGVsIHdpdGggYW5kIHdpdGhvdXQgdHJhbnNmb3JtYXRpb24KCiMjIyMjIyMjIE1vZGVsIHdpdGhvdXQgdHJhbnNmb3JtYXRpb24KCmBgYHtyfQpzdW1tYXJ5KG1vZGVsV2l0aG91dFRyYW5zZm9ybWF0aW9uIDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gKyAxIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpKQpwbG90KGRlbnNpdHkobmEub21pdChzdHVkcmVzKG1vZGVsV2l0aG91dFRyYW5zZm9ybWF0aW9uKSkpKQoKCmBgYAoKIyMjIyMjIyMgTW9kZWwgd2l0aCB0cmFuc2Zvcm1hdGlvbgoKYGBge3J9CnN1bW1hcnkobW9kZWxXaXRoVHJhbnNmb3JtYXRpb24gPC0gbG0oYnBpX2FudGlzb2NpYWxUMlN1bVRyYW5zZm9ybWVkIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkpCgpwbG90KGRlbnNpdHkobmEub21pdChzdHVkcmVzKG1vZGVsV2l0aFRyYW5zZm9ybWF0aW9uKSkpKQpgYGAKCiMjIyMjIyMgQ29uc3RydWN0ZWQgVmFyaWFibGUgVGVzdCAmIFBsb3QKCmBgYHtyfQptdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbF9jb25zdHJ1Y3RlZFZhcmlhYmxlIDwtIHVwZGF0ZShtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCwgLiB+IC4gKyBib3hDb3hWYXJpYWJsZShicGlfYW50aXNvY2lhbFQxU3VtICsgMSkpCnN1bW1hcnkobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfY29uc3RydWN0ZWRWYXJpYWJsZSkkY29lZlsiYm94Q294VmFyaWFibGUoYnBpX2FudGlzb2NpYWxUMVN1bSArIDEpIiwgLCBkcm9wID0gRkFMU0VdICNzaWduaWZpY2FudCBwLXZhbHVlIGluZGljYXRlcyBzdHJvbmcgbmVlZCB0byB0cmFuc2Zvcm0gdmFyaWFibGUKYXZQbG90cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbF9jb25zdHJ1Y3RlZFZhcmlhYmxlLCAiYm94Q294VmFyaWFibGUoYnBpX2FudGlzb2NpYWxUMVN1bSArIDEpIikgI3N1Z2dlc3RzIG5lZWQgZm9yIHRyYW5zZm9ybWF0aW9uIGlzIHNwcmVhZCB0aHJvdWdoIGRhdGEsIGFuZCBub3QganVzdCBkZXBlbmRlbnQgb24gYSBzbWFsbCBmcmFjdGlvbiBvZiBvYnNlcnZhdGlvbnMKYGBgCgojIyMjIyMjIEludmVyc2UgUmVzcG9uc2UgUGxvdAoKYGBge3J9CmludmVyc2VSZXNwb25zZVBsb3Qoc3RyaWN0bHlQb3NpdGl2ZURWLCBsYW1iZGEgPSBjKC0xLC0wLjUsMCwxLzMsLjUsMSwyKSkgI2JsYWNrIGxpbmUgaXMgYmVzdCBmaXR0aW5nIHBvd2VyIHRyYW5zZm9ybWF0aW9uCmBgYAoKIyMjIyMjIFllby1Kb2huc29uIFRyYW5zZm9ybWF0aW9ucwoKVXNlZnVsIGlmIHRoZSBvdXRjb21lIGlzIG5vdCBzdHJpY3RseSBwb3NpdGl2ZS4KCmBgYHtyLCBldmFsID0gRkFMU0V9CnlqUG93ZXIoRFYsIGxhbWJkYSkKYGBgCgojIyMjIyBUcmFuc2Zvcm1hdGlvbnMgb2YgUHJlZGljdG9yIFZhcmlhYmxlCgojIyMjIyMgQ29tcG9uZW50LVBsdXMtUmVzaWR1YWwgUGxvdHMgKFBhcnRpYWwgUmVzaWR1YWwgUGxvdHMpCgpgYGB7cn0KY3JQbG90cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbE5vTWlzc2luZywgb3JkZXIgPSAxKSAjbGluZWFyCmNyUGxvdHMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxOb01pc3NpbmcsIG9yZGVyID0gMikgI3F1YWRyYXRpYwoKbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfcXVhZHJhdGljIDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgSShicGlfYW50aXNvY2lhbFQxU3VtXjIpICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkKCnN1bW1hcnkobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfcXVhZHJhdGljKQphbm92YShtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbF9xdWFkcmF0aWMsIG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpjclBsb3RzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsX3F1YWRyYXRpYywgb3JkZXIgPSAxKQpgYGAKCiMjIyMjIyBDRVJFUyBQbG90IChDb21iaW5pbmcgY29uZGl0aW9uYWwgRXhwZWN0YXRpb25zIGFuZCBSRVNpZHVhbHMpCgpVc2VmdWwgd2hlbiBub25saW5lYXIgYXNzb2NpYXRpb25zIGFtb25nIHRoZSBwcmVkaWN0b3JzIGFyZSB2ZXJ5IHN0cm9uZyAoY29tcG9uZW50LXBsdXMtcmVzaWR1YWwgcGxvdHMgbWF5IGFwcGVhciBub25saW5lYXIgZXZlbiB0aG91Z2ggdGhlIHRydWUgcGFydGlhbCByZWdyZXNzaW9uIGlzIGxpbmVhciwgYSBwaGVub25vbWVuIGNhbGxlZCBsZWFrYWdlKQoKYGBge3J9CmNlcmVzUGxvdHMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpCmNlcmVzUGxvdHMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfcXVhZHJhdGljKQpgYGAKCiMjIyMjIyBCb3gtVGlkd2VsbCBNZXRob2QgZm9yIENob29zaW5nIFByZWRpY3RvciBUcmFuc2Zvcm1hdGlvbnMKCnByZWRpY3RvcnMgbXVzdCBiZSBzdHJpY3RseSBwb3NpdGl2ZSAob3IgYWRkIGEgY29uc3RhbnQgdG8gbWFrZSBpdCBzdHJpY3RseSBwb3NpdGl2ZSkKCmBgYHtyfQpib3hUaWR3ZWxsKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBJKGJwaV9hbnRpc29jaWFsVDFTdW0gKyAxKSArIEkoYnBpX2FueGlvdXNEZXByZXNzZWRTdW0gKyAxKSwKICAgICAgICAgICBvdGhlci54ID0gTlVMTCwgI2xpc3QgdmFyaWFibGVzIG5vdCB0byBiZSB0cmFuc2Zvcm1lZCBpbiBvdGhlci54CiAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlKQpgYGAKCiMjIyMjIyBDb25zdHJ1Y3RlZC1WYXJpYWJsZXMgUGxvdAoKYGBge3J9Cm11bHRpcGxlUmVncmVzc2lvbk1vZGVsX2N2IDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBJKGJwaV9hbnRpc29jaWFsVDFTdW0gKyAxKSArIEkoYnBpX2FueGlvdXNEZXByZXNzZWRTdW0gKyAxKSArIEkoYnBpX2FudGlzb2NpYWxUMVN1bSAqIGxvZyhicGlfYW50aXNvY2lhbFQxU3VtKSkgKyBJKGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtICogbG9nKGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCgpzdW1tYXJ5KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsX2N2KSRjb2VmWyJJKGJwaV9hbnRpc29jaWFsVDFTdW0gKiBsb2coYnBpX2FudGlzb2NpYWxUMVN1bSkpIiwgLCBkcm9wID0gRkFMU0VdCnN1bW1hcnkobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfY3YpJGNvZWZbIkkoYnBpX2FueGlvdXNEZXByZXNzZWRTdW0gKiBsb2coYnBpX2FueGlvdXNEZXByZXNzZWRTdW0pKSIsICwgZHJvcCA9IEZBTFNFXQoKYXZQbG90cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbF9jdiwgIkkoYnBpX2FudGlzb2NpYWxUMVN1bSAqIGxvZyhicGlfYW50aXNvY2lhbFQxU3VtKSkiKQphdlBsb3RzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsX2N2LCAiSShicGlfYW54aW91c0RlcHJlc3NlZFN1bSAqIGxvZyhicGlfYW54aW91c0RlcHJlc3NlZFN1bSkpIikKYGBgCgojIyMjIyBSb2J1c3QgbW9kZWxzCgpSZXNvdXJjZXMKCi0gRm9yIGNvbXBhcmlzb24gb2YgbWV0aG9kcywgc2VlIEJvb2s6ICJNb2Rlcm4gTWV0aG9kcyBmb3IgUm9idXN0IFJlZ3Jlc3Npb24iCi0gaHR0cDovL3d3dy5hdHMudWNsYS5lZHUvc3RhdC9yL2RhZS9ycmVnLmh0bQotIGh0dHA6Ly9zdGF0cy5zdGFja2V4Y2hhbmdlLmNvbS9hLzQ2MjM0LzIwMzM4Ci0gaHR0cDovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvdmlld3MvUm9idXN0Lmh0bWwKCgojIyMjIyMgUm9idXN0IGNvcnJlbGF0aW9uCgojIyMjIyMjIFNwZWFybWFuJ3MgcmhvCgpTcGVhcm1hbidzIHJobyBpcyBhIG5vbi1wYXJhbWV0cmljIGNvcnJlbGF0aW9uLgoKYGBge3J9CmNvci50ZXN0KG15ZGF0YSRicGlfYW50aXNvY2lhbFQxU3VtLCBteWRhdGEkYnBpX2FudGlzb2NpYWxUMlN1bSkgI1BlYXJzb24gciwgY29ycmVsYXRpb24gdGhhdCBpcyBzZW5zaXRpdmUgdG8gb3V0bGllcnMKY29yLnRlc3QobXlkYXRhJGJwaV9hbnRpc29jaWFsVDFTdW0sIG15ZGF0YSRicGlfYW50aXNvY2lhbFQyU3VtLCBtZXRob2QgPSAic3BlYXJtYW4iKSAjU3BlYXJtYW4ncyByaG8sIGEgcmFuayBjb3JyZWxhdGlvbiB0aGF0IGlzIGxlc3Mgc2Vuc2l0aXZlIHRvIG91dGxpZXJzCmBgYAoKIyMjIyMjIyBNaW5pbXVtIHZvbGx1bWUgZWxsaXBzb2lkCgpgYGB7cn0KY292Lm12ZShuYS5vbWl0KG15ZGF0YVssYygiYnBpX2FudGlzb2NpYWxUMVN1bSIsImJwaV9hbnRpc29jaWFsVDJTdW0iKV0pLCBjb3IgPSBUUlVFKQpgYGAKCiMjIyMjIyMgTWluaW11bSBjb3ZhcmlhbmNlIGRldGVybWluYW50CgpgYGB7cn0KY292Lm1jZChuYS5vbWl0KG15ZGF0YVssYygiYnBpX2FudGlzb2NpYWxUMVN1bSIsImJwaV9hbnRpc29jaWFsVDJTdW0iKV0pLCBjb3IgPSBUUlVFKQpgYGAKCiMjIyMjIyMgV2luc29yaXplZCBjb3JyZWxhdGlvbgoKYGBge3J9CmNvcnJlbGF0aW9uKG15ZGF0YVssYygiYnBpX2FudGlzb2NpYWxUMVN1bSIsImJwaV9hbnRpc29jaWFsVDJTdW0iKV0sIHdpbnNvcml6ZSA9IDAuMiwgcF9hZGp1c3QgPSAibm9uZSIpCmBgYAoKIyMjIyMjIyBQZXJjZW50YWdlIGJlbmQgY29ycmVsYXRpb24KCmBgYHtyfQpjb3JyZWxhdGlvbihteWRhdGFbLGMoImJwaV9hbnRpc29jaWFsVDFTdW0iLCJicGlfYW50aXNvY2lhbFQyU3VtIildLCBtZXRob2QgPSAicGVyY2VudGFnZSIsIHBfYWRqdXN0ID0gIm5vbmUiKQpgYGAKCiMjIyMjIyMgQml3ZWlnaHQgbWlkY29ycmVsYXRpb24KCmBgYHtyfQpjb3JyZWxhdGlvbihteWRhdGFbLGMoImJwaV9hbnRpc29jaWFsVDFTdW0iLCJicGlfYW50aXNvY2lhbFQyU3VtIildLCBtZXRob2QgPSAiYml3ZWlnaHQiLCBwX2FkanVzdCA9ICJub25lIikKYGBgCgojIyMjIyMgUm9idXN0IHJlZ3Jlc3Npb24gd2l0aCBhIHNpbmdsZSBwcmVkaWN0b3IKCiMjIyMjIyMgVGhlaWwtU2VuIGVzdGltYXRvcgoKYGBge3J9Cm15ZGF0YV9zdWJzZXQgPC0gbmEub21pdChteWRhdGFbLGMoImJwaV9hbnRpc29jaWFsVDFTdW0iLCJicGlfYW50aXNvY2lhbFQyU3VtIildKVsxOjQwMCxdCm1ibG0oYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0sIGRhdGFmcmFtZSA9IG15ZGF0YV9zdWJzZXQsIHJlcGVhdGVkID0gRkFMU0UpICNUaGVpbC1TZW4gc2luZ2xlIG1lZGlhbiBlc3RpbWF0b3IsIHJvYnVzdCB0byBvdXRsaWVyczsgaGF2ZSB0byByZW1vdmUgbWlzc2luZyB2YWx1ZXMgZmlyc3QKYGBgCgojIyMjIyMgUm9idXN0IG11bHRpcGxlIHJlZ3Jlc3Npb24KCkJlc3Qgd2hlbiBubyBvdXRsaWVyczogTU0tdHlwZSByZWdyZXNzaW9uIGVzdGltYXRvcgoKYGBge3J9CgpgYGAKCiMjIyMjIyMgUm9idXN0IGxpbmVhciByZWdyZXNzaW9uCgpCZXN0OgoKYGBge3J9Cmxtcm9iKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgIGRhdGEgPSBteWRhdGEsCiAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCmBgYAoKSXRlcmF0aXZlbHkgcmV3ZWlnaHRlZCBsZWFzdCBzcXVhcmVzIChJUkxTKTogaHR0cDovL3d3dy5hdHMudWNsYS5lZHUvc3RhdC9yL2RhZS9ycmVnLmh0bQoKYGBge3J9CnJsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgZGF0YSA9IG15ZGF0YSwKICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCmBgYAoKIyMjIyMjIyBSb2J1c3QgZ2VuZXJhbGl6ZWQgcmVncmVzc2lvbgoKYGBge3IsIHdhcm5pbmcgPSBGQUxTRX0KZ2xtcm9iKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICBkYXRhID0gbXlkYXRhLAogICAgZmFtaWx5ID0gInBvaXNzb24iLAogICAgbmEuYWN0aW9uID0gIm5hLmV4Y2x1ZGUiKQpgYGAKCk1vc3QgcmVzaXN0YW50IHRvIG91dGxpZXJzOiBMZWFzdCB0cmltbWVkIHNxdWFyZXMgKExUUynigJRidXQgbm90IGdvb2QgYXMgYSBzdGFuZGFsb25lIGVzdGltYXRvciwgYmV0dGVyIGZvciBpZGVudGlmeWluZyBvdXRsaWVycwoKYGBge3J9Cmx0c1JlZyhicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUpCmBgYAoKIyMjIyMjIyMgTm90IGdyZWF0IG9wdGlvbnM6CgpRdWFudGlsZSAoTDEpIHJlZ3Jlc3Npb246IGBycSgpYCBmdW5jdGlvbiBvZiBxdWFudHJlZyBwYWNrYWdlCgpgYGB7cn0KcnEoYnBpX2FudGlzb2NpYWxUMlN1bSB+IGJwaV9hbnRpc29jaWFsVDFTdW0gKyBicGlfYW54aW91c0RlcHJlc3NlZFN1bSwKICAgZGF0YSA9IG15ZGF0YSwKICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSkKYGBgCgojIyBFeGFtaW5pbmcgTW9kZWwgQXNzdW1wdGlvbnMKCiMjIyBEaXN0cmlidXRpb24gb2YgUmVzaWR1YWxzCgojIyMjIFFRIHBsb3RzIHsjcXFQbG90fQoKaHR0cDovL3d3dy51Y2QuaWUvZWNvbW9kZWwvUmVzb3VyY2VzL1FRcGxvdHNfV2ViVmVyc2lvbi5odG1sCgpgYGB7cn0KcXFQbG90KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCBtYWluPSJRUSBQbG90IiwgaWQubiA9IDIpCnFxUGxvdChtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCwgbWFpbj0iUVEgUGxvdCIsIGlkLm4gPSAibm90ZXdvcnRoeSIpCgpxcW5vcm0ocmVzaWQobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpKQpxcW5vcm0ocmVzaWQocm1zTXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpKQpxcW5vcm0ocmVzaWQocm9idXN0TGluZWFyUmVncmVzc2lvbikpCnFxbm9ybShyZXNpZChsdHNSZWdyZXNzaW9uKSkKCnFxbm9ybShyZXNpZChnZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbCkpCnFxbm9ybShyZXNpZChybXNHZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbCkpCnFxbm9ybShyZXNpZChyb2J1c3RHZW5lcmFsaXplZFJlZ3Jlc3Npb24pKQoKcXFub3JtKHJlc2lkKG11bHRpbGV2ZWxSZWdyZXNzaW9uTW9kZWwpKQpgYGAKCiMjIyMgUFAgcGxvdHMgeyNwcFBsb3R9CgpgYGB7cn0KcHBQbG90KG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKQpwcFBsb3Qocm1zTXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpCnBwUGxvdChyb2J1c3RMaW5lYXJSZWdyZXNzaW9uKQpwcFBsb3QobHRzUmVncmVzc2lvbikKCnBwUGxvdChnZW5lcmFsaXplZFJlZ3Jlc3Npb25Nb2RlbCkKcHBQbG90KHJtc0dlbmVyYWxpemVkUmVncmVzc2lvbk1vZGVsKQpwcFBsb3Qocm9idXN0R2VuZXJhbGl6ZWRSZWdyZXNzaW9uKQpgYGAKCiMjIyMgRGVuc2l0eSBQbG90IG9mIFJlc2lkdWFscyB7I2RlbnNpdHlQbG90UmVzaWR1YWxzfQoKYGBge3J9CnN0dWRlbnRpemVkUmVzaWR1YWxzIDwtIG5hLm9taXQocnN0dWRlbnQobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpKQpwbG90KGRlbnNpdHkoc3R1ZGVudGl6ZWRSZXNpZHVhbHMpLCBjb2w9InJlZCIpCnhmaXQgPC0gc2VxKG1pbihzdHVkZW50aXplZFJlc2lkdWFscywgbmEucm09VFJVRSksIG1heChzdHVkZW50aXplZFJlc2lkdWFscywgbmEucm09VFJVRSksIGxlbmd0aD00MCkKbGluZXMoeGZpdCwgZG5vcm0oeGZpdCksIGNvbD0iZ3JheSIpICNjb21wYXJlIHRvIG5vcm1hbCBkaXN0cmlidXRpb24KYGBgCgojIyMgUmVzaWR1YWwgUGxvdHMgeyNyZXNpZHVhbFBsb3RzfQoKUmVzaWR1YWwgcGxvdHMgYXJlIHBsb3RzIG9mIHRoZSByZXNpZHVhbHMgdmVyc3VzIG9ic2VydmVkL2ZpdHRlZCB2YWx1ZXMuCgpJbmNsdWRlcyBwbG90cyBvZiBhKSBtb2RlbCByZXNpZHVhbHMgdmVyc3VzIG9ic2VydmVkIHZhbHVlcyBvbiBwcmVkaWN0b3JzIGFuZCBiKSBtb2RlbCByZXNpZHVhbHMgdmVyc3VzIG1vZGVsIGZpdHRlZCB2YWx1ZXMuCgpOb3RlOiBoYXZlIHRvIHJlbW92ZSBgbmEuYWN0aW9uID0gbmEuZXhjbHVkZWAKClRlc3RzIGluY2x1ZGU6CgotIGxhY2stb2YtZml0IHRlc3QgZm9yIGV2ZXJ5IG51bWVyaWMgcHJlZGljdG9yLCB0LXRlc3QgZm9yIHRoZSByZWdyZXNzb3IsIGFkZGVkIHRvIHRoZSBtb2RlbCwgaW5kaWNhdGluZyBubyBsYWNrLW9mLWZpdCBmb3IgdGhpcyB0eXBlCi0gVHVrZXkncyB0ZXN0IGZvciBub25hZGRpdGl2aXR5OiBhZGRpbmcgdGhlIHNxdWFyZXMgb2YgdGhlIGZpdHRlZCB2YWx1ZXMgdG8gdGhlIG1vZGVsIGFuZCByZWZpdHRpbmcgKGV2YWx1YXRlcyBhZGVxdWFjeSBvZiBtb2RlbCBmaXQpCgpgYGB7cn0KcmVzaWR1YWxQbG90cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbE5vTWlzc2luZywgaWQgPSBUUlVFKQpgYGAKCiMjIyBNYXJnaW5hbCBNb2RlbCBQbG90cyB7I21hcmdpbmFsTW9kZWxQbG90c30KCk1hcmdpbmFsIG1vZGVsIHBsb3RzIGFyZSBwbG90cyBvZiB0aGUgb3V0Y29tZSB2ZXJzdXMgcHJlZGljdG9ycy9maXR0ZWQgdmFsdWVzLgoKSW5jbHVkZXMgcGxvdHMgb2YgYSkgb2JzZXJ2ZWQgb3V0Y29tZSB2YWx1ZXMgdmVyc3VzIHZhbHVlcyBvbiBwcmVkaWN0b3JzIChpZ25vcmluZyB0aGUgb3RoZXIgcHJlZGljdG9ycykgYW5kIGIpIG9ic2VydmVkIG91dGNvbWUgdmFsdWVzIHZlcnN1cyBtb2RlbCBmaXR0ZWQgdmFsdWVzLgoKYGBge3J9Cm1hcmdpbmFsTW9kZWxQbG90cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCwgc2QgPSBUUlVFLCBpZCA9IFRSVUUpCmBgYAoKIyMjIEFkZGVkLVZhcmlhYmxlIFBsb3RzIHsjYWRkZWRWYXJpYWJsZVBsb3RzfQoKQWRkZWQtdmFyaWFibGUgcGxvdHMgYXJlIHBsb3RzIG9mIHRoZSBwYXJ0aWFsIGFzc29jaWF0aW9uIGJldHdlZW4gdGhlIG91dGNvbWUgYW5kIGVhY2ggcHJlZGljdG9yLCBjb250cm9sbGluZyBmb3IgYWxsIG90aGVyIHByZWRpY3RvcnMuCgpVc2VmdWwgZm9yIGlkZW50aWZ5aW5nIGpvaW50bHkgaW5mbHVlbnRpYWwgb2JzZXJ2YXRpb25zIGFuZCBzdHVkeWluZyB0aGUgaW1wYWN0IG9mIG9ic2VydmF0aW9ucyBvbiB0aGUgcmVncmVzc2lvbiBjb2VmZmljaWVudHMuCgp5LWF4aXM6IHJlc2lkdWFscyBmcm9tIG1vZGVsIHdpdGggYWxsIHByZWRpY3RvcnMgZXhjbHVkaW5nIHRoZSBwcmVkaWN0b3Igb2YgaW50ZXJlc3QKCngtYXhpczogcmVzaWR1YWxzIGZyb20gbW9kZWwgcmVncmVzc2luZyBwcmVkaWN0b3Igb2YgaW50ZXJlc3Qgb24gYWxsIG90aGVyIHByZWRpY3RvcnMKCmBgYHtyfQphdlBsb3RzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCBpZCA9IFRSVUUpCmBgYAoKIyMjIyBSZWZpdCBtb2RlbCByZW1vdmluZyBqb2ludGx5IGluZmx1ZW50aWFsIG9ic2VydmF0aW9ucwoKYGBge3J9Cm11bHRpcGxlUmVncmVzc2lvbk1vZGVsX3JlbW92ZUpvaW50bHlJbmZsdWVudGlhbE9icyA8LSBsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hLmFjdGlvbiA9IG5hLmV4Y2x1ZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXQgPSAtYyg2MzE4LDYwMjMsNDAyMiw0MDQwKSkKCmF2UGxvdHMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfcmVtb3ZlSm9pbnRseUluZmx1ZW50aWFsT2JzLCBpZCA9IFRSVUUpCgpjb21wYXJlQ29lZnMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwsIG11bHRpcGxlUmVncmVzc2lvbk1vZGVsX3JlbW92ZUpvaW50bHlJbmZsdWVudGlhbE9icykKYGBgCgojIyMgT3V0bGllciB0ZXN0CgpMb2NhdGVzIHRoZSBsYXJnZXN0IFN0dWRlbnRpemVkIHJlc2lkdWFscyBpbiBhYnNvbHV0ZSB2YWx1ZSBhbmQgY29tcHV0ZXMgdGhlIEJvbmZlcnJvbmktY29ycmVjdGVkIHAtdmFsdWVzIGJhc2VkIG9uIGEgdC10ZXN0IGZvciBsaW5lYXIgbW9kZWxzLgoKVGVzdCBvZiBvdXRseWluZ25lc3MsIGkuZS4sIGhvdyBsaWtlbHkgb25lIHdvdWxkIGhhdmUgYSByZXNpZHVhbCBvZiBhIGdpdmVuIG1hZ25pdHVkZSBpbiBhIG5vcm1hbCBkaXN0cmlidXRpb24gd2l0aCB0aGUgc2FtZSBzYW1wbGUgc2l6ZQoKTm90ZTogaXQgZG9lcyBub3QgdGVzdCBob3cgZXh0cmVtZSBhbiBvYnNlcnZhdGlvbiBpcyByZWxhdGl2ZSB0byBpdHMgZGlzdHJpYnV0aW9uIChpLmUuLCBsZXZlcmFnZSkKCmBgYHtyfQpvdXRsaWVyVGVzdChtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkKYGBgCgojIyMgT2JzZXJ2YXRpb25zIHdpdGggaGlnaCBsZXZlcmFnZQoKSWRlbnRpZmllcyBvYnNlcnZhdGlvbnMgd2l0aCBoaWdoIGxldmVyYWdlIChpLmUuLCBoaWdoIGhhdCB2YWx1ZXMpCgpoYXQgdmFsdWVzIGFyZSBhbiBpbmRleCBvZiBsZXZlcmFnZSAob2JzZXJ2YXRpb25zIHRoYXQgYXJlIGZhciBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIHJlZ3Jlc3NvciBzcGFjZSBhbmQgaGF2ZSBncmVhdGVyIGluZmx1ZW5jZSBvbiBPTFMgcmVncmVzc2lvbiBjb2VmZmljaWVudHMpCgpgYGB7cn0KaGlzdChoYXR2YWx1ZXMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpKQpwbG90KGhhdHZhbHVlcyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkpCgppbmZsdWVuY2VJbmRleFBsb3QobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwsIGlkID0gVFJVRSkKCmluZmx1ZW5jZVBsb3QobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwsIGlkID0gVFJVRSkgIyBjaXJjbGUgc2l6ZSBpcyBwcm9wb3J0aW9uYWwgdG8gQ29vaydzIERpc3RhbmNlCgpsZXZlcmFnZVBsb3RzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCBpZCA9IFRSVUUpCmBgYAoKIyMjIE9ic2VydmF0aW9ucyB3aXRoIGhpZ2ggaW5mbHVlbmNlIChvbiBPTFMgcmVncmVzc2lvbiBjb2VmZmljaWVudHMpCgpodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvb2xzcnIvdmlnbmV0dGVzL2luZmx1ZW5jZV9tZWFzdXJlcy5odG1sCgpgYGB7cn0KaGVhZChpbmZsdWVuY2UubWVhc3VyZXMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpJGluZm1hdCkKYGBgCgojIyMgREZCRVRBIHsjZGZiZXRhfQoKYGBge3J9CmhlYWQoZGZiZXRhKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSkKCmhpc3QoZGZiZXRhKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSkKZGZiZXRhc1Bsb3RzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsLCBpZCA9IFRSVUUpCmBgYAoKIyMjIERGRklUUyB7I2RmZml0c30KCmBgYHtyfQpoZWFkKGRmZml0cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbClbb3JkZXIoZGZmaXRzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSwgZGVjcmVhc2luZyA9IFRSVUUpXSkKCmhpc3QoZGZmaXRzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSkKcGxvdChkZmZpdHMobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpKQpwbG90KGRmZml0cyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbClbb3JkZXIoZGZmaXRzKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSwgZGVjcmVhc2luZyA9IFRSVUUpXSkKYGBgCgojIyMgQ29vaydzIERpc3RhbmNlIHsjY29va3NEaXN0YW5jZX0KCk9ic2VydmF0aW9ucyB0aGF0IGFyZSBib3RoIG91dGx5aW5nIChoYXZlIGEgaGlnaCByZXNpZHVhbCBmcm9tIHRoZSByZWdyZXNzaW9uIGxpbmUpIGFuZCBoYXZlIGhpZ2ggbGV2ZXJhZ2UgKGFyZSBmYXIgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSByZWdyZXNzb3Igc3BhY2UpIGhhdmUgaGlnaCBpbmZsdWVuY2Ugb24gdGhlIE9MUyByZWdyZXNzaW9uIGNvZWZmaWNpZW50cy4KQW4gb2JzZXJ2YXRpb24gd2lsbCBoYXZlIGxlc3MgaW5mbHVlbmNlIGlmIGl0IGxpZXMgb24gdGhlIHJlZ3Jlc3Npb24gbGluZSAobm90IGFuIG91dGxpZXIsIGkuZS4sIGhhcyBhIGxvdyByZXNpZHVhbCkgb3IgaWYgaXQgaGFzIGxvdyBsZXZlcmFnZSAoaS5lLiwgaGFzIGEgdmFsdWUgbmVhciB0aGUgY2VudGVyIG9mIGEgcHJlZGljdG9yJ3MgZGlzdHJpYnV0aW9uKS4KCmBgYHtyfQpoZWFkKGNvb2tzLmRpc3RhbmNlKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKVtvcmRlcihjb29rcy5kaXN0YW5jZShtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCksIGRlY3JlYXNpbmcgPSBUUlVFKV0pCgpoaXN0KGNvb2tzLmRpc3RhbmNlKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSkKcGxvdChjb29rcy5kaXN0YW5jZShtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCkpCnBsb3QoY29va3MuZGlzdGFuY2UobXVsdGlwbGVSZWdyZXNzaW9uTW9kZWwpW29yZGVyKGNvb2tzLmRpc3RhbmNlKG11bHRpcGxlUmVncmVzc2lvbk1vZGVsKSwgZGVjcmVhc2luZyA9IFRSVUUpXSkKYGBgCgojIyMjIFJlZml0IG1vZGVsIHJlbW92aW5nIHZhbHVlcyB3aXRoIGhpZ2ggY29vaydzIGRpc3RhbmNlCgpgYGB7cn0KbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfMiA8LSBsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXQgPSAtYygyNzY1LDEzNzEpKQoKbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfMyA8LSBsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXQgPSAtYygyNzY1LDEzNzEsMjc2NykpCgptdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbF80IDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNldCA9IC1jKDI3NjUsMTM3MSwyNzY3LDg0NzIpKQoKbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfNSA8LSBsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXQgPSAtYygyNzY1LDEzNzEsMjc2Nyw4NDcyLDYxNzApKQoKbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfNiA8LSBsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmEuYWN0aW9uID0gbmEuZXhjbHVkZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXQgPSAtYygyNzY1LDEzNzEsMjc2Nyw4NDcyLDYxNzAsNjAyMykpCgptdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbF83IDwtIGxtKGJwaV9hbnRpc29jaWFsVDJTdW0gfiBicGlfYW50aXNvY2lhbFQxU3VtICsgYnBpX2FueGlvdXNEZXByZXNzZWRTdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG15ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYS5hY3Rpb24gPSBuYS5leGNsdWRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNldCA9IC1jKDI3NjUsMTM3MSwyNzY3LDg0NzIsNjE3MCw2MDIzLDI3NjYpKQpgYGAKCiMjIyMjIEV4YW1pbmUgaG93IG11Y2ggcmVncmVzc2lvbiBjb2VmZmljaWVudHMgY2hhbmdlIHdoZW4gZXhjbHVkaW5nIGluZmx1ZW50aWFsIG9ic2VydmF0aW9ucwoKYGBge3J9CmNvbXBhcmVDb2VmcyhtdWx0aXBsZVJlZ3Jlc3Npb25Nb2RlbCwgbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfMiwgbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfMywgbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfNCwgbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfNSwgbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfNiwgbXVsdGlwbGVSZWdyZXNzaW9uTW9kZWxfNykKYGBgCgojIyMjIEV4YW1pbmUgaG93IG11Y2ggcmVncmVzc2lvbiBjb2VmZmljaWVudHMgY2hhbmdlIHdoZW4gdXNpbmcgbGVhc3QgdHJpbW1lZCBzcXVhcmVzIChMVFMpIHRoYXQgaXMgcmVzaXN0YW50IHRvIG91dGxpZXJzCgpgYGB7cn0KY29lZihsbShicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgIGRhdGEgPSBteWRhdGEsCiAgICAgICAgbmEuYWN0aW9uPSJuYS5leGNsdWRlIikpCgpjb2VmKGx0c1JlZyhicGlfYW50aXNvY2lhbFQyU3VtIH4gYnBpX2FudGlzb2NpYWxUMVN1bSArIGJwaV9hbnhpb3VzRGVwcmVzc2VkU3VtLAogICAgICAgICAgICBkYXRhID0gbXlkYXRhLAogICAgICAgICAgICBuYS5hY3Rpb24gPSAibmEuZXhjbHVkZSIpKQpgYGAKCiMjIyBSZXNvdXJjZXMKCkJvb2s6IEFuIFIgQ29tcGFuaW9uIHRvIEFwcGxpZWQgUmVncmVzc2lvbgoKaHR0cDovL3Blb3BsZS5kdWtlLmVkdS9+cm5hdS90ZXN0aW5nLmh0bQoKaHR0cDovL3d3dy5zdGF0bWV0aG9kcy5uZXQvc3RhdHMvcmRpYWdub3N0aWNzLmh0bWwKCmh0dHA6Ly9zb2NzZXJ2LnNvY3NjaS5tY21hc3Rlci5jYS9qZm94L0NvdXJzZXMvQnJhemlsLTIwMDkvaW5kZXguaHRtbAoKaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT3JkaW5hcnlfbGVhc3Rfc3F1YXJlcyNBc3N1bXB0aW9ucwoKIyBTZXNzaW9uIEluZm8KCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAiZm9sZC1oaWRlIn0Kc2Vzc2lvbkluZm8oKQpgYGAK</div>
<script type="text/javascript" src="includes/external-links.js"></script>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Add font awesome icons -->
<p style="text-align: center;">
    <a href="https://github.com/DevPsyLab" target="_blank" class="fa fa-github fa-fw fa-3x"></a>
    <a href="https://twitter.com/devpsylab" target="_blank" class="fa fa-twitter fa-fw fa-3x"></a>
    <a href="https://www.facebook.com/DevPsyLab" target="_blank" class="fa fa-facebook fa-fw fa-3x"></a>
	<a href="https://www.instagram.com/dev_psy_lab" target="_blank" class="fa fa-instagram fa-fw fa-3x"></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("regression.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
